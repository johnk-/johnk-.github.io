<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Behavior of TO STRING!, AS STRING!, MOLD - #6 by hostilefork - Internals - AltRebol</title>
    <meta name="description" content="One big and unanswered question has been regarding the conversion of things to strings.  I think that SPACED has come along as a pretty good name for what was &amp;quot;reform&amp;quot;, and as a specialization of DELIMIT which also has U&amp;hellip;">
    <meta name="generator" content="Discourse 3.5.0.beta6-dev - https://github.com/discourse/discourse version 623cde985b21c2ed812b83d3ea94f69231613718">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" media="all" content="#fff">

<meta name="color-scheme" content="light">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, viewport-fit=cover">
<link rel="canonical" href="../630.html" />

<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="AltRebol Search">

    <link href="https://rebol.metaeducation.com/stylesheets/color_definitions_base__2_ceb61c279a74dfa3cef6a62f7784988102abec82.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" class="light-scheme"/>

<link href="https://rebol.metaeducation.com/stylesheets/common_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="common"  />

  <link href="https://rebol.metaeducation.com/stylesheets/desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="desktop"  />



    <link href="https://rebol.metaeducation.com/stylesheets/chat_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="chat"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-details_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-details"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-lazy-videos_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-local-dates_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-narrative-bot_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-presence_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-presence"  />
    <link href="https://rebol.metaeducation.com/stylesheets/docker_manager_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="docker_manager"  />
    <link href="https://rebol.metaeducation.com/stylesheets/footnote_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="footnote"  />
    <link href="https://rebol.metaeducation.com/stylesheets/poll_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="poll"  />
    <link href="https://rebol.metaeducation.com/stylesheets/spoiler-alert_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="spoiler-alert"  />
    <link href="https://rebol.metaeducation.com/stylesheets/chat_desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="chat_desktop"  />
    <link href="https://rebol.metaeducation.com/stylesheets/poll_desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="https://rebol.metaeducation.com/stylesheets/common_theme_2_57fe803ed5a41e9f7d94086afaf66a1aab57d9ae.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="common_theme" data-theme-id="2" data-theme-name="default"/>
    

    
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;Behavior of TO STRING!, AS STRING!, MOLD&#39;" href="../630.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://rebol.metaeducation.com/t/behavior-of-to-string-as-string-mold/630/6" />
<meta name="twitter:url" content="https://rebol.metaeducation.com/t/behavior-of-to-string-as-string-mold/630/6" />
<meta property="og:title" content="Behavior of TO STRING!, AS STRING!, MOLD" />
<meta name="twitter:title" content="Behavior of TO STRING!, AS STRING!, MOLD" />
<meta property="og:description" content="The AS and TO distinction feels very clarifying, and I think it&#39;s a winner.  But there are some inconvenient truths, and a question of how to mitigate potential problems.  Under this system, we understand that AS aliasing doesn&#39;t make a copy by default:  &gt;&gt; text: copy &quot;foo&quot;  &gt;&gt; file: as file! &quot;foo&quot; == %foo  &gt;&gt; append file &quot;bar&quot; == %foobar  &gt;&gt; text == foobar  So you need to be sensitive about whether you need to make a COPY or not.  Seem fair enough--and COPY AS TEXT! reads fairly light and liter..." />
<meta name="twitter:description" content="The AS and TO distinction feels very clarifying, and I think it&#39;s a winner.  But there are some inconvenient truths, and a question of how to mitigate potential problems.  Under this system, we understand that AS aliasing doesn&#39;t make a copy by default:  &gt;&gt; text: copy &quot;foo&quot;  &gt;&gt; file: as file! &quot;foo&quot; == %foo  &gt;&gt; append file &quot;bar&quot; == %foobar  &gt;&gt; text == foobar  So you need to be sensitive about whether you need to make a COPY or not.  Seem fair enough--and COPY AS TEXT! reads fairly light and liter..." />
<meta property="og:article:section" content="Development" />
<meta property="og:article:section:color" content="25AAE2" />
<meta property="og:article:section" content="Internals" />
<meta property="og:article:section:color" content="25AAE2" />
<meta property="article:published_time" content="2018-05-22T03:31:16+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler ">
    
    <header>
  <a href="https://rebol.metaeducation.com/">AltRebol</a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="../630.html">Behavior of TO STRING!, AS STRING!, MOLD</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://rebol.metaeducation.com/c/development/internals/9" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://rebol.metaeducation.com/c/development/internals/9" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Internals</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  

    <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='Behavior of TO STRING!, AS STRING!, MOLD'>
      <link itemprop='url' href='../630.html'>
      <meta itemprop='datePublished' content='2018-05-18T02:15:19Z'>
        <meta itemprop='articleSection' content='Internals'>
      <meta itemprop='keywords' content=''>
      <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
        <meta itemprop='name' content='AltRebol'>
          <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
            <meta itemprop='url' content='https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
          </div>
      </div>

          <span itemprop='author' itemscope itemtype="http://schema.org/Person">
            <meta itemprop='name' content='hostilefork'>
            <link itemprop='url' rel='nofollow' href='https://rebol.metaeducation.com/u/hostilefork'>
          </span>
        <meta itemprop='text' content='One big and unanswered question has been regarding the conversion of things to strings.  I think that SPACED has come along as a pretty good name for what was &amp;quot;reform&amp;quot;, and as a specialization of DELIMIT which also has U&amp;hellip;'>

          <div id='post_6' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://rebol.metaeducation.com/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2018-05-22T03:31:16Z' class='post-time'>
                    May 22, 2018,  3:31am
                  </time>
                  <meta itemprop='dateModified' content='2018-05-24T13:48:51Z'>
              <span itemprop='position'>6</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>The AS and TO distinction feels very clarifying, and I think it's a winner.  But there are some inconvenient truths, and a question of how to mitigate potential problems.</p>
<p>Under this system, we understand that AS aliasing doesn't make a copy by default:</p>
<pre><code>&gt;&gt; text: copy "foo"

&gt;&gt; file: as file! "foo"
== %foo

&gt;&gt; append file "bar"
== %foobar

&gt;&gt; text
== foobar
</code></pre>
<p>So you need to be sensitive about whether you need to make a COPY or not.  Seem fair enough--and COPY AS TEXT! reads fairly light and literately.</p>
<p>But now remember the angle is that <strong>if you're not using AS, then the TO conversion will assume you meant the delimiters were part of the deal</strong>.  This is why TO TEXT! on a tag will give you the angle brackets in the series.  And it's also why TO FILE! on TEXT! will assume you meant you wanted the quotes, however that winds up presented:</p>
<pre><code>&gt;&gt; file: to file! "foo"
== %^"foo^"

&gt;&gt; first file
== #"^""

&gt;&gt; second file
== #"f"
</code></pre>
<p>This is not completely outlandish...especially when you consider that quotes are <a href="https://stackoverflow.com/q/1976007/211160">legal in filenames in linux</a>.</p>
<p>But there's been an idiom in practice something like this:</p>
<pre><code> foo: func [
     item [file! word! path!]
         "Will be converted to file!
][
    file: to file! item
    ...
]
</code></pre>
<p>Under the new rules you can't write this with AS FILE!, because a PATH! is an array.  So in that case, cannot be aliased as a string, you really do need a conversion.  But if you use TO FILE! under these rules you'll end up getting the <code>%</code> character in it, if it was a file to start with!</p>
<pre><code>&gt;&gt; to file! %foo
== %^%foo
</code></pre>
<p>So you'll end up writing:</p>
<pre><code> if match [word! path!] file [
     file: to file! file
 ]
</code></pre>
<p>Though that gives you a situation where it's a unique copy only if it was a WORD! or PATH!.  To get a new copy in all situations:</p>
<pre><code> file: either match [word! path!] file [
     to file! file
 ][
     copy file
 ]
</code></pre>
<p>In a way, I think that what this is doing is "weird" enough that it should take responsibility for its weirdness.  Think of the following list--which is similar to the motivating example in Rebol's make process:</p>
<pre><code>source-files [
   %foo.reb
   bar.reb
   mumble/foo.reb
   mumble/"bar with spaces.reb"
   %mumble/frotz.reb
   "stuff.reb"
]
</code></pre>
<p>There you've got a FILE!, a WORD!, a PATH! with two words, a PATH! with a word and a string, a FILE!, and a STRING!.  It's hard to argue that you get much closer to a solution when TO FILE! of something that is already a FILE! is a no-op, especially when it breaks the other advantages.</p>
<h3><a name="p-2195-what-if-make-of-a-type-to-itself-was-always-a-copy-1" class="anchor" href="6.html#p-2195-what-if-make-of-a-type-to-itself-was-always-a-copy-1"></a>What if MAKE of a type to itself was always a COPY?</h3>
<p>There's a third place we might look to, which is the infamous MAKE.  Where TO is similar to casting/conversion in other languages, MAKE's concept is more like construction from a loosely defined "spec".  The difference between TO and MAKE has been debated (it seemed rather ad-hoc), but it's known that <strong>to string! 10</strong> would give you "10", while <strong>make string! 10</strong> could give an empty string with 10 units of data in it.</p>
<p>Given MAKE's nebulous nature, might it be the missing link here, so that MAKE FILE! on something that was already a FILE! would leave it as-is...and could it be creative with the interpretation of PATH!s, STRING!s, and WORD!s?  We might even force that MAKE SOME-TYPE! of a value of type SOME-TYPE! would just copy it.  It may not be a ton of terra firma, but it means you'd only have to worry about the way MAKE would be interpreting types other than what you gave it.</p>
<p><em>(Note: This would be giving MAKE a rule similar to C++ handling of static_cast conversions.  You can't write a cast operator of a type to itself, just to any other type.  Just interesting to look at parallels in other systems.)</em></p>
<p>And there's an advantage to going this route.  It's compatible with R3-Alpha, Rebol2, and Red:</p>
<pre><code>&gt;&gt; make file! %foo
== %foo

&gt;&gt; make file! %foo/bar
== %foo/bar

&gt;&gt; make file! "foo"
== %foo
</code></pre>
<p>Given that this option exists, it seems there's no good reason to undermine the initiative for <strong>to text! "abc"</strong> to be <strong>{"abc"}</strong>.  All it means is people would have to use MAKE in places they previously expected to use TO, sometimes.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

                <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../../handle-cdata-c-data-and-cfunction-c-function/683.html">HANDLE!, CDATA! (C-DATA! ?) and CFUNCTION! (C-FUNCTION! ?)</a>
                        <meta itemprop='position' content='2'>
                      </div>
                </div>
          </div>
    </div>

      <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
          <span itemprop='name'>
            <a itemprop="url" href="../630.html#post_6">show post in topic</a>
          </span>
      </div>

    




    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/guidelines' itemprop="url">Guidelines </a>
        </span>
      </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://rebol.metaeducation.com/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://rebol.metaeducation.com/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    
  </body>
  
</html>
