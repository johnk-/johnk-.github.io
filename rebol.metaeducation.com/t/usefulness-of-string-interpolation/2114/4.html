<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Usefulness of String Interpolation - #4 by hostilefork - Philosophy - AltRebol</title>
    <meta name="description" content="Honestly, I’m not sure I agree with this. In Haskell, which is my main language, there are packages which implement string interpolation… and no-one uses them, because they just aren’t necessary! It’s no big deal when i&amp;hellip;">
    <meta name="generator" content="Discourse 3.5.0.beta6-dev - https://github.com/discourse/discourse version 623cde985b21c2ed812b83d3ea94f69231613718">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" media="all" content="#fff">

<meta name="color-scheme" content="light">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, viewport-fit=cover">
<link rel="canonical" href="../2114.html" />

<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="AltRebol Search">

    <link href="https://rebol.metaeducation.com/stylesheets/color_definitions_base__2_ceb61c279a74dfa3cef6a62f7784988102abec82.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" class="light-scheme"/>

<link href="https://rebol.metaeducation.com/stylesheets/common_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="common"  />

  <link href="https://rebol.metaeducation.com/stylesheets/desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="desktop"  />



    <link href="https://rebol.metaeducation.com/stylesheets/chat_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="chat"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-details_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-details"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-lazy-videos_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-local-dates_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-narrative-bot_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-presence_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-presence"  />
    <link href="https://rebol.metaeducation.com/stylesheets/docker_manager_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="docker_manager"  />
    <link href="https://rebol.metaeducation.com/stylesheets/footnote_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="footnote"  />
    <link href="https://rebol.metaeducation.com/stylesheets/poll_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="poll"  />
    <link href="https://rebol.metaeducation.com/stylesheets/spoiler-alert_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="spoiler-alert"  />
    <link href="https://rebol.metaeducation.com/stylesheets/chat_desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="chat_desktop"  />
    <link href="https://rebol.metaeducation.com/stylesheets/poll_desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="https://rebol.metaeducation.com/stylesheets/common_theme_2_57fe803ed5a41e9f7d94086afaf66a1aab57d9ae.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="common_theme" data-theme-id="2" data-theme-name="default"/>
    

    
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;Usefulness of String Interpolation&#39;" href="../2114.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://rebol.metaeducation.com/t/usefulness-of-string-interpolation/2114/4" />
<meta name="twitter:url" content="https://rebol.metaeducation.com/t/usefulness-of-string-interpolation/2114/4" />
<meta property="og:title" content="Usefulness of String Interpolation" />
<meta name="twitter:title" content="Usefulness of String Interpolation" />
<meta property="og:description" content="So now there is INTERPOLATE.  &gt;&gt; num: 1000  &gt;&gt; interpolate &quot;Hello (num + 20) World!&quot; == &quot;Hello 1020 World!&quot;  It&#39;s the &quot;bad boy&quot; environment-capturing primitive, that does what most natives should avoid--sniffing the evaluator&#39;s concept of &quot;current context&quot; and reacting to that.  (You usually don&#39;t want functions to be doing this, they should be reacting solely to their parameters.)  Besides capturing the context, it&#39;s a synonym for if you&#39;d written compose2 @() ....  COMPOSE2 is what you want us..." />
<meta name="twitter:description" content="So now there is INTERPOLATE.  &gt;&gt; num: 1000  &gt;&gt; interpolate &quot;Hello (num + 20) World!&quot; == &quot;Hello 1020 World!&quot;  It&#39;s the &quot;bad boy&quot; environment-capturing primitive, that does what most natives should avoid--sniffing the evaluator&#39;s concept of &quot;current context&quot; and reacting to that.  (You usually don&#39;t want functions to be doing this, they should be reacting solely to their parameters.)  Besides capturing the context, it&#39;s a synonym for if you&#39;d written compose2 @() ....  COMPOSE2 is what you want us..." />
<meta property="og:article:section" content="Usage" />
<meta property="og:article:section:color" content="3AB54A" />
<meta property="og:article:section" content="Philosophy" />
<meta property="og:article:section:color" content="3AB54A" />
<meta property="article:published_time" content="2025-03-25T23:47:58+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler ">
    
    <header>
  <a href="https://rebol.metaeducation.com/">AltRebol</a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="../2114.html">Usefulness of String Interpolation</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://rebol.metaeducation.com/c/usage/philosophy/31" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #3AB54A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Usage</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://rebol.metaeducation.com/c/usage/philosophy/31" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #3AB54A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Philosophy</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  

    <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='Usefulness of String Interpolation'>
      <link itemprop='url' href='../2114.html'>
      <meta itemprop='datePublished' content='2024-01-11T01:39:48Z'>
        <meta itemprop='articleSection' content='Philosophy'>
      <meta itemprop='keywords' content=''>
      <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
        <meta itemprop='name' content='AltRebol'>
          <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
            <meta itemprop='url' content='https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
          </div>
      </div>

          <span itemprop='author' itemscope itemtype="http://schema.org/Person">
            <meta itemprop='name' content='hostilefork'>
            <link itemprop='url' rel='nofollow' href='https://rebol.metaeducation.com/u/hostilefork'>
          </span>
        <meta itemprop='text' content='Honestly, I’m not sure I agree with this. In Haskell, which is my main language, there are packages which implement string interpolation… and no-one uses them, because they just aren’t necessary! It’s no big deal when i&amp;hellip;'>

          <div id='post_4' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://rebol.metaeducation.com/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2025-03-25T23:47:58Z' class='post-time'>
                    March 25, 2025, 11:47pm
                  </time>
                  <meta itemprop='dateModified' content='2025-03-26T07:30:52Z'>
              <span itemprop='position'>4</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>So now there is INTERPOLATE.</p>
<pre><code>&gt;&gt; num: 1000

&gt;&gt; interpolate "Hello (num + 20) World!"
== "Hello 1020 World!"
</code></pre>
<p>It's the "bad boy" environment-capturing primitive, that does what most natives should avoid--sniffing the evaluator's concept of "current context" and reacting to that.  (You usually don't want functions to be doing this, they should be reacting solely to their parameters.)</p>
<p>Besides capturing the context, <a href="../../envelop-and-compose-by-example/2294/2.html">it's a synonym for if you'd written <strong>compose2 @() ...</strong></a>.  COMPOSE2 is what you want use to change the delimiters or do other customizations... just use an <code>@list</code> form to capture the binding and tell COMPOSE2 you want to use the binding of that list:</p>
<pre><code>&gt;&gt; num: 1000

&gt;&gt; compose2 @{{}} "Hello {{num + 20}} World!"
== "Hello 1020 World!"
</code></pre>
<h2><a name="p-8080-taking-interpolate-stratospheric-1" class="anchor" href="4.html#p-8080-taking-interpolate-stratospheric-1"></a>Taking INTERPOLATE Stratospheric</h2>
<p>One of the first things I did was fix the historical behavior of URL!</p>
<pre><code>rebol2&gt;&gt; load "http://(domain)/example.txt"
== [http:// (domain) /example.txt]
</code></pre>
<p>So URL! now matches parentheses:</p>
<pre><code>&gt;&gt; rev: 'info.rebol.forum

&gt;&gt; url: https://(reverse of rev)/t/usefulness-of-string-interpolation/2114

&gt;&gt; interpolate url
== https://rebol.metaeducation.com/t/usefulness-of-string-interpolation/2114
</code></pre>
<p>That works now, but I also plan to adjust the scanner to let you put parentheses or other delimiters before the :// ...</p>
<pre><code>&gt;&gt; url: transcode "[protocol]://example.com"
== [protocol]://example.com

&gt;&gt; protocol: 'https

&gt;&gt; compose2 $[] url
== https://example.com
</code></pre>
<p>This made me realize that my dreams of giving FILE! "teeth" may be actualizable... <em>INTERPOLATE can have special behavior if what you're working with is a file</em>.</p>
<p>What I've always wanted to enforce is that if you put FILE! into FILE! where a slash is, that the thing you put in has a slash:</p>
<pre><code>&gt;&gt; some-dir: %home/

&gt;&gt; interpolate %(some-dir)/something.txt
== %home/something.txt

&gt;&gt; interpolate %(bad-dir)something.txt
** Error: FILE! interpolation slash calculus mismatch: %home/

&gt;&gt; bad-dir: %home  ; no slash, not a dir

&gt;&gt; interpolate %(bad-dir)/something.txt
** Error: FILE! interpolation slash calculus mismatch: %home

&gt;&gt; interpolate %(bad-dir)-something.txt
== home-something.txt
</code></pre>
<p>The idea is that you know from the template whether you're introducing a directory or not.  This is all to bring sanity to the process--if you don't want sanity, use a plain string and turn it into a FILE! later.  I just want "sanity out of the box".</p>
<p>The same rules would apply to PATH! if you're using them as a proxy for files:</p>
<pre><code>&gt;&gt; path-dir: 'home/

&gt;&gt; interpolate %(path-dir)/something.txt
== %home/something.txt

&gt;&gt; interpolate %(path-dir)/something.txt
** Error: FILE! interpolation slash calculus mismatch: home/
</code></pre>
<p>I don't know that it would apply to WORD! substitutions, as they are kind of another beast.  They can't have internal slashes so they don't have the same kinds of problems, so this is probably legal:</p>
<pre><code>&gt;&gt; word-dir: 'home

&gt;&gt; interpolate %(word-dir)/something.txt
== %home/something.txt
</code></pre>
<p>I think TEXT! could similarly duck the rules, as long as it didn't have any internal slashes in the substitution:</p>
<pre><code>&gt;&gt; text-dir: "home"

&gt;&gt; interpolate %(text-dir)/something.txt
== %home/something.txt

&gt;&gt; text-dir: "home/hostilefork"

&gt;&gt; interpolate %(text-dir)/something.txt
** Error: FILE! interpolation slash calculus mismatch: home/hostilefork

&gt;&gt; text-dir: "home/hostilefork/"

&gt;&gt; interpolate %(text-dir)/something.txt
== home/hostilefork/something.txt
</code></pre>
<h2><a name="p-8080-default-tag-scanning-needs-supertag-2" class="anchor" href="4.html#p-8080-default-tag-scanning-needs-supertag-2"></a>Default TAG! Scanning Needs "Supertag"</h2>
<p>Historical Rebol/Red tag doesn't enter a paired scan mode when it sees parentheses and such:</p>
<pre><code>red&gt;&gt; tag: &lt;foo=(1 &gt; 2) bar=(3 &lt; 4)&gt;
*** Syntax Error: (line 1) missing ( at ) bar=(3 &lt; 4)&gt;
</code></pre>
<p>It thinks the first tag is <strong><code>&lt;foo=(1 &gt;</code></strong> and gets confused after that.</p>
<p>When I first was giving feedback on the design of Rebol/Red I proposed something I called <em><strong>SuperTag!</strong></em>, which people didn't seem to like but only Ladislav remarked on it, without defending the objection:</p>
<p><a href="https://github.com/metaeducation/rebol-issues/issues/2234" class="inline-onebox">SuperTAG!: upon a " { ( [ &lt; in tag content, validate substring via Rebol lexer · Issue #2234 · metaeducation/rebol-issues · GitHub</a></p>
<p>Given my proposal that PRINT be cued by TAG! to do interpolation, I think we should indeed make SuperTag the default:</p>
<pre><code>&gt;&gt; print &lt;Supertag should be the (if 2 &gt; 1 [reverse "tluafed"])!&gt;
Supertag should be the default!
</code></pre>
<p>But only <em>if you are using the basic no dashes delimiter form of tag</em>.  That means you can still make weird tags, you just have to use <strong><code>-&lt;...&gt;-</code></strong>.</p>
<pre><code>&gt;&gt; &lt;)))&gt;
** Error: Unexpected ) in TAG! scanning (use -&lt;...&gt;- if intentional)

&gt;&gt; -&lt;)))&gt;-
== -&lt;)))&gt;-
</code></pre>
<p>This gives me pause to wonder if we should also make SuperString the default (?)</p>
<pre><code>&gt;&gt; "}}}"
** Error: Unexpected } in TEXT! scanning (use -"..."- if intentional)
</code></pre>
<p>You'd then be able to use strings inside escapes:</p>
<pre><code>&gt;&gt; interpolate "You could do cool (reverse "ffuts")!"
You could do cool stuff!
</code></pre>
<p>It would make literals for delimiters longer than we'd like.  You already can't use things like <strong><code>#[</code></strong> as a character constant, but have to say <strong><code>#"["</code></strong>, so it's usually preferred to say "[", but now you'd have to say <code>-"["-</code> which is 5 characters to get 1.</p>
<p>But I've been thinking <a href="https://rebol.metaeducation.com/t/taking-delimiters-literally-in-the-issue-datatype/2386">maybe we should let <code>#[</code> and <code>#}</code> be character literals</a>, and sacrifice the <strong><code>#[...]</code></strong> "construction syntax" and the <strong><code>#{...}</code></strong> for BINARY!.  It's very speculative and requires a bit of a perception change, but it may be a better idea than it seems on the surface.</p>
<h2><a name="p-8080-crazy-fun-times-3" class="anchor" href="4.html#p-8080-crazy-fun-times-3"></a>Crazy Fun Times</h2>
<p><img src="../../../images/emoji/twitter/zany_face.png%3Fv=14" title=":zany_face:" class="emoji only-emoji" alt=":zany_face:" loading="lazy" width="20" height="20"></p>
<p>This is introducing some constraints on the types.  But without constraints and just saying "oh, they're just arbitrary strings" then you can't get that much leverage.</p>
<p><a href="http://blog.hostilefork.com/freedom-to-and-freedom-from/" class="inline-onebox">philosophy : "Freedom To" and "Freedom From" in Software Architecture</a></p>
<p>If you want an arbitrary string, use TEXT!.</p>
<p>As with the <strong>-&lt;...&gt;-</strong> tag form, there can be workarounds for the "putting anything you want" syntaxes.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="1" />
              <span class='post-likes'>1 Like</span>
            </div>

                <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../../2023-another-year-a-few-things-that-happened/2089/6.html">2023, Another Year :dash: A Few Things That Happened</a>
                        <meta itemprop='position' content='4'>
                      </div>
                </div>
          </div>
    </div>

      <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
          <span itemprop='name'>
            <a itemprop="url" href="../2114.html#post_4">show post in topic</a>
          </span>
      </div>

    




    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/guidelines' itemprop="url">Guidelines </a>
        </span>
      </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://rebol.metaeducation.com/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://rebol.metaeducation.com/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    
  </body>
  
</html>
