<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Should Failed IF Be NULL (and Break My Heart ðŸ’”)? - Semantics - AltRebol</title>
    <meta name="description" content="This idea has been near and dear to my heart: that without any additional work, failed IF returns something that will vaporize in COMPOSE and UNSPACED. 
But over time the costs have been adding up.  Are these costs too &amp;hellip;">
    <meta name="generator" content="Discourse 3.5.0.beta6-dev - https://github.com/discourse/discourse version 623cde985b21c2ed812b83d3ea94f69231613718">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" media="all" content="#fff">

<meta name="color-scheme" content="light">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, viewport-fit=cover">
<link rel="canonical" href="2419.html" />

<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="AltRebol Search">

    <link href="https://rebol.metaeducation.com/stylesheets/color_definitions_base__2_ceb61c279a74dfa3cef6a62f7784988102abec82.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" class="light-scheme"/>

<link href="https://rebol.metaeducation.com/stylesheets/common_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="common"  />

  <link href="https://rebol.metaeducation.com/stylesheets/desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="desktop"  />



    <link href="https://rebol.metaeducation.com/stylesheets/chat_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="chat"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-details_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-details"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-lazy-videos_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-local-dates_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-narrative-bot_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-presence_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-presence"  />
    <link href="https://rebol.metaeducation.com/stylesheets/docker_manager_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="docker_manager"  />
    <link href="https://rebol.metaeducation.com/stylesheets/footnote_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="footnote"  />
    <link href="https://rebol.metaeducation.com/stylesheets/poll_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="poll"  />
    <link href="https://rebol.metaeducation.com/stylesheets/spoiler-alert_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="spoiler-alert"  />
    <link href="https://rebol.metaeducation.com/stylesheets/chat_desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="chat_desktop"  />
    <link href="https://rebol.metaeducation.com/stylesheets/poll_desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="https://rebol.metaeducation.com/stylesheets/common_theme_2_57fe803ed5a41e9f7d94086afaf66a1aab57d9ae.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="common_theme" data-theme-id="2" data-theme-name="default"/>
    

    
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;Should Failed IF Be NULL (and Break My Heart :broken_heart:)?&#39;" href="../should-failed-if-be-null-and-break-my-heart/2419.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://rebol.metaeducation.com/t/should-failed-if-be-null-and-break-my-heart/2419" />
<meta name="twitter:url" content="https://rebol.metaeducation.com/t/should-failed-if-be-null-and-break-my-heart/2419" />
<meta property="og:title" content="Should Failed IF Be NULL (and Break My Heart ðŸ’”)?" />
<meta name="twitter:title" content="Should Failed IF Be NULL (and Break My Heart ðŸ’”)?" />
<meta property="og:description" content="This idea has been near and dear to my heart: that without any additional work, failed IF returns something that will vaporize in COMPOSE and UNSPACED.  But over time the costs have been adding up.  Are these costs too great?  Let&#39;s look.  It makes IF different from all the other branching constructs e.g. CASE and SWITCH return NULL when they don&#39;t take a branch.  IF being different is a design/cognitive load, some might argue.  What if you actually want an IF that returns NULL? For instance, s..." />
<meta name="twitter:description" content="This idea has been near and dear to my heart: that without any additional work, failed IF returns something that will vaporize in COMPOSE and UNSPACED.  But over time the costs have been adding up.  Are these costs too great?  Let&#39;s look.  It makes IF different from all the other branching constructs e.g. CASE and SWITCH return NULL when they don&#39;t take a branch.  IF being different is a design/cognitive load, some might argue.  What if you actually want an IF that returns NULL? For instance, s..." />
<meta property="og:article:section" content="Development" />
<meta property="og:article:section:color" content="25AAE2" />
<meta property="og:article:section" content="Semantics" />
<meta property="og:article:section:color" content="25AAE2" />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="4 mins ðŸ•‘" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="1 â¤" />
<meta property="article:published_time" content="2025-04-17T09:12:25+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler ">
    
    <header>
  <a href="https://rebol.metaeducation.com/">AltRebol</a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="2419.html">Should Failed IF Be NULL (and Break My Heart ðŸ’”)?</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://rebol.metaeducation.com/c/development/semantics/55" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://rebol.metaeducation.com/c/development/semantics/55" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Semantics</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  

    <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='Should Failed IF Be NULL (and Break My Heart :broken_heart:)?'>
      <link itemprop='url' href='2419.html'>
      <meta itemprop='datePublished' content='2025-04-17T09:12:25Z'>
        <meta itemprop='articleSection' content='Semantics'>
      <meta itemprop='keywords' content=''>
      <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
        <meta itemprop='name' content='AltRebol'>
          <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
            <meta itemprop='url' content='https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
          </div>
      </div>


          <div id='post_1'  class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://rebol.metaeducation.com/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>

                <link itemprop="mainEntityOfPage" href="2419.html">


              <span class="crawler-post-infos">
                  <time  datetime='2025-04-17T09:12:25Z' class='post-time'>
                    April 17, 2025,  9:12am
                  </time>
                  <meta itemprop='dateModified' content='2025-05-10T04:56:46Z'>
              <span itemprop='position'>1</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <aside class="quote no-group" data-username="hostilefork" data-post="1" data-topic="1244">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="../../user_avatar/rebol.metaeducation.com/hostilefork/48/421_2.png" class="avatar"><a href="../the-canonical-list-of-non-negotiables/1244/1.html">The Canonical List of Non-Negotiables</a></div>
<blockquote>
<p>So failed conditionals were re-tuned to return VOID:</p>
<pre data-code-wrap="plaintext"><code class="lang-plaintext">&gt;&gt; compose [&lt;a&gt; (if false [&lt;b&gt;]) &lt;c&gt;]
== [&lt;a&gt; &lt;c&gt;]

&gt;&gt; unspaced ["a" if false ["b"] "c"]
== "ac"
</code></pre>
</blockquote>
</aside>
<p>This idea has been near and dear to my heart: that without any additional work, failed IF returns something that will vaporize in COMPOSE and UNSPACED.</p>
<p>But over time the costs have been adding up.  Are these costs too great?  Let's look.</p>
<h2><a name="p-8150-it-makes-if-different-from-all-the-other-branching-constructs-1" class="anchor" href="2419.html#p-8150-it-makes-if-different-from-all-the-other-branching-constructs-1"></a>It makes IF different from all the other branching constructs</h2>
<p>e.g. CASE and SWITCH return NULL when they don't take a branch.  IF being different is a design/cognitive load, some might argue.</p>
<h2><a name="p-8150-what-if-you-actually-want-an-if-that-returns-null-2" class="anchor" href="2419.html#p-8150-what-if-you-actually-want-an-if-that-returns-null-2"></a>What if you actually <em>want</em> an IF that returns NULL?</h2>
<p>For instance, setting refinements in a frame:</p>
<pre><code>&gt;&gt; bunch-of-dups: 'yes

&gt;&gt; f: make frame! append/

&gt;&gt; f.series: [a b c]
&gt;&gt; f.value: 'd
&gt;&gt; f.dup: if yes? bunch-of-dups [5]

&gt;&gt; eval f
== [a b c d d d d d]
</code></pre>
<p>It's not legal to make <strong><code>f.dup</code></strong> a void, so in this situation we want <code>if null [5]</code> to be null.</p>
<p>There are workarounds of course:</p>
<pre><code>f.dup: either bunch-of-dups [5] [null]

f.dup: all [bunch-of-dups, 5]
</code></pre>
<p>Historical Redbol of course biased this the other way, which is why when you want a COMPOSE slot to go away that's when you have to use <strong><code>either condition [...stuff...] []</code></strong></p>
<h2><a name="p-8150-branches-weirder-than-they-need-to-be-maybe-3" class="anchor" href="2419.html#p-8150-branches-weirder-than-they-need-to-be-maybe-3"></a>Branches Weirder Than They Need To Be, Maybe?</h2>
<p>THEN and ELSE <em>MUST</em> be weirder than (deferred) infix IF and IF NOT... because their treatment of "heavy nulls" (e.g. antiform blocks with quasi-nulls in them) differs.</p>
<pre><code> &gt;&gt; if (pack [null]) [print "This does not run"]

 &gt;&gt; (pack [null]) then [print "This runs"]
 This runs
</code></pre>
<p>This is a weird little design edge of necessity, that branching constructs turn "plain null" into "boxed null" in order to signify that a branch ran.   We do not want branches that incidentally evaluate to null to lead to else branches running:</p>
<pre><code>&gt;&gt; if 1 = 1 [print "BRANCH", x: null] else [print "ELSE"]
BRANCH
ELSE  ; !!! Noooo !!!
</code></pre>
<p>But THEN and ELSE are reacting to either unboxed void or unboxed null. Given that NULL is now the <em>only</em> falsey state, might it be better if unboxed null was the only state they reacted to?</p>
<h2><a name="p-8150-there-could-be-shorthands-4" class="anchor" href="2419.html#p-8150-there-could-be-shorthands-4"></a>There Could Be Shorthands...</h2>
<p>OPTIONAL has a shorthand as the <strong>?</strong> operator, and this would fit IF into the same strategy as other constructs:</p>
<pre><code>&gt;&gt; compose [&lt;a&gt; (? if null [&lt;b&gt;]) &lt;c&gt;]
== [&lt;a&gt; &lt;c&gt;]

&gt;&gt; unspaced ["a" ? if null ["b"] "c"]
== "ac"
</code></pre>
<p>Or maybe the voiding IF has a special name.  Like IFF for "IF-and-only-IF", meaning you don't intend to use it with THEN or ELSE, so it might return VOID which they (conceivably?) error on if they're testing for "falsey" ness?</p>
<pre><code>&gt;&gt; compose [&lt;a&gt; (iff null [&lt;b&gt;]) &lt;c&gt;]
== [&lt;a&gt; &lt;c&gt;]

&gt;&gt; unspaced ["a" iff null ["b"] "c"]
== "ac"
</code></pre>
<h2><a name="p-8150-possibly-creative-concepts-from-if-if-etc-5" class="anchor" href="2419.html#p-8150-possibly-creative-concepts-from-if-if-etc-5"></a>Possibly Creative Concepts From <code>if (if ...) [...]</code> etc.</h2>
<p>Turning IF back into something that returns a falsey null permits things like <strong><code>if (if ...) [...]</code></strong> and other creative concepts, and it's not like there aren't uses in aggregate expressions for an IF that gives falsey results instead of opt out on not branching.</p>
<p>Since both are useful, being able to give an inch here and split it out into two different constructs might be the good answer...making IF like every other conditional construct that returns null on branch not taken?</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

                <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../the-canonical-list-of-non-negotiables/1244/10.html">The Canonical List of Non-Negotiables</a>
                        <meta itemprop='position' content='2'>
                      </div>
                </div>
          </div>
          <div id='post_3' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://rebol.metaeducation.com/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2025-05-03T08:18:01Z' class='post-time'>
                    May 3, 2025,  8:18am
                  </time>
                  <meta itemprop='dateModified' content='2025-07-16T02:44:52Z'>
              <span itemprop='position'>3</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <h2><a name="p-8198-something-big-may-affect-this-question-1" class="anchor" href="2419.html#p-8198-something-big-may-affect-this-question-1"></a>Something Big (May) Affect This Question</h2>
<p>The stable antiform state currently known as "~void~" is losing the name "VOID" to the unstable antiform state that has been called "NIHIL" (of late).</p>
<p><a href="../could-an-unstable-mean-fully-remove-a-key/2431.html" class="inline-onebox">Should VOID Assigns Mean "Fully Remove A Key"?</a></p>
<p>It's not the first time empty antiform block will have been called "void".  <img src="../../images/emoji/twitter/roll_eyes.png%3Fv=14" title=":roll_eyes:" class="emoji" alt=":roll_eyes:" loading="lazy" width="20" height="20">  But it's the first time where I've really seen the choice with true clarity.</p>
<p>So, what are the implications of this?</p>
<pre><code>&gt;&gt; if 1 &gt; 0 [&lt;hmmm&gt;]
== ~[]~  ; anti
</code></pre>
<p>There's one <em>bad</em> impliciation... and it's pretty bad indeed, I'm afraid.  If ELSE is to work in this case, we have to make it so that empty packs themselves get packed:</p>
<pre><code>if 1 &lt; 0 [pack []] else [print "Don't want this to print..."]
</code></pre>
<p>The branch can't return an empty antiform pack if that triggers else.  <em>It has to return a pack inside a pack</em>, e.g. unstable antiform ensconced in an unstable antiform.  <img src="../../images/emoji/twitter/frowning.png%3Fv=14" title=":frowning:" class="emoji" alt=":frowning:" loading="lazy" width="20" height="20"></p>
<pre><code>&gt;&gt; if 1 &lt; 0 [pack ~[]~]
== ~[~[]~]~  ; anti
</code></pre>
<p>Such things are <em>legal</em> to construct (they have to be).  But I'm wary of them decaying automatically.  And having them arising in such simple circumstances is a deal breaker:</p>
<pre><code>&gt;&gt; if 1 &lt; 0 [if 1 &gt; 0 [&lt;ack&gt;]]
** Error: Cannot automatically decay ~[~[]~]~  ; antiform
</code></pre>
<p>The alternative would be that we get voids as a THEN-trigger (so only null doesn't trigger THEN, and triggers ELSE) or that they are errors.  I don't think they should be errors, because I believe loops that don't run their body ever should return void... and I want you to be able to write:</p>
<pre><code>while [...] [
   ...
] else [
   ; whatever you want done if there's a BREAK
]
</code></pre>
<p>In the past the handling for a loop that never ran its body was that it would run the ELSE.  But I feel now that shouldn't be the case--ELSE should exclusively mean it encountered a break.</p>
<h2><a name="p-8198-so-its-settled-my-heart-has-to-be-broken-broken_heart-2" class="anchor" href="2419.html#p-8198-so-its-settled-my-heart-has-to-be-broken-broken_heart-2"></a>So It's Settled, My Heart Has To Be Broken <img src="../../images/emoji/twitter/broken_heart.png%3Fv=14" title=":broken_heart:" class="emoji" alt=":broken_heart:" loading="lazy" width="20" height="20"></h2>
<ul>
<li>
<p><strong>Unstable antiform VOID triggers THEN, and not ELSE... like all other PACK!.. emptiness makes no difference.</strong></p>
</li>
<li>
<p><strong>IF returns NULL, like every other branching construct.</strong></p>
</li>
</ul>
<h2><a name="p-8198-what-makes-voids-if-not-if-3" class="anchor" href="2419.html#p-8198-what-makes-voids-if-not-if-3"></a>What Makes Voids If Not IF?</h2>
<p>While I proposed <strong><code>IFF</code></strong> I now realize that is a really bad idea.  It's way too easy to just see an IFF and go tack on an ELSE clause without thinking "hey, I can't use ELSE with that".</p>
<p>So it would have to be a completely different word.  I like <strong>WHEN</strong></p>
<pre><code>&gt;&gt; compose [a (when 1 &gt; 0 ['b]) c]
== [a c]
</code></pre>
<p>A design idea I had here was that this would be distinct from <strong>? IF</strong>, because if you put the OPT on the outside of the construct, then you turn any null into a void... even if it originates from the branch.</p>
<pre><code>&gt;&gt; ? if 1 &gt; 0 [&lt;foo&gt;]
== ~[]~  ; anti

&gt;&gt; ? if 1 &lt; 0 [null]
== ~[]~  ; anti
</code></pre>
<p>But I thought WHEN would be used when you expect the branch to produce a value... and catch cases when it didn't, by letting it produce NULL.  It wouldn't have to box the null... which means you <em>could</em> use WHEN with ELSE, but it would only run the else clause if the branch was taken and produced null...</p>
<p>Is there another word that would convey this property?  <img src="../../images/emoji/twitter/frowning.png%3Fv=14" title=":frowning:" class="emoji" alt=":frowning:" loading="lazy" width="20" height="20"></p>
<pre><code>&gt;&gt; xxx 1 &gt; 0 [print "ran branch null] else [print "ran else"]

&gt;&gt; xxx 1 &gt; 0 [print "ran branch null] then [print "ran then"]
ran then

&gt;&gt; xxx 1 &lt; 0 [print "ran branch" okay] else [print "ran else"]
ran branch

&gt;&gt; xxx 1 &lt; 0 [print "ran branch" null] else [print "ran else"]
ran branch
ran else
</code></pre>
<p><em>That's a pretty weird set of properties to exploit...</em> weird enough that it would be nice if you could actively prevent using it with THEN or ELSE.  But there's only one way to do that, which is to return antiform comma (a "ghost") and act like a comment.  This would work in the specific case of COMPOSE if it was the only thing in the slot, but not if there were any code--even a PRINT statement--before it.</p>
<p>I guess the word WHEN doesn't go with THEN or  ELSE verbally (when ... then) or (when ... else) so maybe that's enough of a clue you shouldn't do it unless you are a weirdo and think you know what you're doing.  <img src="../../images/emoji/twitter/zany_face.png%3Fv=14" title=":zany_face:" class="emoji" alt=":zany_face:" loading="lazy" width="20" height="20"></p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

                <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../ren-cs-eloquence-in-the-face-of-fizzbuzz/904/14.html">Ren-C&#39;s eloquence in the face of FizzBuzz</a>
                        <meta itemprop='position' content='2'>
                      </div>
                </div>
          </div>
          <div id='post_4' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://rebol.metaeducation.com/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2025-07-16T03:50:51Z' class='post-time'>
                    July 16, 2025,  3:50am
                  </time>
                  <meta itemprop='dateModified' content='2025-07-16T03:50:51Z'>
              <span itemprop='position'>4</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Two months downstream of changing IF to return NULL, I'm now bringing the bootstrap code up to date.</p>
<p>It has to run in a world where a non-branch-taking IF does not vaporize in expressions, because it no longer returns VOID.  So the IFs have to be <code>OPT</code>'ed or <code>?</code>'ed or use <code>WHEN</code> instead.</p>
<p>It's a lot fewer changes than I thought, and usually you can write the code other ways to avoid it.  <em>But still, the changes definitely make me sad.</em>  I don't like the IF vs. WHEN distinction, and it wouldn't exist in a perfect world.</p>
<p>So I want to look at this again and ask if this is truly the last word--if there is no other option.</p>
<aside class="quote no-group" data-username="hostilefork" data-post="1" data-topic="2419">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="../../user_avatar/rebol.metaeducation.com/hostilefork/48/421_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p>It's not legal to make <strong><code>f.dup</code></strong> a void, so in this situation we want <code>if null [5]</code> to be null.</p>
</blockquote>
</aside>
<p>It seems now that non-meta assignments of void, e.g. <strong><code>f.dup: void</code></strong> <a href="../should-void-assigns-mean-fully-remove-a-key/2431/3.html">is going to be the way to make the field unset</a>.  That would mean it would do whatever an unspecified refinement would do, e.g. not be taken.</p>
<p>And actually...I'm somewhat torn on whether NULL is what is used in frame building to opt out of refinements (or an <strong><code>&lt;opt&gt;</code></strong> parameter) or not.  This kind of hinges on whether when the frame is built, if the <code>&lt;opt&gt;</code> does the transformation from void to null during fulfillment, or during type checking.  If you literally have to assign parameters to void, then to truly opt-them out (or specialize them out) you would <em>have</em> to use <strong><code>f.^dup: void</code></strong> ... which seems kind of crazy, but, you're asking to drop a refinement off the interface...which you didn't have to do--you could have left it alone and it just wouldn't have been supplied.</p>
<p>Anyway, this is no longer as clear-cut...and in fact, VOID may be necessary.</p>
<aside class="quote no-group" data-username="hostilefork" data-post="3" data-topic="2419">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="../../user_avatar/rebol.metaeducation.com/hostilefork/48/421_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p>There's one <em>bad</em> impliciation... and it's pretty bad indeed, I'm afraid. If ELSE is to work in this case, we have to make it so that empty packs themselves get packed:</p>
<pre data-code-wrap="plaintext"><code class="lang-plaintext">if 1 &lt; 0 [pack []] else [print "Don't want this to print..."]
</code></pre>
<p>The branch can't return an empty antiform pack if that triggers else. <em>It has to return a pack inside a pack</em>, e.g. unstable antiform ensconced in an unstable antiform. <img src="../../images/emoji/twitter/frowning.png%3Fv=14" title=":frowning:" class="emoji" alt=":frowning:" loading="lazy" width="20" height="20"></p>
<pre data-code-wrap="plaintext"><code class="lang-plaintext">&gt;&gt; if 1 &lt; 0 [pack ~[]~]
== ~[~[]~]~  ; anti
</code></pre>
<p>Such things are <em>legal</em> to construct (they have to be). But I'm wary of them decaying automatically.</p>
</blockquote>
</aside>
<p>This is kind of the big deal.</p>
<p><img src="../../images/emoji/twitter/thinking.png%3Fv=14" title=":thinking:" class="emoji only-emoji" alt=":thinking:" loading="lazy" width="20" height="20"></p>
<p>I've been saying you can't unpack unstable antiforms automatically.  But... how bad is this?  What do you expect if you say:</p>
<pre><code>x: if condition1 [if condition2 [...]] else [1020]
</code></pre>
<p>In the case that condition1 is true and condition2 is false, what did you want X to be?  Is the error really that bad?</p>
<p>Not being able to unpack a pack doesn't bother the evaluator if you let the result drop on the floor, just if you try to use it.</p>
<p>But if we made branches pack up voids that refused to decay without explicit unpacking, that rules out things like:</p>
<pre><code> append [a b c] case [
     condition1 [void]  ; note: same as `condition1 []`
     condition2 [1020]
 ]
</code></pre>
<p>When VOID works here, you get the nice property that it will still error by default if none of the branches are taken (due to CASE returning NULL on no branch).  And then the VOID can opt out.</p>
<p>If that packed the branch so it wouldn't decay, you could still write something like:</p>
<pre><code> append [a b c] opt case [
     condition1 [null]
     condition2 [1020]
 ]
</code></pre>
<p>That would box the null, but the OPT would also turn a null from no cases into a void, so you'd not get the natural protection from no cases matching.</p>
<h2><a name="p-8525-looks-like-broken-heart-may-has-to-stay-broken-heart_exclamation-1" class="anchor" href="2419.html#p-8525-looks-like-broken-heart-may-has-to-stay-broken-heart_exclamation-1"></a>Looks like Broken Heart May Has To Stay Broken <img src="../../images/emoji/twitter/heart_exclamation.png%3Fv=14" title=":heart_exclamation:" class="emoji" alt=":heart_exclamation:" loading="lazy" width="20" height="20"></h2>
<p>This comes down to a contention between "IF being able to return void for no branch" vs. "branches being able to return void".</p>
<p>For THEN and ELSE to react to VOID without reacting to a branch that produces void, you wind up boxing an unstable pack in an unstable pack.  Making such an antiform on a casual basis is just not something viable to do.</p>
<p>So as much as I may not like the IF vs. WHEN distinction, it's just one of those things.  If you don't like it, there's <strong>opt if</strong> and <strong>? if</strong>, though they're not precise synonyms for WHEN, since they return void should the IF run a branch and evaluate the branch to null.</p>
<p>And you've still got the historical Redbol-style answer, of:</p>
<pre><code>either condition [...] []
</code></pre>
<p><strong>It's a pain point, but it just looks like the pain of making ELSE reactive to VOID when it's an unstable antiform creates much more pain.</strong>  Being able to say ELSE just reacts to "light" NULL--the only falsey value--solidifies the system in other ways.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
    </div>


    




    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/guidelines' itemprop="url">Guidelines </a>
        </span>
      </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://rebol.metaeducation.com/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://rebol.metaeducation.com/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    
  </body>
  
</html>
