<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Making position argument explicit in COMBINATOR - Parsing - AltRebol</title>
    <meta name="description" content="Today&amp;#39;s COMBINATOR implicitly gives you an argument called INPUT: 
tally: combinator [
    &amp;quot;Iterate a rule and count the number of times it matches&amp;quot;
    return: &amp;quot;Number of matches (can be 0)&amp;quot;
        [integer!]
    parse&amp;hellip;">
    <meta name="generator" content="Discourse 3.5.0.beta6-dev - https://github.com/discourse/discourse version 623cde985b21c2ed812b83d3ea94f69231613718">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" media="all" content="#fff">

<meta name="color-scheme" content="light">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, viewport-fit=cover">
<link rel="canonical" href="2445.html" />

<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="AltRebol Search">

    <link href="https://rebol.metaeducation.com/stylesheets/color_definitions_base__2_ceb61c279a74dfa3cef6a62f7784988102abec82.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" class="light-scheme"/>

<link href="https://rebol.metaeducation.com/stylesheets/common_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="common"  />

  <link href="https://rebol.metaeducation.com/stylesheets/desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="desktop"  />



    <link href="https://rebol.metaeducation.com/stylesheets/chat_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="chat"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-details_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-details"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-lazy-videos_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-local-dates_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-narrative-bot_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-presence_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-presence"  />
    <link href="https://rebol.metaeducation.com/stylesheets/docker_manager_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="docker_manager"  />
    <link href="https://rebol.metaeducation.com/stylesheets/footnote_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="footnote"  />
    <link href="https://rebol.metaeducation.com/stylesheets/poll_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="poll"  />
    <link href="https://rebol.metaeducation.com/stylesheets/spoiler-alert_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="spoiler-alert"  />
    <link href="https://rebol.metaeducation.com/stylesheets/chat_desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="chat_desktop"  />
    <link href="https://rebol.metaeducation.com/stylesheets/poll_desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="https://rebol.metaeducation.com/stylesheets/common_theme_2_57fe803ed5a41e9f7d94086afaf66a1aab57d9ae.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="common_theme" data-theme-id="2" data-theme-name="default"/>
    

    
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;Making position argument explicit in COMBINATOR&#39;" href="2445.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://rebol.metaeducation.com/t/making-position-argument-explicit-in-combinator/2445" />
<meta name="twitter:url" content="https://rebol.metaeducation.com/t/making-position-argument-explicit-in-combinator/2445" />
<meta property="og:title" content="Making position argument explicit in COMBINATOR" />
<meta name="twitter:title" content="Making position argument explicit in COMBINATOR" />
<meta property="og:description" content="Today&#39;s COMBINATOR implicitly gives you an argument called INPUT:  tally: combinator [     &quot;Iterate a rule and count the number of times it matches&quot;     return: &quot;Number of matches (can be 0)&quot;         [integer!]     parser [action!] ][     let count: 0     cycle [         [^ input]: parser input except [  ; INPUT not mentioned on interface             remainder: input             return count         ]         count: count + 1     ] ]  You only have to specify the number of parsers (or non-combin..." />
<meta name="twitter:description" content="Today&#39;s COMBINATOR implicitly gives you an argument called INPUT:  tally: combinator [     &quot;Iterate a rule and count the number of times it matches&quot;     return: &quot;Number of matches (can be 0)&quot;         [integer!]     parser [action!] ][     let count: 0     cycle [         [^ input]: parser input except [  ; INPUT not mentioned on interface             remainder: input             return count         ]         count: count + 1     ] ]  You only have to specify the number of parsers (or non-combin..." />
<meta property="og:article:section" content="Domains" />
<meta property="og:article:section:color" content="F1592A" />
<meta property="og:article:section" content="Parsing" />
<meta property="og:article:section:color" content="F1592A" />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="1 ❤" />
<meta property="article:published_time" content="2025-05-11T16:01:18+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler ">
    
    <header>
  <a href="https://rebol.metaeducation.com/">AltRebol</a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="2445.html">Making position argument explicit in COMBINATOR</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://rebol.metaeducation.com/c/domains/parsing/16" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #F1592A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Domains</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://rebol.metaeducation.com/c/domains/parsing/16" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #F1592A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Parsing</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  

    <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='Making position argument explicit in COMBINATOR'>
      <link itemprop='url' href='2445.html'>
      <meta itemprop='datePublished' content='2025-05-11T16:01:18Z'>
        <meta itemprop='articleSection' content='Parsing'>
      <meta itemprop='keywords' content=''>
      <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
        <meta itemprop='name' content='AltRebol'>
          <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
            <meta itemprop='url' content='https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
          </div>
      </div>


          <div id='post_1'  class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://rebol.metaeducation.com/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>

                <link itemprop="mainEntityOfPage" href="2445.html">


              <span class="crawler-post-infos">
                  <time  datetime='2025-05-11T16:01:18Z' class='post-time'>
                    May 11, 2025,  4:01pm
                  </time>
                  <meta itemprop='dateModified' content='2025-07-13T00:08:47Z'>
              <span itemprop='position'>1</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Today's COMBINATOR implicitly gives you an argument called INPUT:</p>
<pre><code>tally: combinator [
    "Iterate a rule and count the number of times it matches"
    return: "Number of matches (can be 0)"
        [integer!]
    parser [action!]
][
    let count: 0
    cycle [
        [^ input]: parser input except [  ; INPUT not mentioned on interface
            remainder: input
            return count
        ]
        count: count + 1
    ]
]
</code></pre>
<p>You only have to specify the number of parsers (or non-combinated literal arguments) you take.</p>
<p>I observed an inconsistency, that the <strong><code>&lt;input&gt;</code></strong> combinator returns the input to the overall parse operation at its original position... not the current position.</p>
<p>Then I thought "hm, I don't know whether to change the argument to be called POSITION or POS.</p>
<h2><a name="p-8258-but-why-was-the-argument-implicit-to-begin-with-1" class="anchor" href="2445.html#p-8258-but-why-was-the-argument-implicit-to-begin-with-1"></a>But Why Was The Argument Implicit To Begin With?</h2>
<p>Making it explicit is clearer, and lets you pick your own name for it:</p>
<pre><code>tally: combinator [
    "Iterate a rule and count the number of times it matches"
    return: "Number of matches (can be 0)"
        [integer!]
    pos [any-series?]  ; Maybe I like POS better than POSITION for arg 1
    parser [action!]
][
    let count: 0
    cycle [
        [^ pos]: parser pos except [
            remainder: pos
            return count
        ]
        count: count + 1
    ]
]
</code></pre>
<p>This also means that if your combinator is only applicable to specific series types (e.g. just lists, or just strings) then you can say that, and have type checking take care of it vs. having to put the check in the body of your combinator.</p>
<h2><a name="p-8258-should-remainder-be-explicit-too-2" class="anchor" href="2445.html#p-8258-should-remainder-be-explicit-too-2"></a>Should REMAINDER Be Explicit Too?</h2>
<p>REMAINDER is an implicitly declared return value, that the combinator wrapping code will package up in a PACK! with whatever you RETURN as the main synthesized value.  <strong><a href="../uparse-combinator-return-conventions-reviewed/2337.html">I've defended the choice to do it this way</a>.</strong></p>
<p>But for clarity, should combinators have some mention of REMAINDER in the interface?  Even something like an <code>&lt;assigns&gt;</code> TAG! in the spec?</p>
<pre><code>tally: combinator [
    "Iterate a rule and count the number of times it matches"
    return: "Number of matches (can be 0)"
        [integer!]
    pos [any-series?]
    parser [action!]
    &lt;assigns&gt; remainder
] ...
</code></pre>
<p>That could actually have some value, in that if you don't say it then you're implicitly saying your parser doesn't move the parse position... <em>and it could automatically assume the remainder is the input position for you.</em>  <img src="../../images/emoji/twitter/smiley.png%3Fv=14" title=":smiley:" class="emoji" alt=":smiley:" loading="lazy" width="20" height="20">  Then there could be no binding for remander, so you'd get an error if you did try to assign it.</p>
<p>Good mojo.  I like it.</p>
<p>I don't think being able to rename remainder is that important, but it could be <strong><code>&lt;remainder&gt; rem</code></strong> or something like that, where you could.</p>
<p>But I think <strong><code>&lt;assigns&gt; remainder</code></strong> has more information in it.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
          <div id='post_2' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://rebol.metaeducation.com/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2025-07-13T00:01:54Z' class='post-time'>
                    July 13, 2025, 12:01am
                  </time>
                  <meta itemprop='dateModified' content='2025-07-13T02:47:19Z'>
              <span itemprop='position'>2</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <aside class="quote no-group" data-username="hostilefork" data-post="1" data-topic="2445">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="../../user_avatar/rebol.metaeducation.com/hostilefork/48/421_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p>But for clarity, should combinators have some mention of REMAINDER in the interface? Even something like an <code>&lt;assigns&gt;</code> TAG! in the spec?</p>
</blockquote>
</aside>
<p>In actuality... given the way COMBINATOR is designed, it could just package up whatever you named as your input parameter as part of the multi-return output.  Thus, whatever it was set to at the end of the operation would be the remainder!</p>
<pre data-code-wrap="plaintext"><code class="lang-plaintext">tally: combinator [
    "Iterate a rule and count the number of times it matches"
    return: "Number of matches (can be 0)"
        [integer!]
    pos [any-series?]
    parser [action!]
][
    let count: 0
    cycle [
        [^ pos]: parser pos except [
            ; remainder: pos  ; &lt;-- instead, presume updated POS is remainder
            return count  ; return is hooked, acts like `pack [count pos ...]`
        ]
        count: count + 1
    ]
]
</code></pre>
<p><strong>I like it!</strong>  Auto-proxying an input into an expanded multi-return of the output is a bizarre mechanic for accomplishing something like pass-by-reference.  But looks like a good fit...</p>
<p>COMBINATOR continues to zero in on essential complexity of what it does!</p>
<aside class="quote no-group" data-username="hostilefork" data-post="1" data-topic="2445">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="../../user_avatar/rebol.metaeducation.com/hostilefork/48/421_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p>That could actually have some value, in that if you don't say it then you're implicitly saying your parser doesn't move the parse position... <em>and it could automatically assume the remainder is the input position for you.</em></p>
</blockquote>
</aside>
<p>In the alternative conception, if you just don't change the input, then it would assume the position stayed the same.  Clean and simple.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="1" />
              <span class='post-likes'>1 Like</span>
            </div>

          </div>
    </div>


    




    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/guidelines' itemprop="url">Guidelines </a>
        </span>
      </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://rebol.metaeducation.com/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://rebol.metaeducation.com/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    
  </body>
  
</html>
