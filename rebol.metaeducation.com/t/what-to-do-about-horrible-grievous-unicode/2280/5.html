<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>What To Do About Horrible, Grievous, Unicode - #5 by hostilefork - Philosophy - AltRebol</title>
    <meta name="description" content="At some point I picked up a test from Red, which is basically this: 
str: &amp;quot; ^(A0) ^-a b  ^- c  ^(2000) &amp;quot;
assert [&amp;quot;a b  ^- c&amp;quot; = trim copy str]

That&amp;#39;s some funny business. 


The hex character ^(a0) is decimal 160, which &amp;hellip;">
    <meta name="generator" content="Discourse 3.5.0.beta6-dev - https://github.com/discourse/discourse version 623cde985b21c2ed812b83d3ea94f69231613718">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" media="all" content="#fff">

<meta name="color-scheme" content="light">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, viewport-fit=cover">
<link rel="canonical" href="../2280.html" />

<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="AltRebol Search">

    <link href="https://rebol.metaeducation.com/stylesheets/color_definitions_base__2_ceb61c279a74dfa3cef6a62f7784988102abec82.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" class="light-scheme"/>

<link href="https://rebol.metaeducation.com/stylesheets/common_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="common"  />

  <link href="https://rebol.metaeducation.com/stylesheets/desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="desktop"  />



    <link href="https://rebol.metaeducation.com/stylesheets/chat_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="chat"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-details_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-details"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-lazy-videos_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-local-dates_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-narrative-bot_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-presence_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-presence"  />
    <link href="https://rebol.metaeducation.com/stylesheets/docker_manager_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="docker_manager"  />
    <link href="https://rebol.metaeducation.com/stylesheets/footnote_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="footnote"  />
    <link href="https://rebol.metaeducation.com/stylesheets/poll_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="poll"  />
    <link href="https://rebol.metaeducation.com/stylesheets/spoiler-alert_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="spoiler-alert"  />
    <link href="https://rebol.metaeducation.com/stylesheets/chat_desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="chat_desktop"  />
    <link href="https://rebol.metaeducation.com/stylesheets/poll_desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="https://rebol.metaeducation.com/stylesheets/common_theme_2_57fe803ed5a41e9f7d94086afaf66a1aab57d9ae.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="common_theme" data-theme-id="2" data-theme-name="default"/>
    

    
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;What To Do About Horrible, Grievous, Unicode&#39;" href="../2280.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://rebol.metaeducation.com/t/what-to-do-about-horrible-grievous-unicode/2280/5" />
<meta name="twitter:url" content="https://rebol.metaeducation.com/t/what-to-do-about-horrible-grievous-unicode/2280/5" />
<meta property="og:title" content="What To Do About Horrible, Grievous, Unicode" />
<meta name="twitter:title" content="What To Do About Horrible, Grievous, Unicode" />
<meta property="og:description" content="Yes, I think this is the unusual domain showing. In my kinds of programs, by contrast, I very regularly have to deal with multilingual text and ‘unusual’ (to English-speakers) Unicode characters. I’d say my situation is probably more representative of the more common use-cases.    At least on the encoding side of UTF-8, I have an answer for stopping the propagation of weird bytes if you want, that&#39;s now pretty palatable...  I was fretting over how TO of BINARY! doing UTF-8 encoding wasn&#39;t reall..." />
<meta name="twitter:description" content="Yes, I think this is the unusual domain showing. In my kinds of programs, by contrast, I very regularly have to deal with multilingual text and ‘unusual’ (to English-speakers) Unicode characters. I’d say my situation is probably more representative of the more common use-cases.    At least on the encoding side of UTF-8, I have an answer for stopping the propagation of weird bytes if you want, that&#39;s now pretty palatable...  I was fretting over how TO of BINARY! doing UTF-8 encoding wasn&#39;t reall..." />
<meta property="og:article:section" content="Usage" />
<meta property="og:article:section:color" content="3AB54A" />
<meta property="og:article:section" content="Philosophy" />
<meta property="og:article:section:color" content="3AB54A" />
<meta property="article:published_time" content="2025-03-18T23:27:27+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler ">
    
    <header>
  <a href="https://rebol.metaeducation.com/">AltRebol</a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="../2280.html">What To Do About Horrible, Grievous, Unicode</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://rebol.metaeducation.com/c/usage/philosophy/31" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #3AB54A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Usage</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://rebol.metaeducation.com/c/usage/philosophy/31" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #3AB54A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Philosophy</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  

    <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='What To Do About Horrible, Grievous, Unicode'>
      <link itemprop='url' href='../2280.html'>
      <meta itemprop='datePublished' content='2024-09-15T13:38:04Z'>
        <meta itemprop='articleSection' content='Philosophy'>
      <meta itemprop='keywords' content=''>
      <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
        <meta itemprop='name' content='AltRebol'>
          <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
            <meta itemprop='url' content='https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
          </div>
      </div>

          <span itemprop='author' itemscope itemtype="http://schema.org/Person">
            <meta itemprop='name' content='hostilefork'>
            <link itemprop='url' rel='nofollow' href='https://rebol.metaeducation.com/u/hostilefork'>
          </span>
        <meta itemprop='text' content='At some point I picked up a test from Red, which is basically this: 
str: &amp;quot; ^(A0) ^-a b  ^- c  ^(2000) &amp;quot;
assert [&amp;quot;a b  ^- c&amp;quot; = trim copy str]

That&amp;#39;s some funny business. 


The hex character ^(a0) is decimal 160, which &amp;hellip;'>

          <div id='post_5' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://rebol.metaeducation.com/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2025-03-18T23:27:27Z' class='post-time'>
                    March 18, 2025, 11:27pm
                  </time>
                  <meta itemprop='dateModified' content='2025-03-19T00:21:19Z'>
              <span itemprop='position'>5</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <aside class="quote no-group quote-modified" data-username="bradrn" data-post="4" data-topic="2280">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="../../../user_avatar/rebol.metaeducation.com/bradrn/48/365_2.png" class="avatar"> bradrn:</div>
<blockquote>
<aside class="quote no-group" data-username="hostilefork" data-post="3" data-topic="2280">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="../../../user_avatar/rebol.metaeducation.com/hostilefork/48/421_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p>Maybe I'm unusual--in that I work on an interpreter, so most "usermode" strings I work with wind up being source code at some point. If I worked on other kinds of programs that had to pass-through arbitrary freeform HTML or emoji-laden SMS messages all the time, I might have a different bias.</p>
</blockquote>
</aside>
<p>Yes, I think this is the unusual domain showing. In my kinds of programs, by contrast, I very regularly have to deal with multilingual text and ‘unusual’ (to English-speakers) Unicode characters. I’d say my situation is probably more representative of the more common use-cases.</p>
</blockquote>
</aside>
<p>At least on the <em>encoding</em> side of UTF-8, I have an answer for stopping the propagation of weird bytes if you want, that's now pretty palatable...</p>
<p>I was fretting over how TO of BINARY! doing UTF-8 encoding wasn't really fitting nicely with my idea of it, and so I preferred to go ahead with a more explicit parameterization to ENCODE:</p>
<pre><code>&gt;&gt; encode 'utf8 -{C😺T}-
== #{43F09F98BA54}
</code></pre>
<p>It's not that much longer than <strong>to binary!</strong>, just two characters:</p>
<pre><code>to binary!
encode 'utf8
</code></pre>
<p>But you get a lot more information.  However, if you have these personal settings, it gets a little bit messier, let's say like:</p>
<pre><code>&gt;&gt; encode [utf8 emoji: no] -{C😺T}-
** Error: Emoji disabled in UTF-8 Codec configuration
</code></pre>
<p>That's a lot to type so you're liable to need to invent a name for it, which puts some burden on you.  But <strong>utf8-of</strong> isn't a terrible name for you to call your specialization:</p>
<pre><code>/utf8-of: specialize encode?/ [codec: [utf8 emoji: no]]
</code></pre>
<p>This would override the default configuration, we'll assume UTF8-OF is in LIB is defined as some sane default.</p>
<p>It's still a little bit ugly due to the hyphen, BUT, pursuant to the newfound <strong><a href="../../squaring-the-circle-of-length-and-length-of/385/8.html">binding-based configurability of infix OF</a></strong>, you can call the relevant local definition for your environment with no space!  And still not lose your variable names!</p>
<pre><code>&gt;&gt; utf8: utf8 of -{C😺T}-
== #{43F09F98BA54}

&gt;&gt; utf8
== #{43F09F98BA54}
</code></pre>
<p>And maybe the default UTF8-OF offers some refinements to swap up the settings, that OF can migrate onto the call:</p>
<pre><code>&gt;&gt; utf8: utf8:basic of -{C😺T}-
** Error: Codepoints of ENCODE UTF-8 with Basic setting Must Be &lt; 65535
</code></pre>
<p>So things like UTF8:PRINTABLE could be options of the stock UTF8-OF, and you could just say in your file:</p>
<pre><code>/utf8-of: utf8-of:printable/
</code></pre>
<p>Then all your <strong>utf8 of</strong> would be protected, in the scope of that file (or if you imported your standard configuration library, in all the files that use your personal configuration... I expect everyone to have such files... the goal here is to <em>bend the language to you</em>, not to bend yourself to the language...)</p>
<p><img src="../../../images/emoji/twitter/magic_wand.png%3Fv=14" title=":magic_wand:" class="emoji only-emoji" alt=":magic_wand:" loading="lazy" width="20" height="20"></p>
<p>This strategy, of having strong routines like ENCODE or CHECKSUM, which can be parameterized and specialized, ultimately being able to "hook" things like OF, is looking like it's going to be able to hit the target of the kind of flow we are seeking.</p>
<p>So if you want the exact bytes, you can always use AS BINARY!, which just aliases the memory as a binary blob directly.  Anything else is making a copy, and while memcpy() would be fastest a little bit of filtering isn't going to be a problem.</p>
<h2><a name="p-8047-what-about-the-decoding-side-1" class="anchor" href="5.html#p-8047-what-about-the-decoding-side-1"></a>What About the Decoding Side?</h2>
<p>That... I dunno yet.</p>
<p>So there's <strong><code>decode 'utf8</code></strong> With the corresponding options like <strong><code>decode [utf8 emoji: no]</code></strong> or whatever.  More thinking is needed on how READ and LOAD and other such operations get configured.</p>
<p>But at least I think the encoding side looks good.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="2" />
              <span class='post-likes'>2 Likes</span>
            </div>

          </div>
    </div>

      <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
          <span itemprop='name'>
            <a itemprop="url" href="../2280.html#post_5">show post in topic</a>
          </span>
      </div>

    




    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/guidelines' itemprop="url">Guidelines </a>
        </span>
      </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://rebol.metaeducation.com/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://rebol.metaeducation.com/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    
  </body>
  
</html>
