<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Looks Like FILE! Immutability Is A Good Idea - Datatypes - AltRebol</title>
    <meta name="description" content="Since changing URL! to be immutable, we&amp;#39;ve realized several benefits.  Notably that you can&amp;#39;t produce things that don&amp;#39;t validate as URL! that are still claiming to be of type URL!: 
red&amp;gt;&amp;gt; url: https://red-lang.org
== htt&amp;hellip;">
    <meta name="generator" content="Discourse 3.5.0.beta6-dev - https://github.com/discourse/discourse version 623cde985b21c2ed812b83d3ea94f69231613718">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" media="all" content="#fff">

<meta name="color-scheme" content="light">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, viewport-fit=cover">
<link rel="canonical" href="2388.html" />

<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="AltRebol Search">

    <link href="https://rebol.metaeducation.com/stylesheets/color_definitions_base__2_ceb61c279a74dfa3cef6a62f7784988102abec82.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" class="light-scheme"/>

<link href="https://rebol.metaeducation.com/stylesheets/common_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="common"  />

  <link href="https://rebol.metaeducation.com/stylesheets/desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="desktop"  />



    <link href="https://rebol.metaeducation.com/stylesheets/chat_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="chat"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-details_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-details"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-lazy-videos_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-local-dates_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-narrative-bot_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-presence_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-presence"  />
    <link href="https://rebol.metaeducation.com/stylesheets/docker_manager_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="docker_manager"  />
    <link href="https://rebol.metaeducation.com/stylesheets/footnote_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="footnote"  />
    <link href="https://rebol.metaeducation.com/stylesheets/poll_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="poll"  />
    <link href="https://rebol.metaeducation.com/stylesheets/spoiler-alert_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="spoiler-alert"  />
    <link href="https://rebol.metaeducation.com/stylesheets/chat_desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="chat_desktop"  />
    <link href="https://rebol.metaeducation.com/stylesheets/poll_desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="https://rebol.metaeducation.com/stylesheets/common_theme_2_57fe803ed5a41e9f7d94086afaf66a1aab57d9ae.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="common_theme" data-theme-id="2" data-theme-name="default"/>
    

    
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;Looks Like FILE! Immutability Is A Good Idea&#39;" href="2388.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://rebol.metaeducation.com/t/looks-like-file-immutability-is-a-good-idea/2388" />
<meta name="twitter:url" content="https://rebol.metaeducation.com/t/looks-like-file-immutability-is-a-good-idea/2388" />
<meta property="og:title" content="Looks Like FILE! Immutability Is A Good Idea" />
<meta name="twitter:title" content="Looks Like FILE! Immutability Is A Good Idea" />
<meta property="og:description" content="Since changing URL! to be immutable, we&#39;ve realized several benefits.  Notably that you can&#39;t produce things that don&#39;t validate as URL! that are still claiming to be of type URL!:  red&gt;&gt; url: https://red-lang.org == http://red-lang.org  red&gt;&gt; reverse url == gro.gnal-der//:sptth  sptth! indeed, I say. 🤮  ren-c&gt;&gt; url: http://hostilefork.com == http://hostilefork.com  ren-c&gt;&gt; reverse url ** Script Error: reverse expects [~void~ any-series? any-sequence? pair!]   But besides that we g..." />
<meta name="twitter:description" content="Since changing URL! to be immutable, we&#39;ve realized several benefits.  Notably that you can&#39;t produce things that don&#39;t validate as URL! that are still claiming to be of type URL!:  red&gt;&gt; url: https://red-lang.org == http://red-lang.org  red&gt;&gt; reverse url == gro.gnal-der//:sptth  sptth! indeed, I say. 🤮  ren-c&gt;&gt; url: http://hostilefork.com == http://hostilefork.com  ren-c&gt;&gt; reverse url ** Script Error: reverse expects [~void~ any-series? any-sequence? pair!]   But besides that we g..." />
<meta property="og:article:section" content="Development" />
<meta property="og:article:section:color" content="25AAE2" />
<meta property="og:article:section" content="Datatypes" />
<meta property="og:article:section:color" content="25AAE2" />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="2 ❤" />
<meta property="article:published_time" content="2025-03-28T17:18:06+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler ">
    
    <header>
  <a href="https://rebol.metaeducation.com/">AltRebol</a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="2388.html">Looks Like FILE! Immutability Is A Good Idea</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://rebol.metaeducation.com/c/development/datatypes/45" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://rebol.metaeducation.com/c/development/datatypes/45" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Datatypes</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  

    <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='Looks Like FILE! Immutability Is A Good Idea'>
      <link itemprop='url' href='2388.html'>
      <meta itemprop='datePublished' content='2025-03-28T17:18:06Z'>
        <meta itemprop='articleSection' content='Datatypes'>
      <meta itemprop='keywords' content=''>
      <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
        <meta itemprop='name' content='AltRebol'>
          <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
            <meta itemprop='url' content='https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
          </div>
      </div>


          <div id='post_1'  class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://rebol.metaeducation.com/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>

                <link itemprop="mainEntityOfPage" href="2388.html">


              <span class="crawler-post-infos">
                  <time  datetime='2025-03-28T17:18:06Z' class='post-time'>
                    March 28, 2025,  5:18pm
                  </time>
                  <meta itemprop='dateModified' content='2025-03-28T17:21:34Z'>
              <span itemprop='position'>1</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Since changing URL! to be immutable, we've realized several benefits.  Notably that you can't produce things that don't validate as URL! that are still claiming to be of type URL!:</p>
<pre><code>red&gt;&gt; url: https://red-lang.org
== http://red-lang.org

red&gt;&gt; reverse url
== gro.gnal-der//:sptth
</code></pre>
<p><strong>sptth! indeed, I say.</strong> <img src="../../images/emoji/twitter/face_vomiting.png%3Fv=14" title=":face_vomiting:" class="emoji" alt=":face_vomiting:" loading="lazy" width="20" height="20"></p>
<pre><code>ren-c&gt;&gt; url: http://hostilefork.com
== http://hostilefork.com

ren-c&gt;&gt; reverse url
** Script Error: reverse expects [~void~ any-series? any-sequence? pair!] 
</code></pre>
<p>But besides that we get another advantage: we don't have to be paranoid about  URL! changing out from under us.</p>
<p>So for instance, when you LOAD some code from a URL! then we poke the address of that URL's data into all the blocks that get loaded.  This way you can ask for the FILE OF and get that URL! back.</p>
<p><em>(As it gives a URL! sometimes and not a FILE!, that makes me wonder if we should call that SOURCE OF, and find another way to ask for <em>source code</em>... like IMPLEMENTATION OF).</em></p>
<p>In any case, since we know the URL! can't change out from under us, we don't have to worry about storing the pointer that was passed to TRANSCODE by LOAD directly.  If we did have to worry, we'd need to make a copy of it.</p>
<p>But with mutable FILE! <strong>we do have to worry</strong>, and copy it.  Otherwise:</p>
<pre><code>&gt;&gt; file: %my-awesome-script.r

&gt;&gt; code: transcode:file (read file) file
== [reverse [my script is awesome]]

&gt;&gt; file of code.1
** Error: Only ANY-LIST? encode the file they were loaded from

&gt;&gt; file of code.2
== %my-awesome-script.r

&gt;&gt; replace file "awesome" "dumb"
== %my-dumb-script.r

&gt;&gt; file of code.2
== %my-dumb-script.r  ; ...but we loaded it from %my-awesome-script.r !
</code></pre>
<h2><a name="p-8091-immutable-file-means-we-could-kill-empty-file-1" class="anchor" href="2388.html#p-8091-immutable-file-means-we-could-kill-empty-file-1"></a>Immutable FILE! means we could kill empty FILE!</h2>
<p>Empty FILE! doesn't make sense.</p>
<ul>
<li>
<p>Did you want something that would cause an error when you appended it somewhere?  Use NULL.</p>
</li>
<li>
<p>Did you want something that would be a no-op when you appended it somewhere?  Use VOID.</p>
</li>
</ul>
<p>All the AI say roughly this:</p>
<blockquote>
<p>There are no known filesystems that allow the empty string (<code>""</code>) as a valid filename. Most modern filesystems, including ext4, NTFS, FAT variants, and others, explicitly disallow the empty string as a filename. This restriction is consistent with POSIX standards, which define filenames as non-empty character strings</p>
<p>Historically, some older UNIX systems might have treated an empty string as an alias for the current directory, but this behavior was likely unintended and is no longer supported in contemporary systems</p>
</blockquote>
<p>If we could get rid of empty FILE!, that gives us one more leg up in terms of the datatype providing actual value vs. just being a weak alias for string.</p>
<h2><a name="p-8091-interpolation-is-stronger-than-mutable-manipulation-2" class="anchor" href="2388.html#p-8091-interpolation-is-stronger-than-mutable-manipulation-2"></a>Interpolation Is Stronger Than Mutable Manipulation</h2>
<p>Now that we have interpolation, I think it can replace a lot of cases where you might have thought you needed to manipulate a file directly.</p>
<p>Also, the -OF functions will let you do things to immutable types:</p>
<pre><code>&gt;&gt; replace of %my-dumb-script.r "dumb" "awesome"
== %my-awesome-script.r
</code></pre>
<p>I think this also points out a missing ability for PARSE, namely PARSE OF for immutable types.  e.g.:</p>
<pre><code> parse-of tuple rule
 =&gt;
 as tuple! parse to block! tuple rule
</code></pre>
<p>So for instance:</p>
<pre><code> &gt;&gt; parse of 'a.a.a.b.c.d [remove some 'a ~accept~]
 == b.c.d
</code></pre>
<p>Best of both worlds!</p>
<h2><a name="p-8091-retaking-as-a-word-3" class="anchor" href="2388.html#p-8091-retaking-as-a-word-3"></a>Retaking % As A WORD!</h2>
<p>With no empty files, we can say that % is clearly a WORD!</p>
<p>Maybe some other things too.  %% could be a WORD!, or a file with the name "%".  There's lots of edge cases on that, e.g. to make a file with the name <strong><code>"</code></strong> you'd have to say <code>%-{"}-</code>.  So I don't think we should be afraid to make %% a WORD! if that provides another interesting symbol.</p>
<h2><a name="p-8091-this-seems-like-a-good-direction-4" class="anchor" href="2388.html#p-8091-this-seems-like-a-good-direction-4"></a>This Seems Like A Good Direction</h2>
<p>I've had the thought before, but recent improvements to OF makes it more palatable.</p>
<p>What motivated me to think about this right now was that I was resurrecting the LIBRARY! codebase, where you can load a DLL:</p>
<pre><code>&gt;&gt; make library! %some-thing.dll
== #[library!]
</code></pre>
<p>I was thinking "Hm, it seems like it would be nice if it stored the filename".</p>
<pre><code>&gt;&gt; make library! %some-thing.dll
== #[library! %some-thing.dll]
</code></pre>
<p>And I was going to poke the FILE! value into a Cell in the LIBRARY!'s Stub.  But then I thought "oh no, what if they change it."</p>
<p>They shouldn't be able to.  Immutable FILE! is just better all around for the system.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="2" />
              <span class='post-likes'>2 Likes</span>
            </div>

          </div>
    </div>


    




    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/guidelines' itemprop="url">Guidelines </a>
        </span>
      </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://rebol.metaeducation.com/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://rebol.metaeducation.com/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    
  </body>
  
</html>
