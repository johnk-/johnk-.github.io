<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>The Simple-yet-Powerful Magic of The Loop Result Protocol - #11 by hostilefork - Loops - AltRebol</title>
    <meta name="description" content="Loops return null if-and-only-if they break
One very good reason this rule exists is to make it easy to build custom loop constructs out of several other loop constructs.  You can tell &amp;quot;from the outside&amp;quot; whether one of y&amp;hellip;">
    <meta name="generator" content="Discourse 3.5.0.beta6-dev - https://github.com/discourse/discourse version 623cde985b21c2ed812b83d3ea94f69231613718">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" media="all" content="#fff">

<meta name="color-scheme" content="light">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, viewport-fit=cover">
<link rel="canonical" href="../609.html" />

<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="AltRebol Search">

    <link href="https://rebol.metaeducation.com/stylesheets/color_definitions_base__2_ceb61c279a74dfa3cef6a62f7784988102abec82.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" class="light-scheme"/>

<link href="https://rebol.metaeducation.com/stylesheets/common_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="common"  />

  <link href="https://rebol.metaeducation.com/stylesheets/desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="desktop"  />



    <link href="https://rebol.metaeducation.com/stylesheets/chat_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="chat"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-details_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-details"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-lazy-videos_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-local-dates_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-narrative-bot_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-presence_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-presence"  />
    <link href="https://rebol.metaeducation.com/stylesheets/docker_manager_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="docker_manager"  />
    <link href="https://rebol.metaeducation.com/stylesheets/footnote_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="footnote"  />
    <link href="https://rebol.metaeducation.com/stylesheets/poll_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="poll"  />
    <link href="https://rebol.metaeducation.com/stylesheets/spoiler-alert_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="spoiler-alert"  />
    <link href="https://rebol.metaeducation.com/stylesheets/chat_desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="chat_desktop"  />
    <link href="https://rebol.metaeducation.com/stylesheets/poll_desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="https://rebol.metaeducation.com/stylesheets/common_theme_2_57fe803ed5a41e9f7d94086afaf66a1aab57d9ae.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="common_theme" data-theme-id="2" data-theme-name="default"/>
    

    
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;The Simple-yet-Powerful Magic of The Loop Result Protocol&#39;" href="../609.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://rebol.metaeducation.com/t/the-simple-yet-powerful-magic-of-the-loop-result-protocol/609/11" />
<meta name="twitter:url" content="https://rebol.metaeducation.com/t/the-simple-yet-powerful-magic-of-the-loop-result-protocol/609/11" />
<meta property="og:title" content="The Simple-yet-Powerful Magic of The Loop Result Protocol" />
<meta name="twitter:title" content="The Simple-yet-Powerful Magic of The Loop Result Protocol" />
<meta property="og:description" content="I was pondering the edge case of getting two voids into the FOR-PARALLEL example, and what it would return given the particular choice of how it was implemented:   That meant it would return whatever WHILE returned when it never ran its body, which was VOID.  Currently that is distinct from what WHILE returns when its condition is void...which is NULL, according to VOID-in-NULL-out.  But is that right?  Let&#39;s revisit the question of what a void input should do for loops:  &gt;&gt; condition: null  &gt;&gt; ..." />
<meta name="twitter:description" content="I was pondering the edge case of getting two voids into the FOR-PARALLEL example, and what it would return given the particular choice of how it was implemented:   That meant it would return whatever WHILE returned when it never ran its body, which was VOID.  Currently that is distinct from what WHILE returns when its condition is void...which is NULL, according to VOID-in-NULL-out.  But is that right?  Let&#39;s revisit the question of what a void input should do for loops:  &gt;&gt; condition: null  &gt;&gt; ..." />
<meta property="og:article:section" content="Development" />
<meta property="og:article:section:color" content="25AAE2" />
<meta property="og:article:section" content="Loops" />
<meta property="og:article:section:color" content="25AAE2" />
<meta property="og:article:tag" content="best-of" />
<meta property="article:published_time" content="2024-09-10T14:49:45+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler ">
    
    <header>
  <a href="https://rebol.metaeducation.com/">AltRebol</a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="../609.html">The Simple-yet-Powerful Magic of The Loop Result Protocol</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://rebol.metaeducation.com/c/development/loops/65" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://rebol.metaeducation.com/c/development/loops/65" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Loops</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

      <div class="topic-category">
        <div class='discourse-tags list-tags'>
            <a href='../../../tag/best-of.html' class='discourse-tag' rel="tag">best-of</a>
        </div>
      </div>
  </div>

  

    <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='The Simple-yet-Powerful Magic of The Loop Result Protocol'>
      <link itemprop='url' href='../609.html'>
      <meta itemprop='datePublished' content='2018-05-08T18:56:24Z'>
        <meta itemprop='articleSection' content='Loops'>
      <meta itemprop='keywords' content='best-of'>
      <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
        <meta itemprop='name' content='AltRebol'>
          <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
            <meta itemprop='url' content='https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
          </div>
      </div>

          <span itemprop='author' itemscope itemtype="http://schema.org/Person">
            <meta itemprop='name' content='hostilefork'>
            <link itemprop='url' rel='nofollow' href='https://rebol.metaeducation.com/u/hostilefork'>
          </span>
        <meta itemprop='text' content='Loops return null if-and-only-if they break
One very good reason this rule exists is to make it easy to build custom loop constructs out of several other loop constructs.  You can tell &amp;quot;from the outside&amp;quot; whether one of y&amp;hellip;'>

          <div id='post_11' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://rebol.metaeducation.com/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2024-09-10T14:49:45Z' class='post-time'>
                    September 10, 2024,  2:49pm
                  </time>
                  <meta itemprop='dateModified' content='2024-09-10T15:19:08Z'>
              <span itemprop='position'>11</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>I was pondering the edge case of getting two voids into the <a href="../../parallel-for-example/2261.html">FOR-PARALLEL</a> example, and what it would return given the particular choice of how it was implemented:</p>
<aside class="quote no-group quote-modified" data-username="hostilefork" data-post="1" data-topic="2261">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="../../../user_avatar/rebol.metaeducation.com/hostilefork/48/421_2.png" class="avatar"><a href="../../parallel-for-example/2261/1.html">Parallel FOR Example</a></div>
<blockquote>
<pre data-code-wrap="plaintext"><code class="lang-plaintext">    ...
    blk1 [~void~ any-list?]
    blk2 [~void~ any-list?]
    body [block!]
][
    return while [(not empty? maybe blk1) or (not empty? maybe blk2)] [
       ...
</code></pre>
</blockquote>
</aside>
<p>That meant it would return whatever WHILE returned when it never ran its body, which was VOID.  Currently that is distinct from what WHILE returns when its condition is void...which is NULL, according to <a href="../../the-void-in-null-out-protocol/1880.html">VOID-in-NULL-out</a>.</p>
<p>But is that right?  Let's revisit the question of what a void input <em>should</em> do for loops:</p>
<pre><code>&gt;&gt; condition: null

&gt;&gt; for-each item (if condition [block]) [...]
== ???
</code></pre>
<p>Whether we return NULL or VOID here affects things like ANY or ALL... NULL will count as a branch inhibitor and stop either construct.  On the other hand, ELSE considers both pure NULL and pure VOID to be cause to run.</p>
<p>You could make the case this is not a void-in-null-out situation.  That was invented for functions that were looking for a particular answer and couldn't give it, so instead give a "soft failure".  e.g. <strong>LENGTH OF VOID</strong> is NULL, because it couldn't get the length.  <em>But loops aren't asking any particular question that fails.</em>  They're just a conduit to someone else who might be asking a question.  It's kind of like how <strong><code>eval [void]</code></strong> doesn't give you back NULL just because you evaluated and got void.</p>
<p>Loop result protocol says we reserve pure NULL for saying the loop encountered a BREAK.  Why would we want to conflate opting out of the loop with breaking, here?  That could be thought of as when it's useful to think "the question" of the loop actually did encounter a soft failure.</p>
<h3><a name="p-7616-what-about-weird-loops-1" class="anchor" href="11.html#p-7616-what-about-weird-loops-1"></a>What About "Weird" Loops?</h3>
<p>Asking what MAP-EACH should do is a curious one.  If a MAP-EACH never runs its body, it gives back an empty block... not void as other constructs do:</p>
<pre><code>&gt;&gt; for-each x [] [fail "this code should never run"]
== ~void~  ; anti

&gt;&gt; map-each x [] [fail "this code should never run"]
== []
</code></pre>
<p>Given current thoughts on <a href="../../blank-2022-revisiting-the-datatype/1942/11.html">the semantics of BLANK!</a>, I'm thinking that should give back empty block as well... because an empty string or binary or array all give back empty block.  So it doesn't break any rules for blank to do the same:</p>
<pre><code>&gt;&gt; map-each x _ [fail "this code should never run"]
== []
</code></pre>
<p><strong>In order to reason about this, we have to think about the applications.</strong></p>
<p>If someone is writing code like:</p>
<pre><code>all [
    ...
    map-each x (whatever) [...]
    ...
]
</code></pre>
<p>We can imagine them having the wish to telegraph "opt out" vs. "null" to the ALL.  We know that BREAK in the body of the loop telegraphs null--and that is by design.  But should you be able to telegraph NULL from the <code>(whatever)</code> slot, or only telegraph VOID?</p>
<p>Let's make it a little more concrete by saying they're using an IF in the slot:</p>
<pre><code>all [
    ...
    map-each x (if condition [whatever]) [...]
    ...
]
</code></pre>
<p>Transformation-wise, they could have written that as:</p>
<pre><code>all [
    ...
    if condition [
        map-each x (whatever) [...]
    ]
    ...
]
</code></pre>
<p>So getting void from a conditional expression is easy in such a case.  Getting NULL is trickier.</p>
<p>The other likely instance is a calculated expression that may be null.</p>
<pre><code>all [
    ...
    map-each x (maybe some long expression) [...]
    ...
]
</code></pre>
<p>You'd have to create a variable in order to pull that out, and not repeat the expression.  Can we say anything about how likely it is that someone wants to telegraph NULL vs. VOID out of that?</p>
<p>And furthermore: because MAP-EACH is intrinsically a value-synthesizing construct, is this different from the likely needs of FOR-EACH or similar?  Does "I made a block, or if I couldn't NULL" make more sense than "I made a block, or if I couldn't VOID"?</p>
<p>I'll add that the existence of MAYBE being able to turn NULL to void offers a good way to turn "I couldn't do it" to "I don't care"</p>
<pre><code>all [
    ...
    maybe map-each x (maybe some long expression) [...]
    ...
]
</code></pre>
<h3><a name="p-7616-perhaps-void-in-null-out-should-be-heeded-for-loops-too-2" class="anchor" href="11.html#p-7616-perhaps-void-in-null-out-should-be-heeded-for-loops-too-2"></a>Perhaps VOID-in-NULL-out should be heeded for loops, too</h3>
<p>It conflates void input with BREAK.  But since BLANK! acts the same way as empty series, you have that other choice if you want to generate a VOID out of something like a FOR-EACH.</p>
<p>I think I'm going to stick with NULL as the answer for void input, for now.  I'll keep an eye out for how well it is working.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

                <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../../parallel-for-example/2261/2.html">Parallel FOR Example</a>
                        <meta itemprop='position' content='4'>
                      </div>
                </div>
          </div>
    </div>

      <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
          <span itemprop='name'>
            <a itemprop="url" href="../609.html#post_11">show post in topic</a>
          </span>
      </div>

    




    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/guidelines' itemprop="url">Guidelines </a>
        </span>
      </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://rebol.metaeducation.com/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://rebol.metaeducation.com/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    
  </body>
  
</html>
