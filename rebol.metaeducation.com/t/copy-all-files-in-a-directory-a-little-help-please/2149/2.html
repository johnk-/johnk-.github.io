<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>copy all files in a directory ... a little help please? - #2 by hostilefork - Usage - AltRebol</title>
    <meta name="description" content="Hi everybody, 
I&amp;#39;d like to modify this script from the script library: copy all files in a directory so that it can exclude directories and or files like you can with rsync. 
It has been a long time since I&amp;#39;ve used rebol&amp;hellip;">
    <meta name="generator" content="Discourse 3.5.0.beta6-dev - https://github.com/discourse/discourse version 623cde985b21c2ed812b83d3ea94f69231613718">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" media="all" content="#fff">

<meta name="color-scheme" content="light">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, viewport-fit=cover">
<link rel="canonical" href="../2149.html" />

<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="AltRebol Search">

    <link href="https://rebol.metaeducation.com/stylesheets/color_definitions_base__2_ceb61c279a74dfa3cef6a62f7784988102abec82.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" class="light-scheme"/>

<link href="https://rebol.metaeducation.com/stylesheets/common_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="common"  />

  <link href="https://rebol.metaeducation.com/stylesheets/desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="desktop"  />



    <link href="https://rebol.metaeducation.com/stylesheets/chat_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="chat"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-details_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-details"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-lazy-videos_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-local-dates_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-narrative-bot_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-presence_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-presence"  />
    <link href="https://rebol.metaeducation.com/stylesheets/docker_manager_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="docker_manager"  />
    <link href="https://rebol.metaeducation.com/stylesheets/footnote_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="footnote"  />
    <link href="https://rebol.metaeducation.com/stylesheets/poll_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="poll"  />
    <link href="https://rebol.metaeducation.com/stylesheets/spoiler-alert_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="spoiler-alert"  />
    <link href="https://rebol.metaeducation.com/stylesheets/chat_desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="chat_desktop"  />
    <link href="https://rebol.metaeducation.com/stylesheets/poll_desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="https://rebol.metaeducation.com/stylesheets/common_theme_2_57fe803ed5a41e9f7d94086afaf66a1aab57d9ae.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="common_theme" data-theme-id="2" data-theme-name="default"/>
    

    
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;copy all files in a directory ... a little help please?&#39;" href="../2149.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://rebol.metaeducation.com/t/copy-all-files-in-a-directory-a-little-help-please/2149/2" />
<meta name="twitter:url" content="https://rebol.metaeducation.com/t/copy-all-files-in-a-directory-a-little-help-please/2149/2" />
<meta property="og:title" content="copy all files in a directory ... a little help please?" />
<meta name="twitter:title" content="copy all files in a directory ... a little help please?" />
<meta property="og:description" content="Hello @hcfe,  I&#39;ll note that this isn&#39;t really a general Rebol Q&amp;A support forum (it&#39;s main purpose is for developers to discuss the evolution of the language).  But I&#39;ll throw in a couple of thoughts...   For the provided Rebol2 code:  copy-dir: func [source dest] [     if not exists? dest [make-dir/deep dest]     foreach file read source [         either find file &quot;/&quot; [             copy-dir source/:file dest/:file         ][             print file             write/binary dest/:file read/binar..." />
<meta name="twitter:description" content="Hello @hcfe,  I&#39;ll note that this isn&#39;t really a general Rebol Q&amp;A support forum (it&#39;s main purpose is for developers to discuss the evolution of the language).  But I&#39;ll throw in a couple of thoughts...   For the provided Rebol2 code:  copy-dir: func [source dest] [     if not exists? dest [make-dir/deep dest]     foreach file read source [         either find file &quot;/&quot; [             copy-dir source/:file dest/:file         ][             print file             write/binary dest/:file read/binar..." />
<meta property="og:article:section" content="Usage" />
<meta property="og:article:section:color" content="3AB54A" />
<meta property="article:published_time" content="2024-02-15T04:49:42+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler ">
    
    <header>
  <a href="https://rebol.metaeducation.com/">AltRebol</a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="../2149.html">copy all files in a directory ... a little help please?</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://rebol.metaeducation.com/c/usage/7" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #3AB54A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Usage</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
      </div>

  </div>

  

    <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='copy all files in a directory ... a little help please?'>
      <link itemprop='url' href='../2149.html'>
      <meta itemprop='datePublished' content='2024-02-15T00:10:21Z'>
        <meta itemprop='articleSection' content='Usage'>
      <meta itemprop='keywords' content=''>
      <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
        <meta itemprop='name' content='AltRebol'>
          <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
            <meta itemprop='url' content='https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
          </div>
      </div>

          <span itemprop='author' itemscope itemtype="http://schema.org/Person">
            <meta itemprop='name' content='hcfe'>
            <link itemprop='url' rel='nofollow' href='../../../u/hcfe.html'>
          </span>
        <meta itemprop='text' content='Hi everybody, 
I&amp;#39;d like to modify this script from the script library: copy all files in a directory so that it can exclude directories and or files like you can with rsync. 
It has been a long time since I&amp;#39;ve used rebol&amp;hellip;'>

          <div id='post_2' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://rebol.metaeducation.com/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2024-02-15T04:49:42Z' class='post-time'>
                    February 15, 2024,  4:49am
                  </time>
                  <meta itemprop='dateModified' content='2024-02-15T04:49:42Z'>
              <span itemprop='position'>2</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Hello <a class="mention" href="../../../u/hcfe.html">@hcfe</a>,</p>
<p>I'll note that this isn't really a general Rebol Q&amp;A support forum (it's main purpose is for developers to discuss the evolution of the language).</p>
<p>But I'll throw in a couple of thoughts...</p>
<aside class="quote no-group" data-username="hcfe" data-post="1" data-topic="2149">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="../../../letter_avatar_proxy/v4/letter/h/7cd45c/48.png" class="avatar"> hcfe:</div>
<blockquote>
<p>I'd like to modify this script from the script library: <a href="http://rebol.net/cookbook/recipes/0011.html">copy all files in a directory </a> so that it can exclude directories and or files like you can with rsync.</p>
</blockquote>
</aside>
<p>For the provided Rebol2 code:</p>
<pre><code>copy-dir: func [source dest] [
    if not exists? dest [make-dir/deep dest]
    foreach file read source [
        either find file "/" [
            copy-dir source/:file dest/:file
        ][
            print file
            write/binary dest/:file read/binary source/:file
        ]
    ]
]
</code></pre>
<p>He suggests using it like:</p>
<pre><code>copy-dir %pages/ %archive/
</code></pre>
<p>There are a few general ways you can imagine expanding this to supply more parameters to COPY-DIR..</p>
<p>One basic way would be to add a third parameter for any exclusions.  You could make it a single value and pass "none" if you didn't want to exclude anything:</p>
<pre><code>   copy-dir %pages/ %archive/ %dont-copy.txt  ; exclude last parameter

   copy-dir %pages/ %archive/ none  ; don't exclude anything
</code></pre>
<p>You could make this a little better by passing a block, which would then allow you to exclude multiple items:</p>
<pre><code>   copy-dir %pages/ %archive/ [%dont-copy.txt %dont-copy-either.txt]

   copy-dir %pages/ %archive/ []  ; don't exclude anything
</code></pre>
<p>If you don't like having to pass three parameters all the time, you could  make the third parameter a "refinement" which is an optional parameter, that you'd only get if you used the /EXCLUDE option in the invocation.</p>
<pre><code>  copy-dir %pages/ %archive/  ; don't exclude anything

  copy-dir/exclude %pages/ %archive/ %dont-copy.txt
</code></pre>
<p>In Rebol2, you'd do this by defining your function spec as <strong>func [source dest /exclude exclusions]</strong>, where EXCLUDE would be falsey if the refinement were not used and truthy if it is used.  If truthy, then EXCLUSIONS would hold the extra parameter.</p>
<p><em>(The Ren-C evolution of Rebol3 <a href="../../pure-and-refined-simplifying-refinements-to-one-or-zero-args/1120.html">unified refinements with their arguments</a>, so you could just have /EXCLUDE and that would be the name of the variable if used, or an "antiform" null if it was not used.)</em></p>
<p>Another concept could be that you could forego the idea of function parameters entirely and start thinking about this as a "dialect".  Maybe you even supply processing code to hook what happens.</p>
<pre><code> mysync [
     from: %pages/
     to: %archive/
     &lt;exclude&gt; %dont-copy.txt %dont-copy-either.txt
     &lt;hook&gt; %special.txt (
         print ["Special handling of" name]  ; imagine name filled as %special.txt
         if (last-modified - now) &lt; 12:00 [  ; imagine last-modified also filled in
             return &lt;exclude&gt;
         ]
         print "modified long enough ago, falling through to normal copy"
     )
 ]
</code></pre>
<p>So I've fancifully suggested the idea that if you put a TAG! with <strong><code>&lt;hook&gt;</code></strong> in it then it runs some code in a PAREN! afterward (Ren-C calls expressions in parentheses GROUP!s).  That code has some predefined variables filled in for you like the file's name, and when it was last modified.  You might be able to get it to take certain actions by returning signals... here I'm saying you can conditionally exclude a file based on the last modified time.</p>
<p>To me this is the interesting potential of Rebol.  And if you're not looking to wire up solutions that look like that, you're probably better served by learning a more mainstream and better documented/supported language.  Certainly there are many places you can look to find implementations of rsync-like tools...!</p>
<aside class="quote no-group" data-username="hcfe" data-post="1" data-topic="2149">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="../../../letter_avatar_proxy/v4/letter/h/7cd45c/48.png" class="avatar"> hcfe:</div>
<blockquote>
<p>It has been a long time since I've used rebol, and I was never much good at it!</p>
</blockquote>
</aside>
<p>If you're a beginner and want to get support with the basics, <a href="https://gitter.im/red/red/welcome">Red Gitter</a> is a place where they cater more to that...and are trying to get people to use Red...which is very similar to Rebol2, but <a href="https://www.reddit.com/r/redlang/comments/ahucdg/what_is_redpro/">(mostly)</a> open-source and still being developed.  It's probably the best place to chat.</p>
<p>Here is just the neverending discussion of lots of agonizing theory and details.  <img src="../../../images/emoji/twitter/dizzy_face.png%3Fv=14" title=":dizzy_face:" class="emoji" alt=":dizzy_face:" loading="lazy" width="20" height="20"></p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="1" />
              <span class='post-likes'>1 Like</span>
            </div>

          </div>
    </div>

      <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
          <span itemprop='name'>
            <a itemprop="url" href="../2149.html#post_2">show post in topic</a>
          </span>
      </div>

    




    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/guidelines' itemprop="url">Guidelines </a>
        </span>
      </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://rebol.metaeducation.com/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://rebol.metaeducation.com/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    
  </body>
  
</html>
