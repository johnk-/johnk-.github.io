<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Old Idea Revisited: DATATYPE as... Antiform? - #4 by hostilefork - Datatypes - AltRebol</title>
    <meta name="description" content="I&amp;#39;ve been suffering through an attempt to bring sanity to bear upon the MAKE and TO matrix. 
While doing so, I noticed that there are a lot of MAKE instructions that do &amp;quot;joining&amp;quot;. 
In R3-Alpha and Red: 
&amp;gt;&amp;gt; make binary! [&amp;hellip;">
    <meta name="generator" content="Discourse 3.5.0.beta6-dev - https://github.com/discourse/discourse version 623cde985b21c2ed812b83d3ea94f69231613718">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" media="all" content="#fff">

<meta name="color-scheme" content="light">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, viewport-fit=cover">
<link rel="canonical" href="../2324.html" />

<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="AltRebol Search">

    <link href="https://rebol.metaeducation.com/stylesheets/color_definitions_base__2_ceb61c279a74dfa3cef6a62f7784988102abec82.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" class="light-scheme"/>

<link href="https://rebol.metaeducation.com/stylesheets/common_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="common"  />

  <link href="https://rebol.metaeducation.com/stylesheets/desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="desktop"  />



    <link href="https://rebol.metaeducation.com/stylesheets/chat_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="chat"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-details_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-details"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-lazy-videos_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-local-dates_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-narrative-bot_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-presence_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-presence"  />
    <link href="https://rebol.metaeducation.com/stylesheets/docker_manager_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="docker_manager"  />
    <link href="https://rebol.metaeducation.com/stylesheets/footnote_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="footnote"  />
    <link href="https://rebol.metaeducation.com/stylesheets/poll_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="poll"  />
    <link href="https://rebol.metaeducation.com/stylesheets/spoiler-alert_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="spoiler-alert"  />
    <link href="https://rebol.metaeducation.com/stylesheets/chat_desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="chat_desktop"  />
    <link href="https://rebol.metaeducation.com/stylesheets/poll_desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="https://rebol.metaeducation.com/stylesheets/common_theme_2_57fe803ed5a41e9f7d94086afaf66a1aab57d9ae.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="common_theme" data-theme-id="2" data-theme-name="default"/>
    

    
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;Old Idea Revisited: DATATYPE as... Antiform?&#39;" href="../2324.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://rebol.metaeducation.com/t/old-idea-revisited-datatype-as-antiform/2324/4" />
<meta name="twitter:url" content="https://rebol.metaeducation.com/t/old-idea-revisited-datatype-as-antiform/2324/4" />
<meta property="og:title" content="Old Idea Revisited: DATATYPE as... Antiform?" />
<meta name="twitter:title" content="Old Idea Revisited: DATATYPE as... Antiform?" />
<meta property="og:description" content="So I was noticing you couldn&#39;t do this anymore...  func compose:deep [x [word! (integer!)]] [ ... ]  Because integer! is an antiform of ~{integer!}~, and you can&#39;t put antiforms in blocks...  But let&#39;s say you ^META it...  &gt;&gt; compose:deep [x [word! (meta integer!)]] == [x [word! ~{integer!}~]]  We have sort of free reign to decide what quasiforms do in type spec blocks.  For instance, quasi-blocks match packs with those types, e.g. ~[integer! block!]~ would match a pack antiform like ~[&#39;1 &#39;[a b..." />
<meta name="twitter:description" content="So I was noticing you couldn&#39;t do this anymore...  func compose:deep [x [word! (integer!)]] [ ... ]  Because integer! is an antiform of ~{integer!}~, and you can&#39;t put antiforms in blocks...  But let&#39;s say you ^META it...  &gt;&gt; compose:deep [x [word! (meta integer!)]] == [x [word! ~{integer!}~]]  We have sort of free reign to decide what quasiforms do in type spec blocks.  For instance, quasi-blocks match packs with those types, e.g. ~[integer! block!]~ would match a pack antiform like ~[&#39;1 &#39;[a b..." />
<meta property="og:article:section" content="Development" />
<meta property="og:article:section:color" content="25AAE2" />
<meta property="og:article:section" content="Datatypes" />
<meta property="og:article:section:color" content="25AAE2" />
<meta property="article:published_time" content="2025-03-24T13:06:36+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler ">
    
    <header>
  <a href="https://rebol.metaeducation.com/">AltRebol</a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="../2324.html">Old Idea Revisited: DATATYPE as... Antiform?</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://rebol.metaeducation.com/c/development/datatypes/45" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://rebol.metaeducation.com/c/development/datatypes/45" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Datatypes</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  

    <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='Old Idea Revisited: DATATYPE as... Antiform?'>
      <link itemprop='url' href='../2324.html'>
      <meta itemprop='datePublished' content='2024-11-08T17:05:05Z'>
        <meta itemprop='articleSection' content='Datatypes'>
      <meta itemprop='keywords' content=''>
      <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
        <meta itemprop='name' content='AltRebol'>
          <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
            <meta itemprop='url' content='https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
          </div>
      </div>

          <span itemprop='author' itemscope itemtype="http://schema.org/Person">
            <meta itemprop='name' content='hostilefork'>
            <link itemprop='url' rel='nofollow' href='https://rebol.metaeducation.com/u/hostilefork'>
          </span>
        <meta itemprop='text' content='I&amp;#39;ve been suffering through an attempt to bring sanity to bear upon the MAKE and TO matrix. 
While doing so, I noticed that there are a lot of MAKE instructions that do &amp;quot;joining&amp;quot;. 
In R3-Alpha and Red: 
&amp;gt;&amp;gt; make binary! [&amp;hellip;'>

          <div id='post_4' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://rebol.metaeducation.com/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2025-03-24T13:06:36Z' class='post-time'>
                    March 24, 2025,  1:06pm
                  </time>
                  <meta itemprop='dateModified' content='2025-03-24T22:19:25Z'>
              <span itemprop='position'>4</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <aside class="quote no-group" data-username="hostilefork" data-post="3" data-topic="2324">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="../../../user_avatar/rebol.metaeducation.com/hostilefork/48/421_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p>And of course, the original motivator still applies... which was the ambiguity of:</p>
<pre data-code-wrap="plaintext"><code class="lang-plaintext">rebol2&gt;&gt; find [a 1 b c] integer!
== [1 b c]

rebol2&gt;&gt; find compose [a (integer!) b c] integer!
== [integer! b c]  ; not a word!, should render as [#[integer!] b c]
</code></pre>
<p>If INTEGER! is an antiform, then you don't have to worry about that ambiguity, since such a COMPOSE is impossible.</p>
</blockquote>
</aside>
<p>So I was noticing you couldn't do this anymore...</p>
<pre><code>func compose:deep [x [word! (integer!)]] [ ... ]
</code></pre>
<p>Because integer! is an antiform of ~{integer!}~, and you can't put antiforms in blocks...</p>
<p>But let's say you ^META it...</p>
<pre><code>&gt;&gt; compose:deep [x [word! (meta integer!)]]
== [x [word! ~{integer!}~]]
</code></pre>
<p>We have sort of free reign to decide what quasiforms do in type spec blocks.  For instance, quasi-blocks match packs with those types, e.g. <strong><code>~[integer! block!]~</code></strong> would match a pack antiform like <strong><code>~['1 '[a b c]]~</code></strong>.  So it's not like the quasiform states are uniformly treated literally.</p>
<p><strong>So why not have quasi-fences mean typecheck that as a datatype?</strong></p>
<p>Seems like a winner to me (and reminiscent of my recent realization of <a href="../../dialecting-quasiforms-in-parse/2379.html">"Quasiforms can mean whatever we want to design them to do in PARSE"</a>)</p>
<h2><a name="p-8063-type-of-including-quotedquasi-status-1" class="anchor" href="4.html#p-8063-type-of-including-quotedquasi-status-1"></a>TYPE OF including Quoted/Quasi Status?</h2>
<p>In the dawn of generalized quoting, I thought about putting quote marks on the datatype to reflect how much quoting there was:</p>
<pre><code>&gt;&gt; type of first ['''a]
== '''[#datatype word!]
</code></pre>
<p>But I realized having quotes on the outside of the type had bad properties... it was no longer a datatype, it was a QUOTED!.  And if you put it somewhere and it evaluated those quotes were easy to lose track of.</p>
<p>So as using a list type came up, I thought putting the quotes inside the list made more sense.</p>
<pre><code>&gt;&gt; type of first ['''a]
== &amp;['''word!]
</code></pre>
<p>But with the dawn of antiforms and quasiforms, there was a problem.  If you wanted to signal an antiform you'd perhaps do that with a quasiform.</p>
<pre><code>&gt;&gt; spread [a b c]
== ~(a b c)~  ; anti

&gt;&gt; type of spread [a b c]
== &amp;[~group!~]
</code></pre>
<p>But then your answer for quasiforms would have to be quoted...and your answer for everything else would be one level quoted higher than you wanted it:</p>
<pre><code>&gt;&gt; type of first [~a~]
== &amp;['~word!~]  ; :-(

&gt;&gt; type of first ['''a]
== &amp;[''''word!]  ; four quotes?!  :-(
</code></pre>
<p>That was hideous.  But as of now, antiforms are getting their own types:</p>
<pre><code>&gt;&gt; type of spread [a b c]
== ~{splice!}~
</code></pre>
<p>Which means maybe the old system could be used more sensibly:</p>
<pre><code>&gt;&gt; type of first [~a~]
== ~{~word!~}~

&gt;&gt; type of first ['''a]
== ~{'''word!}~
</code></pre>
<p>That doesn't look hideous.  In any case, I proposed the idea that you could produce these datatypes from other ones, e.g.</p>
<pre><code>&gt;&gt; integer!
== ~{integer!}~

&gt;&gt; quoted integer!
==  ~{'integer!}~

&gt;&gt; quoted-datatype? ~{'integer!}~
== ~okay~  ; anti
</code></pre>
<p>What motivated me to think about TYPE OF giving these distinct answers e.g. for quasiforms and quoteds is that I want PARSE to be able to dispatch on quasiforms now, and it doesn't have a good way to do that unless it distinguishes them.</p>
<p>Again--this is an old idea reviewed in light of new developments.  It doesn't look completely nuts.  I'm in the throes of the antiform datatype conversion, so I'll probably have more to say shortly.</p>
<hr>
<p><strong>UPDATE:</strong> The antiform datatype code boots after less than 2 days work!  But... booting is the beginning of a lot of details and additional design work.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
    </div>

      <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
          <span itemprop='name'>
            <a itemprop="url" href="../2324.html#post_4">show post in topic</a>
          </span>
      </div>

    




    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/guidelines' itemprop="url">Guidelines </a>
        </span>
      </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://rebol.metaeducation.com/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://rebol.metaeducation.com/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    
  </body>
  
</html>
