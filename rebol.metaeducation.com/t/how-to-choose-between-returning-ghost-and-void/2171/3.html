<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>How To Choose Between Returning GHOST and VOID? - #3 by hostilefork - Questions - AltRebol</title>
    <meta name="description" content="Ah-haâ€¦ Iâ€™d completely missed this use of void, as a return value. 
Though this does now raise the question of whether a function should return VOID or GHOST. Both seem to vaporise in lists, after all. I guess it depends&amp;hellip;">
    <meta name="generator" content="Discourse 3.5.0.beta6-dev - https://github.com/discourse/discourse version 623cde985b21c2ed812b83d3ea94f69231613718">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" media="all" content="#fff">

<meta name="color-scheme" content="light">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, viewport-fit=cover">
<link rel="canonical" href="../2171.html" />

<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="AltRebol Search">

    <link href="https://rebol.metaeducation.com/stylesheets/color_definitions_base__2_ceb61c279a74dfa3cef6a62f7784988102abec82.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" class="light-scheme"/>

<link href="https://rebol.metaeducation.com/stylesheets/common_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="common"  />

  <link href="https://rebol.metaeducation.com/stylesheets/desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="desktop"  />



    <link href="https://rebol.metaeducation.com/stylesheets/chat_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="chat"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-details_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-details"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-lazy-videos_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-local-dates_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-narrative-bot_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-presence_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-presence"  />
    <link href="https://rebol.metaeducation.com/stylesheets/docker_manager_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="docker_manager"  />
    <link href="https://rebol.metaeducation.com/stylesheets/footnote_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="footnote"  />
    <link href="https://rebol.metaeducation.com/stylesheets/poll_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="poll"  />
    <link href="https://rebol.metaeducation.com/stylesheets/spoiler-alert_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="spoiler-alert"  />
    <link href="https://rebol.metaeducation.com/stylesheets/chat_desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="chat_desktop"  />
    <link href="https://rebol.metaeducation.com/stylesheets/poll_desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="https://rebol.metaeducation.com/stylesheets/common_theme_2_57fe803ed5a41e9f7d94086afaf66a1aab57d9ae.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="common_theme" data-theme-id="2" data-theme-name="default"/>
    

    
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;How To Choose Between Returning GHOST and VOID?&#39;" href="../2171.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://rebol.metaeducation.com/t/how-to-choose-between-returning-ghost-and-void/2171/3" />
<meta name="twitter:url" content="https://rebol.metaeducation.com/t/how-to-choose-between-returning-ghost-and-void/2171/3" />
<meta property="og:title" content="How To Choose Between Returning GHOST and VOID?" />
<meta name="twitter:title" content="How To Choose Between Returning GHOST and VOID?" />
<meta property="og:description" content="I think it should be a very rare choice to make things return VOID unconditionally.  And I think it should be an even rarer choice to return GHOST (e.g. because of the damage it can do to things like CASE or SWITCH structure). And when GHOST is returned it should almost always be unconditional.    So this instinct about &quot;leaky ghosts&quot; (e.g. functions that sometimes return ghost, and sometimes do not) has turned out to be Â¡mucho importante! ðŸŒ®  I wrote about it in PARSE here:  &quot;Surprising&quot; G..." />
<meta name="twitter:description" content="I think it should be a very rare choice to make things return VOID unconditionally.  And I think it should be an even rarer choice to return GHOST (e.g. because of the damage it can do to things like CASE or SWITCH structure). And when GHOST is returned it should almost always be unconditional.    So this instinct about &quot;leaky ghosts&quot; (e.g. functions that sometimes return ghost, and sometimes do not) has turned out to be Â¡mucho importante! ðŸŒ®  I wrote about it in PARSE here:  &quot;Surprising&quot; G..." />
<meta property="og:article:section" content="Usage" />
<meta property="og:article:section:color" content="3AB54A" />
<meta property="og:article:section" content="Questions" />
<meta property="og:article:section:color" content="3AB54A" />
<meta property="article:published_time" content="2025-05-12T07:52:28+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler ">
    
    <header>
  <a href="https://rebol.metaeducation.com/">AltRebol</a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="../2171.html">How To Choose Between Returning GHOST and VOID?</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://rebol.metaeducation.com/c/usage/first-steps/10" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #3AB54A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Usage</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://rebol.metaeducation.com/c/usage/first-steps/10" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #3AB54A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Questions</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  

    <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='How To Choose Between Returning GHOST and VOID?'>
      <link itemprop='url' href='../2171.html'>
      <meta itemprop='datePublished' content='2024-03-09T02:30:26Z'>
        <meta itemprop='articleSection' content='Questions'>
      <meta itemprop='keywords' content=''>
      <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
        <meta itemprop='name' content='AltRebol'>
          <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
            <meta itemprop='url' content='https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
          </div>
      </div>

          <span itemprop='author' itemscope itemtype="http://schema.org/Person">
            <meta itemprop='name' content='bradrn'>
            <link itemprop='url' rel='nofollow' href='https://rebol.metaeducation.com/u/bradrn'>
          </span>
        <meta itemprop='text' content='Ah-haâ€¦ Iâ€™d completely missed this use of void, as a return value. 
Though this does now raise the question of whether a function should return VOID or GHOST. Both seem to vaporise in lists, after all. I guess it depends&amp;hellip;'>

          <div id='post_3' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://rebol.metaeducation.com/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2025-05-12T07:52:28Z' class='post-time'>
                    May 12, 2025,  7:52am
                  </time>
                  <meta itemprop='dateModified' content='2025-06-01T20:07:47Z'>
              <span itemprop='position'>3</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <aside class="quote no-group quote-modified" data-username="hostilefork" data-post="2" data-topic="2171">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="../../../user_avatar/rebol.metaeducation.com/hostilefork/48/421_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<aside class="quote no-group" data-username="bradrn" data-post="1" data-topic="2171">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="../../../user_avatar/rebol.metaeducation.com/bradrn/48/365_2.png" class="avatar"> bradrn:</div>
<blockquote>
<p>Though this does now raise the question of whether a function should return VOID or GHOST.</p>
</blockquote>
</aside>
<p>I think it should be a very rare choice to make things return VOID unconditionally.</p>
<p>And I think it should be an even rarer choice to return GHOST (e.g. because of the damage it can do to things like CASE or SWITCH structure). And when GHOST is returned it should almost always be unconditional.</p>
</blockquote>
</aside>
<p>So this instinct about "leaky ghosts" (e.g. functions that sometimes return ghost, and sometimes do not) has turned out to be <em><strong>Â¡mucho importante!</strong></em> <img src="../../../images/emoji/twitter/taco.png%3Fv=14" title=":taco:" class="emoji" alt=":taco:" loading="lazy" width="20" height="20"></p>
<p>I wrote about it in PARSE here:</p>
<p><a href="../../leaky-ghosts-what-combinators-should-vanish/2437.html" class="inline-onebox">"Surprising" Ghosts: What Combinators Vanish?</a></p>
<p>But it's a pretty big deal in EVAL.  You don't want the EVAL in situations like this to vanish:</p>
<pre><code> ^result: switch ... [
     ...
     ... [counter: counter + 1, eval code]
     ...
 ]
</code></pre>
<p>If EVAL is allowed to vanish, then you could wind up assigning the calculation (counter + 1) to result, and this is surprising.</p>
<p><strong>But you need some way of evaluating and being able to get ghosts if you really intend it, and are conscious of what you're doing.</strong></p>
<p>So far that's been with <strong><code>eval:ghostable</code></strong>.</p>
<p>(I think <strong><code>eval:ghost</code></strong> or <strong><code>eval:ghosts</code></strong> doesn't communicate as well that what it means.  <strong><code>eval:ghostly</code></strong> is shorter but also less clear.  <strong><code>eval:transparent</code></strong> is longer than ghostable and also just kind of less informative.)</p>
<h2><a name="p-8266-i-wish-this-could-be-pushed-outside-1" class="anchor" href="3.html#p-8266-i-wish-this-could-be-pushed-outside-1"></a>I Wish This Could Be Pushed Outside...</h2>
<p>It would be technically possible to rig something up where the evaluator would be complicit, in saying that if a function's signature wasn't such that it <em>always</em> returns GHOST!, that it would turn the ghost into a VOID unless a special participatory tool was used.</p>
<p>We talked about <strong><code>^</code></strong> being free.  Not that it's a great choice, but there would be worse ones.</p>
<p>Let's imagine that it represented this intention:</p>
<pre><code>foo: func [return: [ghost! integer!] x [integer!]] [
    if x &gt; 1000 [return ghost]
    return x
]

&gt;&gt; "some stuff" foo 304
== 304

&gt;&gt; "some stuff" foo 1020
== ~[]~  ; anti (void)

&gt;&gt; "some stuff" ^ foo 1020
== "some stuff"
</code></pre>
<p>So it's actually modifying the function call machinery, saying "if this function doesn't always return ghosts, don't do the normal switcheroo to void".</p>
<p>I know this isn't necessarily super obvious.  But what @ does is a quirk of the system as well, applied to solve tricky fundamental problems that can't be done other ways.</p>
<h2><a name="p-8266-this-is-no-small-issue-and-worth-it-to-solve-2" class="anchor" href="3.html#p-8266-this-is-no-small-issue-and-worth-it-to-solve-2"></a>This Is No Small Issue, And Worth It To Solve</h2>
<p>It comes up a lot of other places, e.g. UNLIFT... which takes in a quoted or quasiform and drops it a level.  Should that vanish by default, or do you need yet another UNLIFT:GHOSTABLE?</p>
<p>There's an issue with <strong>^var</strong> vanishing and causing surprises as well.  I don't think we want to be writing <strong>[^ ^var]</strong>, so something else needs to be done.</p>
<p>One small step could be to say that <strong>^(var)</strong> is willing to vanish, while <strong>^var</strong> is not.  That might not seem to make a hell of a lot of sense, <em>but</em> GROUP! evaluations are typically allowed to vanish, which is why you can put COMMENT and ELIDE and such inside groups.</p>
<pre><code>&gt;&gt; x: eval [10 + 20 (comment "this works")]
== 30
</code></pre>
<p>This would cut down on the number of places that the mistake can happen.</p>
<h2><a name="p-8266-think-i-need-to-give-this-a-shot-3" class="anchor" href="3.html#p-8266-think-i-need-to-give-this-a-shot-3"></a>Think I Need To Give This a Shot</h2>
<p>I'm not happy with distinguishing EVAL vs. EVAL:GHOSTABLE, and that :GHOSTABLE is just one of those refinements that starts spreading everywhere.  Better to have a uniform solution.</p>
<p>As we discussed, <strong>^</strong> is kind of an outlier where you're like "uh, what should that mean?"  Having it do something genuinely useful is better than trying to weasel together an argument for why what it does "makes sense".</p>
<p>Having to say <code>^(var)</code> to get vanishing, with <code>^var</code> giving ghosts as void, is imperfect but better.  You'd basically never write ^(var) if you could just say ^var so it makes sense to encode the intent.</p>
<p>If you're super-conscious from experience that <code>^(...)</code> can vanish, then when you get <code>^(my expression)</code> situations you don't want to vanish, you can mitigate that by deghosting.</p>
<h2><a name="p-8266-it-would-allow-ghost-branches-4" class="anchor" href="3.html#p-8266-it-would-allow-ghost-branches-4"></a>It Would Allow GHOST Branches</h2>
<pre><code>&gt;&gt; "some stuff" if 10 &lt; 20 [elide print "Oh my."] else [&lt;else&gt;]
Oh my.
== ~[]~  ; anti (void)

 &gt;&gt; "some stuff" if 10 &gt; 20 [elide print "Oh my."] else [&lt;else&gt;]
== &lt;else&gt;

 &gt;&gt; "some stuff" ^ if 10 &lt; 20 [elide print "Oh my."] else [&lt;else&gt;]
Oh my.
== "some stuff"

 &gt;&gt; "some stuff" ^ if 10 &gt; 20 [elide print "Oh my."] else [&lt;else&gt;]
== &lt;else&gt;
</code></pre>
<p>And it means that <strong><code>eval []</code></strong> actually returns GHOST!.  But since EVAL returns ANY-ATOM? then it will typically give you VOID.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

                <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../../surprising-ghosts-what-combinators-vanish/2437/3.html">&quot;Surprising&quot; Ghosts: What Combinators Vanish?</a>
                        <meta itemprop='position' content='2'>
                      </div>
                </div>
          </div>
    </div>

      <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
          <span itemprop='name'>
            <a itemprop="url" href="../2171.html#post_3">show post in topic</a>
          </span>
      </div>

    




    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/guidelines' itemprop="url">Guidelines </a>
        </span>
      </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://rebol.metaeducation.com/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://rebol.metaeducation.com/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    
  </body>
  
</html>
