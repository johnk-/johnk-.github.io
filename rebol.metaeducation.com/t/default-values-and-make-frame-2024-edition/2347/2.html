<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Default Values and MAKE FRAME! - 2024 Edition - #2 by hostilefork - Functions - AltRebol</title>
    <meta name="description" content="NOTE: The below summarizes history with some adjustments made for simplification purposes.  See posts in Archive regarding frames for all the exact detours. 


Something like this has worked ever since the first FRAME!: &amp;hellip;">
    <meta name="generator" content="Discourse 3.5.0.beta6-dev - https://github.com/discourse/discourse version 623cde985b21c2ed812b83d3ea94f69231613718">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" media="all" content="#fff">

<meta name="color-scheme" content="light">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, viewport-fit=cover">
<link rel="canonical" href="../2347.html" />

<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="AltRebol Search">

    <link href="https://rebol.metaeducation.com/stylesheets/color_definitions_base__2_ceb61c279a74dfa3cef6a62f7784988102abec82.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" class="light-scheme"/>

<link href="https://rebol.metaeducation.com/stylesheets/common_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="common"  />

  <link href="https://rebol.metaeducation.com/stylesheets/desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="desktop"  />



    <link href="https://rebol.metaeducation.com/stylesheets/chat_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="chat"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-details_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-details"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-lazy-videos_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-local-dates_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-narrative-bot_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-presence_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-presence"  />
    <link href="https://rebol.metaeducation.com/stylesheets/docker_manager_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="docker_manager"  />
    <link href="https://rebol.metaeducation.com/stylesheets/footnote_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="footnote"  />
    <link href="https://rebol.metaeducation.com/stylesheets/poll_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="poll"  />
    <link href="https://rebol.metaeducation.com/stylesheets/spoiler-alert_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="spoiler-alert"  />
    <link href="https://rebol.metaeducation.com/stylesheets/chat_desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="chat_desktop"  />
    <link href="https://rebol.metaeducation.com/stylesheets/poll_desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="https://rebol.metaeducation.com/stylesheets/common_theme_2_57fe803ed5a41e9f7d94086afaf66a1aab57d9ae.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="common_theme" data-theme-id="2" data-theme-name="default"/>
    

    
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;Default Values and MAKE FRAME! - 2024 Edition&#39;" href="../2347.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://rebol.metaeducation.com/t/default-values-and-make-frame-2024-edition/2347/2" />
<meta name="twitter:url" content="https://rebol.metaeducation.com/t/default-values-and-make-frame-2024-edition/2347/2" />
<meta property="og:title" content="Default Values and MAKE FRAME! - 2024 Edition" />
<meta name="twitter:title" content="Default Values and MAKE FRAME! - 2024 Edition" />
<meta property="og:description" content="Still paying off technical debt, here...this frame stuff has been agonizing.   As part of trying out this &quot;two unspecialized forms&quot; concept, I started tightening the screws so I can better reason about the invariants.  It quickly exposed something fundamental, that I might classify as &quot;genuinely interesting&quot;.  Consider the native for testing if something is an INTEGER?.  Let&#39;s say it&#39;s able to accept ANY-VALUE?, and it should not return true for PARAMETER! antiforms:  /integer?: native [return: ..." />
<meta name="twitter:description" content="Still paying off technical debt, here...this frame stuff has been agonizing.   As part of trying out this &quot;two unspecialized forms&quot; concept, I started tightening the screws so I can better reason about the invariants.  It quickly exposed something fundamental, that I might classify as &quot;genuinely interesting&quot;.  Consider the native for testing if something is an INTEGER?.  Let&#39;s say it&#39;s able to accept ANY-VALUE?, and it should not return true for PARAMETER! antiforms:  /integer?: native [return: ..." />
<meta property="og:article:section" content="Development" />
<meta property="og:article:section:color" content="25AAE2" />
<meta property="og:article:section" content="Functions" />
<meta property="og:article:section:color" content="25AAE2" />
<meta property="article:published_time" content="2024-12-08T11:56:28+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler ">
    
    <header>
  <a href="https://rebol.metaeducation.com/">AltRebol</a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="../2347.html">Default Values and MAKE FRAME! - 2024 Edition</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://rebol.metaeducation.com/c/development/functions/59" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://rebol.metaeducation.com/c/development/functions/59" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Functions</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  

    <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='Default Values and MAKE FRAME! - 2024 Edition'>
      <link itemprop='url' href='../2347.html'>
      <meta itemprop='datePublished' content='2024-12-07T20:48:23Z'>
        <meta itemprop='articleSection' content='Functions'>
      <meta itemprop='keywords' content=''>
      <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
        <meta itemprop='name' content='AltRebol'>
          <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
            <meta itemprop='url' content='https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
          </div>
      </div>

          <span itemprop='author' itemscope itemtype="http://schema.org/Person">
            <meta itemprop='name' content='hostilefork'>
            <link itemprop='url' rel='nofollow' href='https://rebol.metaeducation.com/u/hostilefork'>
          </span>
        <meta itemprop='text' content='NOTE: The below summarizes history with some adjustments made for simplification purposes.  See posts in Archive regarding frames for all the exact detours. 


Something like this has worked ever since the first FRAME!: &amp;hellip;'>

          <div id='post_2' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://rebol.metaeducation.com/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2024-12-08T11:56:28Z' class='post-time'>
                    December 8, 2024, 11:56am
                  </time>
                  <meta itemprop='dateModified' content='2025-04-20T17:59:19Z'>
              <span itemprop='position'>2</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p><em>Still paying off technical debt, here...this frame stuff has been agonizing.</em></p>
<aside class="quote no-group" data-username="hostilefork" data-post="1" data-topic="2347">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="../../../user_avatar/rebol.metaeducation.com/hostilefork/48/421_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p>It would mean sacrificing another value to have to be passed ^META. Though bear in mind, most of the damage is done from having one form: e.g. a function like SET is having to take its value ^META already in order to be able to set things to antiform PARAMETER!.</p>
</blockquote>
</aside>
<p>As part of trying out this "two unspecialized forms" concept, I started tightening the screws so I can better reason about the invariants.  It quickly exposed something fundamental, that I might classify as <em>"genuinely interesting"</em>.</p>
<p>Consider the native for testing if something is an INTEGER?.  Let's say it's able to accept ANY-VALUE?, and it should not return true for PARAMETER! antiforms:</p>
<pre><code>/integer?: native [return: [logic?] value [any-value?]]
</code></pre>
<p>We don't want to be in a situation where a function like this needs to take its argument as ^META, because that's a trap we don't want to fall in... where <em>every</em> parameter has to be meta.  You don't want the edge case to spread like that.</p>
<p>But now we have to ask: what if you have an antiform PARAMETER!, and you ask INTEGER? of it.  <img src="../../../images/emoji/twitter/face_with_diagonal_mouth.png%3Fv=14" title=":face_with_diagonal_mouth:" class="emoji" alt=":face_with_diagonal_mouth:" loading="lazy" width="20" height="20"></p>
<p>The options are limited to basically 2 choices:</p>
<ol>
<li>
<p>Antiform PARAMETER! is removed from the ANY-VALUE? class.  That means testing INTEGER? on an antiform parameter would trigger an abrupt failure.</p>
</li>
<li>
<p>Antiform PARAMETER! is made legal in EVAL frame contexts to mean "itself" (while its meaning in RUN frame contexts is "unspecialized").</p>
</li>
</ol>
<p>When you put it that way, I get bad vibes from (1).</p>
<p>Though (2) has consequences that I've explained.  Any function that takes antiform PARAMETER! which doesn't take it ^META will not be able to create <em>partial specializations</em> that fix arguments as antiform parameters, while still gathering other parameters.  You will only be able to use antiform parameters in <em>full specializations</em>.</p>
<p>But I realized you -could- create partial specializations on functions taking antiform parameters non-META.  You'd just have to get creative: make a variant with the parameter adjusted to be ^META and then, use an ENCLOSE...after all the arguments are fulfilled, unmeta it before passing through to the original function.</p>
<p><em>Having <strong>a</strong> way to do it is good enough for me.</em>  I do not think that partial specializations to antiform parameters is going to be something anyone does frequently (or ever, probably, outside of the test files I'm going to write that prove it can be done.)</p>
<h2><a name="p-7966-down-to-just-one-meta-exception-trash-1" class="anchor" href="2.html#p-7966-down-to-just-one-meta-exception-trash-1"></a>Down To Just One ^META Exception: <em>TRASH</em> (<code>~</code>)</h2>
<p>A "genuinely interesting" aspect of this is that it brings a renewed motivation to the existence of the unset state.  It has been challenged before:</p>
<p><strong><a href="https://rebol.metaeducation.com/t/why-or-why-not-have-unset-in-rebol-like-languages/113">Why Have an "Unset State" in Rebol-like Languages?</a></strong></p>
<p>I actually was reflecting on the question of the necessity of "trash" once I realized that protecting-you-from-typos is no longer one of the reasons, due to binding becoming "strict".  So I had a panicky moment where I wondered if <code>~null~</code> and <code>~</code> antiforms should be merged, after all.  <img src="../../../images/emoji/twitter/worried.png%3Fv=14" title=":worried:" class="emoji" alt=":worried:" loading="lazy" width="20" height="20"></p>
<p>Almost certainly not... <em>but</em> with PARAMETER! antiforms now in frames as "themselves", something has to give.  There's a strong incentive to pare that back to as few states as possible... and hence, just one thing: TRASH.</p>
<p>Note it's thus subject to the limitations of (1) above, and hence <em>you can't call INTEGER? on TRASH</em>.</p>
<p><strong>So TRASH becomes (as it was) the one stable antiform state that a variable can hold, which cannot be accepted by functions that don't take ^META parameters.</strong></p>
<p>If we didn't do something special, the error you'd get would look like:</p>
<pre><code>&gt;&gt; integer? ~
** Error: INTEGER?'s VALUE argument is unspecified (~ antiform)
</code></pre>
<p>Maybe that's good enough, though the argument-gathering machinery could pre-empt the FRAME! typechecking layer with a clearer message:</p>
<pre><code>&gt;&gt; integer? ~
** Error: INTEGER?'s VALUE argument can't be TRASH (~ antiform)
</code></pre>
<p>That may be seem like splitting hairs, but I don't think it is.</p>
<h2><a name="p-7966-casualty-unblocks-eval-of-unspecialized-frames-2" class="anchor" href="2.html#p-7966-casualty-unblocks-eval-of-unspecialized-frames-2"></a>Casualty: Unblocks EVAL of Unspecialized FRAME!s</h2>
<aside class="quote no-group" data-username="hostilefork" data-post="1" data-topic="2347">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="../../../user_avatar/rebol.metaeducation.com/hostilefork/48/421_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p>Antiform ~ would still have to turn into ~null~ if EVAL found it in a refinement slot. But I'm not sure PARAMETER! antiforms would need to do that too. One could argue that you should never be EVAL'ing a frame with antiform parameters in it, so it could be a sort of safety mechanism (?).</p>
</blockquote>
</aside>
<p>So with antiform parameters being treated as-is under EVAL, then when you don't use MAKE FRAME! and get the slots filled with trash, you get the slots filled with antiform parameters.  And that means this would happen:</p>
<pre><code>&gt;&gt; f: copy unrun parameter?/
== #[frame! [value: ~#[parameter! [any-value?]]~]

&gt;&gt; eval f
== ~okay~  ; anti
</code></pre>
<p>I can live with this.  COPY on an action's FRAME! is something you should do only if you're building something you mean to run as an action, and if you EVAL it instead, that's kind of your fault.</p>
<p>Maybe there could be some kind of prevention of this, but I'd be loathe to see the FRAME! type bifurcate into "EVAL-able frames" and "RUN-able frames".</p>
<p>Anyway, this is <em>far</em> less a concern with MAKE FRAME! unsetting the slots, than it was when those were antiform parameters.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

                <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../../performance-implications-of-antiform-frame-is-action/2083/5.html">Performance Implications of Antiform-FRAME!-is-Action</a>
                        <meta itemprop='position' content='1'>
                      </div>
                </div>
          </div>
    </div>

      <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
          <span itemprop='name'>
            <a itemprop="url" href="../2347.html#post_2">show post in topic</a>
          </span>
      </div>

    




    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/guidelines' itemprop="url">Guidelines </a>
        </span>
      </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://rebol.metaeducation.com/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://rebol.metaeducation.com/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    
  </body>
  
</html>
