<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Soft Quoted Branching: Light, Elegant, Fast - Feature Discover - AltRebol</title>
    <meta name="description" content="It&amp;#39;s uncommon to use expressions that evaluate to branches passed to conditionals.  And when you do use one, you probably don&amp;#39;t mind putting it in a GROUP! (especially considering that 99% of the time in the far more com&amp;hellip;">
    <meta name="generator" content="Discourse 3.5.0.beta6-dev - https://github.com/discourse/discourse version 623cde985b21c2ed812b83d3ea94f69231613718">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" media="all" content="#fff">

<meta name="color-scheme" content="light">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, viewport-fit=cover">
<link rel="canonical" href="1020.html" />

<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="AltRebol Search">

    <link href="https://rebol.metaeducation.com/stylesheets/color_definitions_base__2_ceb61c279a74dfa3cef6a62f7784988102abec82.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" class="light-scheme"/>

<link href="https://rebol.metaeducation.com/stylesheets/common_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="common"  />

  <link href="https://rebol.metaeducation.com/stylesheets/desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="desktop"  />



    <link href="https://rebol.metaeducation.com/stylesheets/chat_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="chat"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-details_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-details"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-lazy-videos_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-local-dates_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-narrative-bot_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-presence_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-presence"  />
    <link href="https://rebol.metaeducation.com/stylesheets/docker_manager_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="docker_manager"  />
    <link href="https://rebol.metaeducation.com/stylesheets/footnote_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="footnote"  />
    <link href="https://rebol.metaeducation.com/stylesheets/poll_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="poll"  />
    <link href="https://rebol.metaeducation.com/stylesheets/spoiler-alert_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="spoiler-alert"  />
    <link href="https://rebol.metaeducation.com/stylesheets/chat_desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="chat_desktop"  />
    <link href="https://rebol.metaeducation.com/stylesheets/poll_desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="https://rebol.metaeducation.com/stylesheets/common_theme_2_57fe803ed5a41e9f7d94086afaf66a1aab57d9ae.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="common_theme" data-theme-id="2" data-theme-name="default"/>
    

    
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;Soft Quoted Branching: Light, Elegant, Fast&#39;" href="1020.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://rebol.metaeducation.com/t/soft-quoted-branching-light-elegant-fast/1020" />
<meta name="twitter:url" content="https://rebol.metaeducation.com/t/soft-quoted-branching-light-elegant-fast/1020" />
<meta property="og:title" content="Soft Quoted Branching: Light, Elegant, Fast" />
<meta name="twitter:title" content="Soft Quoted Branching: Light, Elegant, Fast" />
<meta property="og:description" content="It&#39;s uncommon to use expressions that evaluate to branches passed to conditionals.  And when you do use one, you probably don&#39;t mind putting it in a GROUP! (especially considering that 99% of the time in the far more common cases you were willing to put it in a BLOCK!).  So Ren-C now uses that fact--plus generalized quoting--to allow for a briefer and faster way to evaluate to literals in your conditionals:  &gt;&gt; if okay &#39;[block as data] == [block as data]  Simply pass in a QUOTED! item of any kin..." />
<meta name="twitter:description" content="It&#39;s uncommon to use expressions that evaluate to branches passed to conditionals.  And when you do use one, you probably don&#39;t mind putting it in a GROUP! (especially considering that 99% of the time in the far more common cases you were willing to put it in a BLOCK!).  So Ren-C now uses that fact--plus generalized quoting--to allow for a briefer and faster way to evaluate to literals in your conditionals:  &gt;&gt; if okay &#39;[block as data] == [block as data]  Simply pass in a QUOTED! item of any kin..." />
<meta property="og:article:section" content="Usage" />
<meta property="og:article:section:color" content="3AB54A" />
<meta property="og:article:section" content="Feature Discover" />
<meta property="og:article:section:color" content="3AB54A" />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="3 mins ðŸ•‘" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="3 â¤" />
<meta property="article:published_time" content="2019-01-18T12:56:02+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler ">
    
    <header>
  <a href="https://rebol.metaeducation.com/">AltRebol</a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="1020.html">Soft Quoted Branching: Light, Elegant, Fast</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://rebol.metaeducation.com/c/usage/feature-discover/24" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #3AB54A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Usage</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://rebol.metaeducation.com/c/usage/feature-discover/24" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #3AB54A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Feature Discover</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  

    <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='Soft Quoted Branching: Light, Elegant, Fast'>
      <link itemprop='url' href='1020.html'>
      <meta itemprop='datePublished' content='2019-01-18T12:56:02Z'>
        <meta itemprop='articleSection' content='Feature Discover'>
      <meta itemprop='keywords' content=''>
      <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
        <meta itemprop='name' content='AltRebol'>
          <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
            <meta itemprop='url' content='https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
          </div>
      </div>


          <div id='post_1'  class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://rebol.metaeducation.com/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>

                <link itemprop="mainEntityOfPage" href="1020.html">


              <span class="crawler-post-infos">
                  <time  datetime='2019-01-18T12:56:02Z' class='post-time'>
                    January 18, 2019, 12:56pm
                  </time>
                  <meta itemprop='dateModified' content='2024-09-21T18:57:50Z'>
              <span itemprop='position'>1</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>It's uncommon to use expressions that evaluate to branches passed to conditionals.  And when you do use one, you probably don't mind putting it in a GROUP! (especially considering that 99% of the time in the <em>far</em> more common cases you were willing to put it in a BLOCK!).</p>
<p>So Ren-C now uses that fact--plus generalized quoting--to allow for a briefer and faster way to evaluate to literals in your conditionals:</p>
<pre><code>&gt;&gt; if okay '[block as data]
== [block as data]
</code></pre>
<p>Simply pass in a QUOTED! item of any kind, and that item will be what a branch evaluates to.  It will be one less level of quoting than what you pass in:</p>
<pre><code>&gt;&gt; if okay '&lt;tag&gt;
== &lt;tag&gt;
</code></pre>
<p>Previous attempts to get something like this used an /ONLY refinement.  But this lets you mix and match in the same operator, as opposed to switching the operator into a "mode":</p>
<pre><code>&gt;&gt; either okay '[1 + 2] [1 + 2]
== [1 + 2]

&gt;&gt; either null '[1 + 2] [1 + 2]
== 3
</code></pre>
<h2><a name="p-2979-it-solves-some-problems-for-case-1" class="anchor" href="1020.html#p-2979-it-solves-some-problems-for-case-1"></a>It Solves Some Problems for CASE</h2>
<p>Historically, CASE was more lax in accepting types than the corresponding IFs would be:</p>
<pre><code>&gt;&gt; case [1 = 1 &lt;foo&gt;]
== &lt;foo&gt;
</code></pre>
<p>It would allow the by-products of arbitrary evaluation to be used:</p>
<pre><code>&gt;&gt; word: &lt;foo&gt;
&gt;&gt; case [1 = 1 word]
== &lt;foo&gt;
</code></pre>
<p>Sometimes this resulted in double-evaluation:</p>
<pre><code>&gt;&gt; word: [print "surprise"]
&gt;&gt; case [1 = 1 word]
surprise
== true
</code></pre>
<p>The dodgy nature of this "may be a double evaluation, may be not" with no way to tell at source level raised some concerns, which are laid out in the <a href="../backpedaling-on-non-block-branches/476.html">"backpedaling on non-block branches"</a> post.</p>
<p>The combination of soft quoting and generalized quoting lets the same patterns that work for IF work in CASE.  It lowers the risks in a legible way:</p>
<pre><code>&gt;&gt; case [1 = 1 '&lt;foo&gt;]
== &lt;foo&gt;
</code></pre>
<h2><a name="p-2979-its-faster-and-more-efficient-2" class="anchor" href="1020.html#p-2979-its-faster-and-more-efficient-2"></a>It's Faster and More Efficient</h2>
<p>Quoting is done with a byte in cells.  So you can count up to 254 levels of quoting without really costing anything.  <em>(If you're wondering why not 255 levels since a byte can be from 0..255, it's because 255 is reserved for "isotopes".)</em></p>
<p>So <strong>'[x]</strong> costs less storage (and has better locality with the surrounding cells) than <strong>[[x]]</strong>.</p>
<p>Outside of the reduced storage, it's also lighter on the evaluator, because it doesn't have to push an evaluator frame to run the block!</p>
<h2><a name="p-2979-the-consequences-3" class="anchor" href="1020.html#p-2979-the-consequences-3"></a>The consequences</h2>
<p>There were very few pieces of code in the Ren-C repo that were affected.  One was a help test.  It wanted to generate a real-world block to run, and didn't want to call DO for some reason:</p>
<pre><code>for-each w words of lib [
    dump w
    if not set? w [continue]
    if action? get w
        compose [help (w)]   ; errors now...IF thinks the COMPOSE word! is branch
    else [
        help (get w)
    ]
]
</code></pre>
<p>It's easy enough to change that to <code>(compose [help (w)])</code>...this kind of usage is very rare.</p>
<p>The one common case of passing code to a conditional originated from Ren-C...the use of lambdas that could take the argument of what drove the conditional:</p>
<pre><code> trap [1 / 0] then error -&gt; [print [error]]
</code></pre>
<p>So you have to put it in a GROUP!:</p>
<pre><code> trap [1 / 0] then (error -&gt; [print [error]])
</code></pre>
<p>I'm pretty sure this can be rethought to work as before, given the strategy of "right quoting always wins".  But the evaluator has some kind of strict horse-blinder rules that guide its design, so not all things are possible.  We'll see.</p>
<blockquote>
<p><strong>UPDATE 2020</strong>: The required rules have been implemented, and hard quoted left parameters on the right win in this instance, so the group is not necessary.  <img src="../../images/emoji/twitter/sushi.png%3Fv=14" title=":sushi:" class="emoji" alt=":sushi:" loading="lazy" width="20" height="20"></p>
</blockquote>
<p>Even if it couldn't get fixed, in the scheme of things it's worth it.  And it isn't like people aren't used to putting branches in delimiters for blocks anyway!</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="1" />
              <span class='post-likes'>1 Like</span>
            </div>

                <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../stylistic-questions-and-soft-quoted-branching/1220.html">Stylistic Questions and Soft-Quoted Branching</a>
                        <meta itemprop='position' content='1'>
                      </div>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../resurrecting-the-if-combinator-as-when/2253.html">Resurrecting the &quot;IF&quot; Combinator... as WHEN</a>
                        <meta itemprop='position' content='2'>
                      </div>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../plain-group-branching-only-run-if-branch-taken/1373/4.html">Plain GROUP! &amp; Branching: Only Run If Branch Taken?</a>
                        <meta itemprop='position' content='3'>
                      </div>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../why-doesnt-ren-c-support-logic-for-pick/2487/2.html">Why Doesn&#39;t Ren-C Support LOGIC! for PICK ?</a>
                        <meta itemprop='position' content='4'>
                      </div>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../backpedaling-on-non-block-branches/476.html">Why Not Allow non-BLOCK! (and non-QUOTED!) Branches?</a>
                        <meta itemprop='position' content='5'>
                      </div>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../insanity-level-for-the-mu-library-in-rebmu/2497.html">&quot;Insanity Level&quot; for The Mu-Library In Rebmu</a>
                        <meta itemprop='position' content='6'>
                      </div>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../mining-history-for-anything-relevant-carls-rebol-blog/2197.html">Mining History For Anything Relevant: Carl&#39;s Rebol Blog</a>
                        <meta itemprop='position' content='7'>
                      </div>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../get-group-s-in-parse-mean-execute-and-splice-as-rule/968/14.html">GET-GROUP!s in PARSE mean &quot;execute and splice as rule&quot;</a>
                        <meta itemprop='position' content='8'>
                      </div>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../reds-design-issues-wiki/1282.html">Red&#39;s Design Issues Wiki</a>
                        <meta itemprop='position' content='9'>
                      </div>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../plain-group-branching-only-run-if-branch-taken/1373.html">Plain GROUP! &amp; Branching: Only Run If Branch Taken?</a>
                        <meta itemprop='position' content='10'>
                      </div>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../plain-group-branching-only-run-if-branch-taken/1373/2.html">Plain GROUP! &amp; Branching: Only Run If Branch Taken?</a>
                        <meta itemprop='position' content='11'>
                      </div>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../theory-of-symbols-and-repurposing-and/834.html">Theory of Symbols and Repurposing `? ?` and `! !`</a>
                        <meta itemprop='position' content='12'>
                      </div>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../quoted-arrives-formerly-known-as-lit-bit/995/2.html">QUOTED! arrives (formerly known as &quot;lit bit&quot;)</a>
                        <meta itemprop='position' content='13'>
                      </div>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../switch-and-soft-quoted-branches/1176.html">SWITCH and soft-quoted branches</a>
                        <meta itemprop='position' content='14'>
                      </div>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../trust-the-users-judgment-when-you-can/2211.html">Trust the User&#39;s Judgment... *When You Can*</a>
                        <meta itemprop='position' content='15'>
                      </div>
                </div>
          </div>
          <div id='post_2' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://rebol.metaeducation.com/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2019-01-22T00:44:46Z' class='post-time'>
                    January 22, 2019, 12:44am
                  </time>
                  <meta itemprop='dateModified' content='2024-10-01T00:38:20Z'>
              <span itemprop='position'>2</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Here's another great argument for soft quoted branches:</p>
<pre><code>&gt;&gt; 1 + either okay [2] [3] + 4
== 7

&gt;&gt; 1 + either null [2] [3] + 4
== 8
</code></pre>
<p>If you try that in Rebol2 or Red, you get:</p>
<pre><code>red&gt; 1 + either true [2] [3] + 4
** Script Error: + does not allow block! for its value1 argument
</code></pre>
<p>In Ren-C you can even use IF/ELSE interchangeably with EITHER.  (This interchangeability now works 100% of the time):</p>
<pre><code> &gt;&gt; 1 + if okay [2] else [3] + 4
 == 7

 &gt;&gt; 1 + if null [2] else [3] + 4
 == 8
</code></pre>
<p>This might point to using soft quoting for more things in the system where you think it is infrequent that people will be passing constructed meta-code in.</p>
<pre><code>&gt;&gt; 1 + switch type of #x [issue! [2] tag! [3]] + 4
;... wouldn't it be nice if this were 7?
</code></pre>
<p>It's a bit touchy-feely to make that call.  You don't want to have to say <strong>compose (reduce [...])</strong> instead of just <strong>compose reduce [...]</strong>, but you're looking to get a <em>block</em> out of it.  How many evaluative infix operators want a block out of their left hand side?  I think if your construct is explicitly used in meta-coding, you want to bias it to fitting in with other meta-coding without needing to put arguments in groups.</p>
<p>But things like CASE and SWITCH might benefit from soft-quoting their case lists and switch lists, to favor the idea of fitting into more evaluative scenarios for using their product.  While not being "a branch" per se, their lists are a kind of a "proxy for branches".</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="1" />
              <span class='post-likes'>1 Like</span>
            </div>

          </div>
          <div id='post_3' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://rebol.metaeducation.com/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2024-02-08T20:27:52Z' class='post-time'>
                    February 8, 2024,  8:27pm
                  </time>
                  <meta itemprop='dateModified' content='2024-09-21T18:59:39Z'>
              <span itemprop='position'>3</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <aside class="quote no-group" data-username="hostilefork" data-post="1" data-topic="1020">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="../../user_avatar/rebol.metaeducation.com/hostilefork/48/421_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p>It's uncommon to use expressions that evaluate to branches passed to conditionals. And when you do use one, you probably don't mind putting it in a GROUP! (especially considering that 99% of the time in the <em>far</em> more common cases you were willing to put it in a BLOCK!).</p>
<p>So Ren-C now uses that fact--plus generalized quoting--to allow for a briefer and faster way to evaluate to literals in your conditionals:</p>
<pre data-code-wrap="plaintext"><code class="lang-plaintext">&gt;&gt; if okay '[block as data]
== [block as data]
</code></pre>
</blockquote>
</aside>
<p>So-called "soft-quoted branching" now runs up against the question of quoting's meaning for binding.</p>
<p>Generally we would assume the example above would mean you would get an unbound block (or, more accurately, the block with the binding it has... which is usually nothing if it's source).</p>
<p>This means it's semantically different from:</p>
<pre><code>if okay [[block as data]]
</code></pre>
<p>Because there, the block is evaluated... and under that evaluation, receives the current binding.</p>
<p>It would instead be the equivalent of:</p>
<pre><code>if okay ['[block as data]]
</code></pre>
<p>We can now consider the potential meaning of:</p>
<pre><code>if okay $[block as data]
</code></pre>
<p>This could be the real equivalent of <strong>if true [[block as data]]</strong>.</p>
<p>$ forms aren't available for all types the way quoted forms are, but have the curiously appropriate property (in the current model) that they are available for all <em>bindable</em> types... so we can imagine the meaning of $ branches being "as is, bound".</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="1" />
              <span class='post-likes'>1 Like</span>
            </div>

                <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../uparse-case-study-escaping-in-strings/1573/2.html">UPARSE Case Study: Escaping In Strings</a>
                        <meta itemprop='position' content='1'>
                      </div>
                </div>
          </div>
          <div id='post_5' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://rebol.metaeducation.com/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2024-10-01T00:30:02Z' class='post-time'>
                    October 1, 2024, 12:30am
                  </time>
                  <meta itemprop='dateModified' content='2024-10-01T00:34:19Z'>
              <span itemprop='position'>5</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <h3><a name="p-7806-possible-snag-for-soft-quoted-branching-1" class="anchor" href="1020.html#p-7806-possible-snag-for-soft-quoted-branching-1"></a>Possible Snag For Soft-Quoted Branching?</h3>
<p>That snag <a href="../caching-binding-lookup-and-attachment-binding/2128/6.html">is the growing need for WRAP</a>.</p>
<p>Previously it wasn't too common you wanted to pass an evaluated branch into a function.  Now it might be common.</p>
<pre><code>if some-condition [
    let x: ...
    let y: ...
]
</code></pre>
<p>=&gt;</p>
<pre><code>if some-condition wrap [
    x: ...
    y: ...
]
</code></pre>
<p>Soft-quoted branching requires you to put that WRAP in a group.</p>
<pre><code>if blah blah blah (wrap [
    x: ...
    y: ...
])
</code></pre>
<p>Not the end of the world.  But all things being equal, I'd prefer:</p>
<pre><code>if (blah blah blah) wrap [
    x: ...
    y: ...
]
</code></pre>
<p>This isn't the first challenge to soft-quoted branching, but it's the strongest one yet.</p>
<p>I'm not fully ready to throw it out the window, and I've outlined points of why they're important in this thread.  But this is definitely giving me second thoughts...so hedging now.  <img src="../../images/emoji/twitter/thinking.png%3Fv=14" title=":thinking:" class="emoji" alt=":thinking:" loading="lazy" width="20" height="20"></p>
<p>Without soft-quoted branching, the branches could still accept quoted items, they'd just have to be doubly quoted to survive the eval... or use something like JUST or THE</p>
<pre><code>&gt;&gt; if okay ''x
== x

&gt;&gt; if okay just 'x
== x
</code></pre>
<p>But <strong><code>if okay ['x]</code></strong> is better looking than either of those, albeit slower.  (<a href="../intrinsics-functions-without-frames/2050.html">JUST is an intrinsic</a>).</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
          <div id='post_6' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://rebol.metaeducation.com/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2024-10-01T00:46:53Z' class='post-time'>
                    October 1, 2024, 12:46am
                  </time>
                  <meta itemprop='dateModified' content='2024-10-01T00:46:53Z'>
              <span itemprop='position'>6</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <aside class="quote no-group" data-username="hostilefork" data-post="5" data-topic="1020">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="../../user_avatar/rebol.metaeducation.com/hostilefork/48/421_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p>Soft-quoted branching requires you to put that WRAP in a group.</p>
<pre data-code-wrap="plaintext"><code class="lang-plaintext">if blah blah blah (wrap [
    x: ...
    y: ...
])
</code></pre>
<p>Not the end of the world. But all things being equal, I'd prefer:</p>
<pre data-code-wrap="plaintext"><code class="lang-plaintext">if (blah blah blah) wrap [
    x: ...
    y: ...
]
</code></pre>
</blockquote>
</aside>
<h2><a name="p-7807-but-no-theres-a-reason-for-style-1-1" class="anchor" href="1020.html#p-7807-but-no-theres-a-reason-for-style-1-1"></a>BUT NO!  THERE'S A REASON FOR STYLE 1</h2>
<p><em><strong>You don't want to pay for the WRAP if the branch is not taken.</strong></em></p>
<p>Unfortunately, given the nature of soft-quoting at the moment, that requires:</p>
<pre><code>if blah blah blah @(wrap [
    x: ...
    y: ...
])
</code></pre>
<p><a href="../plain-group-branching-only-run-if-branch-taken/1373.html">I've gone back and forth on the issue of whether group branches run unconditionally.</a></p>
<p>But looking at this concrete case now, I really <em>do not</em> like the @ being necessary there.  Unfortunately, it's not as easy as saying "take the branch as a hard literal" because <a href="../implicit-escaping-to-tiebreak-literal-arguments/2290.html">doing so ruins the tiebreaking that lets you put lambdas in branch slots</a>.</p>
<p>Going to have to sleep on it.  <img src="../../images/emoji/twitter/sleeping.png%3Fv=14" title=":sleeping:" class="emoji" alt=":sleeping:" loading="lazy" width="20" height="20"> But looks like soft literal branches are safe.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
    </div>


    




    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/guidelines' itemprop="url">Guidelines </a>
        </span>
      </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://rebol.metaeducation.com/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://rebol.metaeducation.com/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    
  </body>
  
</html>
