<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>INTERSECT/UNION/etc. Give Another Win For Isotopes! - Math - AltRebol</title>
    <meta name="description" content="The set (collection) operations in Rebol are useful. 
rebol2&amp;gt;&amp;gt; set1: [a b c]
rebol2&amp;gt;&amp;gt; set2: [b c d]

rebol2&amp;gt;&amp;gt; intersect set1 set2
== [b c]

When I first encountered it, I thought it strange that it wasn&amp;#39;t mutating the fi&amp;hellip;">
    <meta name="generator" content="Discourse 3.5.0.beta6-dev - https://github.com/discourse/discourse version 623cde985b21c2ed812b83d3ea94f69231613718">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" media="all" content="#fff">

<meta name="color-scheme" content="light">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, viewport-fit=cover">
<link rel="canonical" href="2380.html" />

<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="AltRebol Search">

    <link href="https://rebol.metaeducation.com/stylesheets/color_definitions_base__2_ceb61c279a74dfa3cef6a62f7784988102abec82.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" class="light-scheme"/>

<link href="https://rebol.metaeducation.com/stylesheets/common_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="common"  />

  <link href="https://rebol.metaeducation.com/stylesheets/desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="desktop"  />



    <link href="https://rebol.metaeducation.com/stylesheets/chat_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="chat"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-details_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-details"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-lazy-videos_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-local-dates_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-narrative-bot_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-presence_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-presence"  />
    <link href="https://rebol.metaeducation.com/stylesheets/docker_manager_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="docker_manager"  />
    <link href="https://rebol.metaeducation.com/stylesheets/footnote_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="footnote"  />
    <link href="https://rebol.metaeducation.com/stylesheets/poll_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="poll"  />
    <link href="https://rebol.metaeducation.com/stylesheets/spoiler-alert_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="spoiler-alert"  />
    <link href="https://rebol.metaeducation.com/stylesheets/chat_desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="chat_desktop"  />
    <link href="https://rebol.metaeducation.com/stylesheets/poll_desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="https://rebol.metaeducation.com/stylesheets/common_theme_2_57fe803ed5a41e9f7d94086afaf66a1aab57d9ae.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="common_theme" data-theme-id="2" data-theme-name="default"/>
    

    
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;INTERSECT/UNION/etc. Give Another Win For Isotopes!&#39;" href="2380.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://rebol.metaeducation.com/t/intersect-union-etc-give-another-win-for-isotopes/2380" />
<meta name="twitter:url" content="https://rebol.metaeducation.com/t/intersect-union-etc-give-another-win-for-isotopes/2380" />
<meta property="og:title" content="INTERSECT/UNION/etc. Give Another Win For Isotopes!" />
<meta name="twitter:title" content="INTERSECT/UNION/etc. Give Another Win For Isotopes!" />
<meta property="og:description" content="The set (collection) operations in Rebol are useful.  rebol2&gt;&gt; set1: [a b c] rebol2&gt;&gt; set2: [b c d]  rebol2&gt;&gt; intersect set1 set2 == [b c]  When I first encountered it, I thought it strange that it wasn&#39;t mutating the first argument.  rebol2&gt;&gt; set1 == [a b c]  ; not modified by INTERSECT  Everywhere else in Rebol it seemed when you had a verb like that (APPEND, REVERSE, etc.) it was modifying.  What was special about INTERSECT that it didn&#39;t?  Anyway, that was just the first thing I noticed.  Bu..." />
<meta name="twitter:description" content="The set (collection) operations in Rebol are useful.  rebol2&gt;&gt; set1: [a b c] rebol2&gt;&gt; set2: [b c d]  rebol2&gt;&gt; intersect set1 set2 == [b c]  When I first encountered it, I thought it strange that it wasn&#39;t mutating the first argument.  rebol2&gt;&gt; set1 == [a b c]  ; not modified by INTERSECT  Everywhere else in Rebol it seemed when you had a verb like that (APPEND, REVERSE, etc.) it was modifying.  What was special about INTERSECT that it didn&#39;t?  Anyway, that was just the first thing I noticed.  Bu..." />
<meta property="og:article:section" content="Domains" />
<meta property="og:article:section:color" content="F1592A" />
<meta property="og:article:section" content="Math" />
<meta property="og:article:section:color" content="F1592A" />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="1 ❤" />
<meta property="article:published_time" content="2025-03-24T13:23:58+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler ">
    
    <header>
  <a href="https://rebol.metaeducation.com/">AltRebol</a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="2380.html">INTERSECT/UNION/etc. Give Another Win For Isotopes!</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://rebol.metaeducation.com/c/domains/math/60" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #F1592A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Domains</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://rebol.metaeducation.com/c/domains/math/60" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #F1592A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Math</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  

    <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='INTERSECT/UNION/etc. Give Another Win For Isotopes!'>
      <link itemprop='url' href='2380.html'>
      <meta itemprop='datePublished' content='2025-03-24T13:23:58Z'>
        <meta itemprop='articleSection' content='Math'>
      <meta itemprop='keywords' content=''>
      <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
        <meta itemprop='name' content='AltRebol'>
          <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
            <meta itemprop='url' content='https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
          </div>
      </div>


          <div id='post_1'  class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://rebol.metaeducation.com/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>

                <link itemprop="mainEntityOfPage" href="2380.html">


              <span class="crawler-post-infos">
                  <time  datetime='2025-03-24T13:23:58Z' class='post-time'>
                    March 24, 2025,  1:23pm
                  </time>
                  <meta itemprop='dateModified' content='2025-03-24T13:23:58Z'>
              <span itemprop='position'>1</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>The set (collection) operations in Rebol are useful.</p>
<pre><code>rebol2&gt;&gt; set1: [a b c]
rebol2&gt;&gt; set2: [b c d]

rebol2&gt;&gt; intersect set1 set2
== [b c]
</code></pre>
<p>When I first encountered it, I thought it strange that it wasn't mutating the first argument.</p>
<pre><code>rebol2&gt;&gt; set1
== [a b c]  ; not modified by INTERSECT
</code></pre>
<p>Everywhere else in Rebol it seemed when you had a verb like that (APPEND, REVERSE, etc.) it was modifying.  What was special about INTERSECT that it didn't?</p>
<p>Anyway, that was just the first thing I noticed.  But digging around in the code there were questions... such as, why should it only take block lists?</p>
<pre><code>rebol2&gt;&gt; intersect [a b c] quote (b c d)
** Script Error: Expected one of: block! - not: paren!

red&gt;&gt; intersect [a b c] quote (b c d)
*** Script Error: intersect does not allow paren! for its set2 argument
</code></pre>
<p>I raised the question to <a class="mention" href="https://rebol.metaeducation.com/u/blackattr">@BlackATTR</a> who suggested that maybe single elements should just go in the list, as whole items:</p>
<pre><code>&gt;&gt; intersect [a b c] '(b c d)
== []

&gt;&gt; union [a b c] '(b c d)
== [a b c (b c d)]
</code></pre>
<p>And then I noticed... <strong>splices could draw the distinction!</strong></p>
<pre><code>&gt;&gt; union [a b c] [b c d]
== [a b c [b c d]]

&gt;&gt; union [a b c] spread [b c d]
== [a b c d]

&gt;&gt; union [a b c] spread '(b c d)
== [a b c d]

&gt;&gt; union '(a b c) spread [b c d]
== (a b c d)
</code></pre>
<p>This gives you the power to easily do set operations with single elements, and splices with SPREAD dispel the type information so there's no question what the return type should be: the type of the first set!</p>
<p>And I think to be consistent with the rest of the language, the operations should modify the first set argument by default.  But if you use the OF operations you get a copy.</p>
<p>Then, the OF operations might have different parts of speech:</p>
<pre><code> intersection of set1 set2
 =&gt; intersect (copy set1) set2

 union of set1 set2
 =&gt; unite (copy set1) set2
</code></pre>
<p>This would open up things like union and intersection to be nouns.</p>
<pre><code> union: union of set1 set2
</code></pre>
<p>This seems to me to be much better and a lot more consistent!</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="1" />
              <span class='post-likes'>1 Like</span>
            </div>

          </div>
          <div id='post_2' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://rebol.metaeducation.com/u/bradrn'><span itemprop='name'>bradrn</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2025-03-25T06:05:08Z' class='post-time'>
                    March 25, 2025,  6:05am
                  </time>
                  <meta itemprop='dateModified' content='2025-03-25T06:05:08Z'>
              <span itemprop='position'>2</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <aside class="quote no-group" data-username="hostilefork" data-post="1" data-topic="2380">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="../../user_avatar/rebol.metaeducation.com/hostilefork/48/421_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<pre data-code-wrap="plaintext"><code class="lang-plaintext">&gt;&gt; union [a b c] [b c d]
== [a b c [b c d]]
</code></pre>
</blockquote>
</aside>
<p>To me this is highly confusing and contradicts the meaning of the term <a href="https://en.wikipedia.org/wiki/Union_(set_theory)">union</a>, which can only mean ‘take these two lists/sets and merge them together’. The operation shown here is simply appending an item to the end of a list, which Python calls <code>add</code> (for sets) / <code>append</code> (for lists) and which JavaScript calls <code>push</code>.</p>
<p>So then, what to do with cases like <code>intersect [a b c] '(b c d)</code>? I think the only consistent behaviour is to throw an error: any other choice is leads to an inconsistency either with the case of a list, or with the case of an atomic value.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
          <div id='post_3' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://rebol.metaeducation.com/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2025-03-25T10:13:05Z' class='post-time'>
                    March 25, 2025, 10:13am
                  </time>
                  <meta itemprop='dateModified' content='2025-03-25T10:51:28Z'>
              <span itemprop='position'>3</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <aside class="quote no-group" data-username="bradrn" data-post="2" data-topic="2380">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="../../user_avatar/rebol.metaeducation.com/bradrn/48/365_2.png" class="avatar"> bradrn:</div>
<blockquote>
<p>To me this is highly confusing and contradicts the meaning of the term <a href="https://en.wikipedia.org/wiki/Union_(set_theory)">union</a></p>
</blockquote>
</aside>
<p>The difference is not adding it if it's already there.</p>
<pre><code>&gt;&gt; union of [a b [b c d] c] [b c d]
== [a b [b c d] c]
</code></pre>
<aside class="quote no-group" data-username="bradrn" data-post="2" data-topic="2380">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="../../user_avatar/rebol.metaeducation.com/bradrn/48/365_2.png" class="avatar"> bradrn:</div>
<blockquote>
<p>So then, what to do with cases like <code>intersect [a b c] '(b c d)</code>?</p>
</blockquote>
</aside>
<pre><code>&gt;&gt; intersect [a b c] '(b c d)
== []

&gt;&gt; intersect [a (b c d) c] '(b c d)
== [(b c d)]
</code></pre>
<p><em>(As usual, binding questions arise... what if the bindings are different... <img src="../../images/emoji/twitter/thinking.png%3Fv=14" title=":thinking:" class="emoji" alt=":thinking:" loading="lazy" width="20" height="20">)</em></p>
<p>Though I feel like there needs to be canonization of the order of the sets somehow, otherwise you can't do comparisons, like:</p>
<pre><code> &gt;&gt; data: [a b 2 d]

 &gt;&gt; i1: intersection of data spread [2 d e]
 == [2 d]

 &gt;&gt; i2: intersection of data spread [e 2 d]
 == [d 2]
 
 &gt;&gt; i1 = i2
 == ~false~  ; anti
</code></pre>
<p>So you need something that would turn both [2 d] and [d 2] into the same order.</p>
<p>I don't think this is "sorting".  I feel like sorting should require the items be comparable.  It's canonization, and I don't think there's any way to do this that would guarantee it would give the same order in different versions of the interpreter (or outside of the same run, e.g. things might get different pointers and it has to canonize on the pointer value).</p>
<p>I haven't "sorted out" my thoughts on this yet.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
    </div>


    




    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/guidelines' itemprop="url">Guidelines </a>
        </span>
      </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://rebol.metaeducation.com/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://rebol.metaeducation.com/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    
  </body>
  
</html>
