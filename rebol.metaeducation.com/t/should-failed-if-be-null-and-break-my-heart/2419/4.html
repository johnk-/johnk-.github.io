<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Should Failed IF Be NULL (and Break My Heart ðŸ’”)? - #4 by hostilefork - Semantics - AltRebol</title>
    <meta name="description" content="This idea has been near and dear to my heart: that without any additional work, failed IF returns something that will vaporize in COMPOSE and UNSPACED. 
But over time the costs have been adding up.  Are these costs too &amp;hellip;">
    <meta name="generator" content="Discourse 3.5.0.beta6-dev - https://github.com/discourse/discourse version 623cde985b21c2ed812b83d3ea94f69231613718">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" media="all" content="#fff">

<meta name="color-scheme" content="light">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, viewport-fit=cover">
<link rel="canonical" href="../../bad-ideas-failed-if-returning-null/2419.html" />

<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="AltRebol Search">

    <link href="https://rebol.metaeducation.com/stylesheets/color_definitions_base__2_ceb61c279a74dfa3cef6a62f7784988102abec82.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" class="light-scheme"/>

<link href="https://rebol.metaeducation.com/stylesheets/common_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="common"  />

  <link href="https://rebol.metaeducation.com/stylesheets/desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="desktop"  />



    <link href="https://rebol.metaeducation.com/stylesheets/chat_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="chat"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-details_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-details"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-lazy-videos_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-local-dates_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-narrative-bot_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-presence_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-presence"  />
    <link href="https://rebol.metaeducation.com/stylesheets/docker_manager_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="docker_manager"  />
    <link href="https://rebol.metaeducation.com/stylesheets/footnote_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="footnote"  />
    <link href="https://rebol.metaeducation.com/stylesheets/poll_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="poll"  />
    <link href="https://rebol.metaeducation.com/stylesheets/spoiler-alert_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="spoiler-alert"  />
    <link href="https://rebol.metaeducation.com/stylesheets/chat_desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="chat_desktop"  />
    <link href="https://rebol.metaeducation.com/stylesheets/poll_desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="https://rebol.metaeducation.com/stylesheets/common_theme_2_57fe803ed5a41e9f7d94086afaf66a1aab57d9ae.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="common_theme" data-theme-id="2" data-theme-name="default"/>
    

    
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;Should Failed IF Be NULL (and Break My Heart :broken_heart:)?&#39;" href="../2419.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://rebol.metaeducation.com/t/should-failed-if-be-null-and-break-my-heart/2419/4" />
<meta name="twitter:url" content="https://rebol.metaeducation.com/t/should-failed-if-be-null-and-break-my-heart/2419/4" />
<meta property="og:title" content="Should Failed IF Be NULL (and Break My Heart ðŸ’”)?" />
<meta name="twitter:title" content="Should Failed IF Be NULL (and Break My Heart ðŸ’”)?" />
<meta property="og:description" content="Two months downstream of changing IF to return NULL, I&#39;m now bringing the bootstrap code up to date.  It has to run in a world where a non-branch-taking IF does not vaporize in expressions, because it no longer returns VOID.  So the IFs have to be OPT&#39;ed or ?&#39;ed or use WHEN instead.  It&#39;s a lot fewer changes than I thought, and usually you can write the code other ways to avoid it.  But still, the changes definitely make me sad.  I don&#39;t like the IF vs. WHEN distinction, and it wouldn&#39;t exist in..." />
<meta name="twitter:description" content="Two months downstream of changing IF to return NULL, I&#39;m now bringing the bootstrap code up to date.  It has to run in a world where a non-branch-taking IF does not vaporize in expressions, because it no longer returns VOID.  So the IFs have to be OPT&#39;ed or ?&#39;ed or use WHEN instead.  It&#39;s a lot fewer changes than I thought, and usually you can write the code other ways to avoid it.  But still, the changes definitely make me sad.  I don&#39;t like the IF vs. WHEN distinction, and it wouldn&#39;t exist in..." />
<meta property="og:article:section" content="Development" />
<meta property="og:article:section:color" content="25AAE2" />
<meta property="og:article:section" content="Semantics" />
<meta property="og:article:section:color" content="25AAE2" />
<meta property="article:published_time" content="2025-07-16T03:50:51+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler ">
    
    <header>
  <a href="https://rebol.metaeducation.com/">AltRebol</a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="../../bad-ideas-failed-if-returning-null/2419.html">Should Failed IF Be NULL (and Break My Heart ðŸ’”)?</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://rebol.metaeducation.com/c/development/semantics/55" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://rebol.metaeducation.com/c/development/semantics/55" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Semantics</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  

    <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='Should Failed IF Be NULL (and Break My Heart :broken_heart:)?'>
      <link itemprop='url' href='../../bad-ideas-failed-if-returning-null/2419.html'>
      <meta itemprop='datePublished' content='2025-04-17T09:12:25Z'>
        <meta itemprop='articleSection' content='Semantics'>
      <meta itemprop='keywords' content=''>
      <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
        <meta itemprop='name' content='AltRebol'>
          <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
            <meta itemprop='url' content='https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
          </div>
      </div>

          <span itemprop='author' itemscope itemtype="http://schema.org/Person">
            <meta itemprop='name' content='hostilefork'>
            <link itemprop='url' rel='nofollow' href='https://rebol.metaeducation.com/u/hostilefork'>
          </span>
        <meta itemprop='text' content='This idea has been near and dear to my heart: that without any additional work, failed IF returns something that will vaporize in COMPOSE and UNSPACED. 
But over time the costs have been adding up.  Are these costs too &amp;hellip;'>

          <div id='post_4' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://rebol.metaeducation.com/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2025-07-16T03:50:51Z' class='post-time'>
                    July 16, 2025,  3:50am
                  </time>
                  <meta itemprop='dateModified' content='2025-07-16T03:50:51Z'>
              <span itemprop='position'>4</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Two months downstream of changing IF to return NULL, I'm now bringing the bootstrap code up to date.</p>
<p>It has to run in a world where a non-branch-taking IF does not vaporize in expressions, because it no longer returns VOID.  So the IFs have to be <code>OPT</code>'ed or <code>?</code>'ed or use <code>WHEN</code> instead.</p>
<p>It's a lot fewer changes than I thought, and usually you can write the code other ways to avoid it.  <em>But still, the changes definitely make me sad.</em>  I don't like the IF vs. WHEN distinction, and it wouldn't exist in a perfect world.</p>
<p>So I want to look at this again and ask if this is truly the last word--if there is no other option.</p>
<aside class="quote no-group" data-username="hostilefork" data-post="1" data-topic="2419">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="../../../user_avatar/rebol.metaeducation.com/hostilefork/48/421_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p>It's not legal to make <strong><code>f.dup</code></strong> a void, so in this situation we want <code>if null [5]</code> to be null.</p>
</blockquote>
</aside>
<p>It seems now that non-meta assignments of void, e.g. <strong><code>f.dup: void</code></strong> <a href="../../should-void-assigns-mean-fully-remove-a-key/2431/3.html">is going to be the way to make the field unset</a>.  That would mean it would do whatever an unspecified refinement would do, e.g. not be taken.</p>
<p>And actually...I'm somewhat torn on whether NULL is what is used in frame building to opt out of refinements (or an <strong><code>&lt;opt&gt;</code></strong> parameter) or not.  This kind of hinges on whether when the frame is built, if the <code>&lt;opt&gt;</code> does the transformation from void to null during fulfillment, or during type checking.  If you literally have to assign parameters to void, then to truly opt-them out (or specialize them out) you would <em>have</em> to use <strong><code>f.^dup: void</code></strong> ... which seems kind of crazy, but, you're asking to drop a refinement off the interface...which you didn't have to do--you could have left it alone and it just wouldn't have been supplied.</p>
<p>Anyway, this is no longer as clear-cut...and in fact, VOID may be necessary.</p>
<aside class="quote no-group" data-username="hostilefork" data-post="3" data-topic="2419">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="../../../user_avatar/rebol.metaeducation.com/hostilefork/48/421_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p>There's one <em>bad</em> impliciation... and it's pretty bad indeed, I'm afraid. If ELSE is to work in this case, we have to make it so that empty packs themselves get packed:</p>
<pre data-code-wrap="plaintext"><code class="lang-plaintext">if 1 &lt; 0 [pack []] else [print "Don't want this to print..."]
</code></pre>
<p>The branch can't return an empty antiform pack if that triggers else. <em>It has to return a pack inside a pack</em>, e.g. unstable antiform ensconced in an unstable antiform. <img src="../../../images/emoji/twitter/frowning.png%3Fv=14" title=":frowning:" class="emoji" alt=":frowning:" loading="lazy" width="20" height="20"></p>
<pre data-code-wrap="plaintext"><code class="lang-plaintext">&gt;&gt; if 1 &lt; 0 [pack ~[]~]
== ~[~[]~]~  ; anti
</code></pre>
<p>Such things are <em>legal</em> to construct (they have to be). But I'm wary of them decaying automatically.</p>
</blockquote>
</aside>
<p>This is kind of the big deal.</p>
<p><img src="../../../images/emoji/twitter/thinking.png%3Fv=14" title=":thinking:" class="emoji only-emoji" alt=":thinking:" loading="lazy" width="20" height="20"></p>
<p>I've been saying you can't unpack unstable antiforms automatically.  But... how bad is this?  What do you expect if you say:</p>
<pre><code>x: if condition1 [if condition2 [...]] else [1020]
</code></pre>
<p>In the case that condition1 is true and condition2 is false, what did you want X to be?  Is the error really that bad?</p>
<p>Not being able to unpack a pack doesn't bother the evaluator if you let the result drop on the floor, just if you try to use it.</p>
<p>But if we made branches pack up voids that refused to decay without explicit unpacking, that rules out things like:</p>
<pre><code> append [a b c] case [
     condition1 [void]  ; note: same as `condition1 []`
     condition2 [1020]
 ]
</code></pre>
<p>When VOID works here, you get the nice property that it will still error by default if none of the branches are taken (due to CASE returning NULL on no branch).  And then the VOID can opt out.</p>
<p>If that packed the branch so it wouldn't decay, you could still write something like:</p>
<pre><code> append [a b c] opt case [
     condition1 [null]
     condition2 [1020]
 ]
</code></pre>
<p>That would box the null, but the OPT would also turn a null from no cases into a void, so you'd not get the natural protection from no cases matching.</p>
<h2><a name="p-8525-looks-like-broken-heart-may-has-to-stay-broken-heart_exclamation-1" class="anchor" href="4.html#p-8525-looks-like-broken-heart-may-has-to-stay-broken-heart_exclamation-1"></a>Looks like Broken Heart May Has To Stay Broken <img src="../../../images/emoji/twitter/heart_exclamation.png%3Fv=14" title=":heart_exclamation:" class="emoji" alt=":heart_exclamation:" loading="lazy" width="20" height="20"></h2>
<p>This comes down to a contention between "IF being able to return void for no branch" vs. "branches being able to return void".</p>
<p>For THEN and ELSE to react to VOID without reacting to a branch that produces void, you wind up boxing an unstable pack in an unstable pack.  Making such an antiform on a casual basis is just not something viable to do.</p>
<p>So as much as I may not like the IF vs. WHEN distinction, it's just one of those things.  If you don't like it, there's <strong>opt if</strong> and <strong>? if</strong>, though they're not precise synonyms for WHEN, since they return void should the IF run a branch and evaluate the branch to null.</p>
<p>And you've still got the historical Redbol-style answer, of:</p>
<pre><code>either condition [...] []
</code></pre>
<p><strong>It's a pain point, but it just looks like the pain of making ELSE reactive to VOID when it's an unstable antiform creates much more pain.</strong>  Being able to say ELSE just reacts to "light" NULL--the only falsey value--solidifies the system in other ways.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
    </div>

      <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
          <span itemprop='name'>
            <a itemprop="url" href="../../bad-ideas-failed-if-returning-null/2419.html#post_4">show post in topic</a>
          </span>
      </div>

    




    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/guidelines' itemprop="url">Guidelines </a>
        </span>
      </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://rebol.metaeducation.com/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://rebol.metaeducation.com/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    
  </body>
  
</html>
