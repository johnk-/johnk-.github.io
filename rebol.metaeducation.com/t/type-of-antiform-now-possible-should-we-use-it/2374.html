<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>&quot;type of antiform&quot; now possible... Should We Use It? - Datatypes - AltRebol</title>
    <meta name="description" content="The way antiforms were implemented originally didn&amp;#39;t allow for the idea of giving a coherent answer back from TYPE OF.  So they all gave the same answer, much how QUOTED! and QUASIFORM! all gave the same answer: 
&amp;gt;&amp;gt; type&amp;hellip;">
    <meta name="generator" content="Discourse 3.5.0.beta6-dev - https://github.com/discourse/discourse version 623cde985b21c2ed812b83d3ea94f69231613718">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" media="all" content="#fff">

<meta name="color-scheme" content="light">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, viewport-fit=cover">
<link rel="canonical" href="2374.html" />

<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="AltRebol Search">

    <link href="https://rebol.metaeducation.com/stylesheets/color_definitions_base__2_ceb61c279a74dfa3cef6a62f7784988102abec82.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" class="light-scheme"/>

<link href="https://rebol.metaeducation.com/stylesheets/common_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="common"  />

  <link href="https://rebol.metaeducation.com/stylesheets/desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="desktop"  />



    <link href="https://rebol.metaeducation.com/stylesheets/chat_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="chat"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-details_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-details"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-lazy-videos_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-local-dates_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-narrative-bot_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-presence_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-presence"  />
    <link href="https://rebol.metaeducation.com/stylesheets/docker_manager_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="docker_manager"  />
    <link href="https://rebol.metaeducation.com/stylesheets/footnote_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="footnote"  />
    <link href="https://rebol.metaeducation.com/stylesheets/poll_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="poll"  />
    <link href="https://rebol.metaeducation.com/stylesheets/spoiler-alert_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="spoiler-alert"  />
    <link href="https://rebol.metaeducation.com/stylesheets/chat_desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="chat_desktop"  />
    <link href="https://rebol.metaeducation.com/stylesheets/poll_desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="https://rebol.metaeducation.com/stylesheets/common_theme_2_57fe803ed5a41e9f7d94086afaf66a1aab57d9ae.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="common_theme" data-theme-id="2" data-theme-name="default"/>
    

    
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;&quot;type of antiform&quot; now possible... Should We Use It?&#39;" href="2374.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://rebol.metaeducation.com/t/type-of-antiform-now-possible-should-we-use-it/2374" />
<meta name="twitter:url" content="https://rebol.metaeducation.com/t/type-of-antiform-now-possible-should-we-use-it/2374" />
<meta property="og:title" content="&quot;type of antiform&quot; now possible... Should We Use It?" />
<meta name="twitter:title" content="&quot;type of antiform&quot; now possible... Should We Use It?" />
<meta property="og:description" content="The way antiforms were implemented originally didn&#39;t allow for the idea of giving a coherent answer back from TYPE OF.  So they all gave the same answer, much how QUOTED! and QUASIFORM! all gave the same answer:  &gt;&gt; type of first [&#39;&#39;a] == &amp;[quoted]  &gt;&gt; type of first [~a~] == &amp;[quasiform]  &gt;&gt; type of spread [a b c] == &amp;[antiform]  So there was nothing like &amp;[splice].  The only way to type check antiforms was with constraints, like SPLICE?... which was slower, since it had to call a constraint fun..." />
<meta name="twitter:description" content="The way antiforms were implemented originally didn&#39;t allow for the idea of giving a coherent answer back from TYPE OF.  So they all gave the same answer, much how QUOTED! and QUASIFORM! all gave the same answer:  &gt;&gt; type of first [&#39;&#39;a] == &amp;[quoted]  &gt;&gt; type of first [~a~] == &amp;[quasiform]  &gt;&gt; type of spread [a b c] == &amp;[antiform]  So there was nothing like &amp;[splice].  The only way to type check antiforms was with constraints, like SPLICE?... which was slower, since it had to call a constraint fun..." />
<meta property="og:article:section" content="Development" />
<meta property="og:article:section:color" content="25AAE2" />
<meta property="og:article:section" content="Datatypes" />
<meta property="og:article:section:color" content="25AAE2" />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins ðŸ•‘" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="1 â¤" />
<meta property="article:published_time" content="2025-03-18T21:55:06+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler ">
    
    <header>
  <a href="https://rebol.metaeducation.com/">AltRebol</a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="2374.html">&quot;type of antiform&quot; now possible... Should We Use It?</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://rebol.metaeducation.com/c/development/datatypes/45" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://rebol.metaeducation.com/c/development/datatypes/45" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Datatypes</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  

    <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='&quot;type of antiform&quot; now possible... Should We Use It?'>
      <link itemprop='url' href='2374.html'>
      <meta itemprop='datePublished' content='2025-03-18T21:55:06Z'>
        <meta itemprop='articleSection' content='Datatypes'>
      <meta itemprop='keywords' content=''>
      <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
        <meta itemprop='name' content='AltRebol'>
          <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
            <meta itemprop='url' content='https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
          </div>
      </div>


          <div id='post_1'  class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://rebol.metaeducation.com/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>

                <link itemprop="mainEntityOfPage" href="2374.html">


              <span class="crawler-post-infos">
                  <time  datetime='2025-03-18T21:55:06Z' class='post-time'>
                    March 18, 2025,  9:55pm
                  </time>
                  <meta itemprop='dateModified' content='2025-03-22T17:20:06Z'>
              <span itemprop='position'>1</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>The way antiforms were implemented originally didn't allow for the idea of giving a coherent answer back from TYPE OF.  So they all gave the same answer, much how QUOTED! and QUASIFORM! all gave the same answer:</p>
<pre><code>&gt;&gt; type of first [''a]
== &amp;[quoted]

&gt;&gt; type of first [~a~]
== &amp;[quasiform]

&gt;&gt; type of spread [a b c]
== &amp;[antiform]
</code></pre>
<p>So there was nothing like <code>&amp;[splice]</code>.  The only way to type check antiforms was with constraints, like SPLICE?... which was slower, since it had to call a constraint function.</p>
<p>But I reworked things in a way that speeds up SPLICE? to the point where it's no more expensive than checking for INTEGER! (or INTEGER?).</p>
<p>As a curious byproduct that I didn't even initially intend, this changed the behavior and it started treating antiforms as being datatypes:</p>
<pre><code>&gt;&gt; type of spread [a b c]
== &amp;[splice]
</code></pre>
<p>I was actually surprised, because I didn't intend to do it.  It's not often a feature "just happens".</p>
<h2><a name="p-8046-but-is-it-a-good-idea-for-antiforms-to-answer-type-of-1" class="anchor" href="2374.html#p-8046-but-is-it-a-good-idea-for-antiforms-to-answer-type-of-1"></a>But Is It A Good Idea For Antiforms To Answer TYPE OF?</h2>
<p>I've struggled with types, and the question of what TYPE means, vs. what KIND means... or CLASS?</p>
<p>If we develop some sort of class system, then TYPE becomes a loaded question.  If you have an object that somehow remembers it was created as a BOOK!, then do you get <strong>book! = type of my-book</strong> being true?  Or is TYPE OF forever committed to returning the fundamental type and saying it's an OBJECT! ?</p>
<p>This hesitance has affected my willingness to rename REB_BLOCK and REB_BLANK to be TYPE_BLOCK and TYPE_BLANK, which would be much more palatable (and survive a language name change away from Rebol...)</p>
<p>There's also the question of <strong>type of null</strong>, which I feel needs to be an error most of the time.  The way I've worked it out so far is that you get a RAISED? error.  So if you know you want to test for null you can say <strong>try type of null</strong> and get a null antiform result--not a datatype, but there's a sort of reasonable logic to saying the type of null is null.</p>
<h2><a name="p-8046-what-would-it-hurt-eg-if-splice-looked-like-a-type-2" class="anchor" href="2374.html#p-8046-what-would-it-hurt-eg-if-splice-looked-like-a-type-2"></a>What Would It Hurt, e.g. if SPLICE! Looked Like A Type?</h2>
<p>For instance, is there a really good reason why this shouldn't work?</p>
<pre><code>&gt;&gt; to splice! [a b c]
== ~(a b c)~  ; anti

&gt;&gt; to block ~(a b c)~
== [a b c]

switch type of spread [a b c] [
    splice! [print "Is this somehow bad?"]
]
</code></pre>
<p>It might be confusing, that a type ending in <strong><code>!</code></strong> can't be put into a block.  But that was true before with antiform!...</p>
<p>I lean toward thinking that there's more upside than downside.  And I kind of want to put this TYPE vs KIND vs. whatever else issue to rest.  We write <strong>type of x</strong> and expect to get something like BLOCK! or OBJECT! back.  If there's something more complex than that, it probably needs to be done another way.</p>
<p>So if you have something like <code>''''1</code> and <code>''''x</code> and <code>''''3</code>, and you want to know which are the "same type", you'll need to define your operators for answering that.</p>
<p>Want to know if they're the same underlying type when you take the quotes off?</p>
<pre><code> (heart of x) = (heart of y)
</code></pre>
<p>Want to know if they're at the same quote level?</p>
<pre><code>(quotes of x) = (quotes of y)
</code></pre>
<p>I'm sort of tempted to say actually that it might should be that TYPE OF doesn't work on quoted values, because of how misleading it is... but all blocks are of the same type, even if they're different lengths.  And it is actually often the case in dialects that if something is quoted, you treat all quoted things the same way...oddly enough.</p>
<p>In any case, the new flexibility for -OF operators means we can get some other ideas in the mix.  Rnadomly:</p>
<pre><code>&gt;&gt; quoted-type of first of ['''x]
== &amp;[' ' ' &amp;[word!]]

&gt;&gt; quoted-type of first of ['''1]
== &amp;[' ' ' &amp;[integer!]]
</code></pre>
<p>If we say there are more questions you can ask of values to produce structure... instead of putting that burden on TYPE, we can maybe commit to what type does and move along.</p>
<p>And maybe there could be something like <strong>class:relax of x</strong> which if something wasn't an object, would give you the fundamental type?</p>
<pre><code>&gt;&gt; class of some-novel
== #[make object! ...]

&gt;&gt; class of some-block
** Error: not an object, use CLASS:RELAX to permit other types

&gt;&gt; class of some-block
== &amp;[block]
</code></pre>
<p>I guess in other words, I'm feeling like it's time to just go ahead and say that TYPE-OF is the question we build on, that it returns fundamentals or antiform classes.</p>
<p>And maybe the concept I've always wanted of calling it TYPE! instead of DATATYPE! will be possible, too.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="1" />
              <span class='post-likes'>1 Like</span>
            </div>

                <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../old-idea-revisited-datatype-as-antiform/2324/3.html">Old Idea Revisited: DATATYPE as... Antiform?</a>
                        <meta itemprop='position' content='1'>
                      </div>
                </div>
          </div>
    </div>


    




    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/guidelines' itemprop="url">Guidelines </a>
        </span>
      </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://rebol.metaeducation.com/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://rebol.metaeducation.com/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    
  </body>
  
</html>
