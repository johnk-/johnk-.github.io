<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Persistence of Memory: The Infix Console Trick - Console - AltRebol</title>
    <meta name="description" content="Access to the last expression&amp;#39;s result is pretty important.  So I was wondering what sort of syntax we could use to splice it in.  We could commandeer some existing Rebol token: 
&amp;gt;&amp;gt; second [&amp;lt;alpha&amp;gt; &amp;lt;beta&amp;gt;]
== &amp;lt;beta&amp;gt;

&amp;gt;&amp;gt; &amp;hellip;">
    <meta name="generator" content="Discourse 3.5.0.beta6-dev - https://github.com/discourse/discourse version 623cde985b21c2ed812b83d3ea94f69231613718">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" media="all" content="#fff">

<meta name="color-scheme" content="light">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, viewport-fit=cover">
<link rel="canonical" href="1071.html" />

<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="AltRebol Search">

    <link href="https://rebol.metaeducation.com/stylesheets/color_definitions_base__2_ceb61c279a74dfa3cef6a62f7784988102abec82.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" class="light-scheme"/>

<link href="https://rebol.metaeducation.com/stylesheets/common_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="common"  />

  <link href="https://rebol.metaeducation.com/stylesheets/desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="desktop"  />



    <link href="https://rebol.metaeducation.com/stylesheets/chat_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="chat"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-details_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-details"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-lazy-videos_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-local-dates_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-narrative-bot_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-presence_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-presence"  />
    <link href="https://rebol.metaeducation.com/stylesheets/docker_manager_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="docker_manager"  />
    <link href="https://rebol.metaeducation.com/stylesheets/footnote_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="footnote"  />
    <link href="https://rebol.metaeducation.com/stylesheets/poll_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="poll"  />
    <link href="https://rebol.metaeducation.com/stylesheets/spoiler-alert_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="spoiler-alert"  />
    <link href="https://rebol.metaeducation.com/stylesheets/chat_desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="chat_desktop"  />
    <link href="https://rebol.metaeducation.com/stylesheets/poll_desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="https://rebol.metaeducation.com/stylesheets/common_theme_2_57fe803ed5a41e9f7d94086afaf66a1aab57d9ae.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="common_theme" data-theme-id="2" data-theme-name="default"/>
    

    
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;Persistence of Memory: The Infix Console Trick&#39;" href="1071.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://rebol.metaeducation.com/t/persistence-of-memory-the-infix-console-trick/1071" />
<meta name="twitter:url" content="https://rebol.metaeducation.com/t/persistence-of-memory-the-infix-console-trick/1071" />
<meta property="og:title" content="Persistence of Memory: The Infix Console Trick" />
<meta name="twitter:title" content="Persistence of Memory: The Infix Console Trick" />
<meta property="og:description" content="Access to the last expression&#39;s result is pretty important.  So I was wondering what sort of syntax we could use to splice it in.  We could commandeer some existing Rebol token:  &gt;&gt; second [&lt;alpha&gt; &lt;beta&gt;] == &lt;beta&gt;  &gt;&gt; print #1   ; e.g. #1 for last console result, #2 for the one before that... &lt;beta&gt;  But by definition, anything you pick could be meant literally.  We have quite a few more possibilities to make the escaping ever more esoteric, like &lt;console&gt;/#1.  But if the point is to keep you ..." />
<meta name="twitter:description" content="Access to the last expression&#39;s result is pretty important.  So I was wondering what sort of syntax we could use to splice it in.  We could commandeer some existing Rebol token:  &gt;&gt; second [&lt;alpha&gt; &lt;beta&gt;] == &lt;beta&gt;  &gt;&gt; print #1   ; e.g. #1 for last console result, #2 for the one before that... &lt;beta&gt;  But by definition, anything you pick could be meant literally.  We have quite a few more possibilities to make the escaping ever more esoteric, like &lt;console&gt;/#1.  But if the point is to keep you ..." />
<meta property="og:article:section" content="Domains" />
<meta property="og:article:section:color" content="F1592A" />
<meta property="og:article:section" content="Console" />
<meta property="og:article:section:color" content="F1592A" />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="2 ❤" />
<meta property="article:published_time" content="2019-02-15T09:48:47+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler ">
    
    <header>
  <a href="https://rebol.metaeducation.com/">AltRebol</a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="1071.html">Persistence of Memory: The Infix Console Trick</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://rebol.metaeducation.com/c/domains/console/36" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #F1592A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Domains</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://rebol.metaeducation.com/c/domains/console/36" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #F1592A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Console</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  

    <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='Persistence of Memory: The Infix Console Trick'>
      <link itemprop='url' href='1071.html'>
      <meta itemprop='datePublished' content='2019-02-15T09:48:47Z'>
        <meta itemprop='articleSection' content='Console'>
      <meta itemprop='keywords' content=''>
      <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
        <meta itemprop='name' content='AltRebol'>
          <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
            <meta itemprop='url' content='https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
          </div>
      </div>


          <div id='post_1'  class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://rebol.metaeducation.com/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>

                <link itemprop="mainEntityOfPage" href="1071.html">


              <span class="crawler-post-infos">
                  <time  datetime='2019-02-15T09:48:47Z' class='post-time'>
                    February 15, 2019,  9:48am
                  </time>
                  <meta itemprop='dateModified' content='2025-03-18T15:32:20Z'>
              <span itemprop='position'>1</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Access to the last expression's result is pretty important.  So I was wondering what sort of syntax we could use to splice it in.  We could commandeer some existing Rebol token:</p>
<pre><code>&gt;&gt; second [&lt;alpha&gt; &lt;beta&gt;]
== &lt;beta&gt;

&gt;&gt; print #1   ; e.g. #1 for last console result, #2 for the one before that...
&lt;beta&gt;
</code></pre>
<p>But by definition, <em>anything</em> you pick could be meant literally.  We have quite a few more possibilities to make the escaping ever more esoteric, like <strong><code>&lt;console&gt;/#1</code></strong>.  But if the point is to keep you from re-entering or retyping a result, having to type in a long thing to get uniqueness defeats the purpose...you're usually trying to save time.</p>
<p>Maybe the best idea would be to find a way to get the result <em>without mentioning it at all</em>.  And that gave me the idea of combining infix and generalized quoting, to make the <code>system/console/dialect-hook</code> (which runs after all the code has been LOADed) do something extremely cool...</p>
<h2><a name="p-3086-kicking-it-old-school-calculator-style-1" class="anchor" href="1071.html#p-3086-kicking-it-old-school-calculator-style-1"></a>Kicking it old-school, calculator-style</h2>
<p>The idea is that we <em>inject the last result, quoted, at the start of the code we're running</em>!  If the next operation isn't infix, it will just be scrapped.  If it is infix, it will get picked up as if it had been on the left.</p>
<pre><code>&gt;&gt; 1 + 2
== 3

&gt;&gt; * 10   ; it actually runs `('3 * 10)`
== 30
</code></pre>
<p>And with a small tweak to the SHOVE (<strong><code>-&gt;</code></strong>) operation, you can now shove the left hand side into a SET-WORD! (or SET-PATH!, SET-GROUP!, SET-BLOCK!....)</p>
<pre><code>&gt;&gt; 1 + 2
== 3

&gt;&gt; -&gt; foo:
== 3

&gt;&gt; foo
== 3
</code></pre>
<p>Why is the quoting important?  Well, if the last thing you evaluated was an ACTION!, you don't want that action to run, if it was a SET-WORD! you don't want it to assign, etc. etc.  But you do want to be able to capture it!</p>
<pre><code>&gt;&gt; func [x] [x + 1]

&gt;&gt; -&gt; addone:

&gt;&gt; addone 10
== 11
</code></pre>
<p>Nothing is injected for a NOTHING result (appropriate...)  So if you ever want to clear out the memory and not get this behavior, just cycle the prompt by hitting enter.</p>
<pre><code>&gt;&gt; 1 + 2
== 3

&gt;&gt;  ; hit enter

&gt;&gt; * 5
** Script Error: * is missing its value1 argument
</code></pre>
<p>Are we having fun, yet?  <img src="../../images/emoji/twitter/partying_face.png%3Fv=14" title=":partying_face:" class="emoji" alt=":partying_face:" loading="lazy" width="20" height="20"></p>
<p>Notable is <a href="https://github.com/metaeducation/ren-c/commit/73da0961c6f0b37bbbc3fb0675c6c430bdb6d2ff">just how little code this took to implement</a>, mostly comments and adding the SET-XXX! feature to SHOVE.  Imagine how easy it would be to start adding your own console customizations!</p>
<blockquote>
<p>Not too distant plans might allow things like:</p>
<pre><code>&gt;&gt; data: [&lt;a&gt; &lt;b&gt;]

&gt;&gt; 1 + 2
== 3

&gt;&gt; -&gt; (=&gt; append data)
== [&lt;a&gt; &lt;b&gt; 3]
</code></pre>
<p>That would be a shorthand for:</p>
<pre><code>-&gt; specialize 'append [series: data]
</code></pre>
<p>I haven't really figured out what these "by example" specializations will look like.  At first, I thought it could be a behavior of GET-GROUP!:</p>
<pre><code>-&gt; :(append data)
</code></pre>
<p>But if it's not the <em>only</em> behavior of GET-GROUP!, I fear it might be too confusing.  Having the behavior of an unfinished call in a group producing a specialization could be unpredictable-seeming, when the user would have liked to get an error.  (That is if they could use GET-GROUP! for other things besides specialization, e.g. <code>:(x)</code> as <code>get x</code>)</p>
<p>The average person would probably find that too convoluted and just use a variable.  <img src="../../images/emoji/twitter/slight_smile.png%3Fv=14" title=":slight_smile:" class="emoji" alt=":slight_smile:" loading="lazy" width="20" height="20"></p>
</blockquote>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="1" />
              <span class='post-likes'>1 Like</span>
            </div>

                <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../2-3-return-gibberish/1121/2.html">+ 2 3 return gibberish</a>
                        <meta itemprop='position' content='2'>
                      </div>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../rye-language/1768/7.html">Rye Language</a>
                        <meta itemprop='position' content='3'>
                      </div>
                </div>
          </div>
          <div id='post_2' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://rebol.metaeducation.com/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2019-04-27T16:40:25Z' class='post-time'>
                    April 27, 2019,  4:40pm
                  </time>
                  <meta itemprop='dateModified' content='2019-09-24T09:08:20Z'>
              <span itemprop='position'>2</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>This is a cool trick, and was fun to try out...</p>
<p>...but I think we should leave it as one of those "optional things" that people might try in their own console configurations.  There's too much potential for confusion when people are learning the language.</p>
<p>For reference, here's the code to put into your console's DIALECT-HOOK:</p>
<pre><code>    ; We put the last-result into the code stream, so you can say:
    ;
    ;     &gt;&gt; 1 + 2
    ;     == 3
    ;
    ;     &gt;&gt; * 5
    ;     == 15
    ;
    ; https://rebol.metaeducation.com/t/1071
    ;
    if (not empty? b) and [not void? :last-result] [
        insert/only b quote :last-result
    ]
</code></pre>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="1" />
              <span class='post-likes'>1 Like</span>
            </div>

          </div>
    </div>


    




    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/guidelines' itemprop="url">Guidelines </a>
        </span>
      </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://rebol.metaeducation.com/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://rebol.metaeducation.com/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    
  </body>
  
</html>
