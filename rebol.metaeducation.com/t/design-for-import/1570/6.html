<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Design for IMPORT - #6 by hostilefork - Modules - AltRebol</title>
    <meta name="description" content="So almost all languages are now at the point where modules are insulated from each other... and when they import definitions, these imports apply only to them and not other places. 
The way some import functions work act&amp;hellip;">
    <meta name="generator" content="Discourse 3.5.0.beta6-dev - https://github.com/discourse/discourse version 623cde985b21c2ed812b83d3ea94f69231613718">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" media="all" content="#fff">

<meta name="color-scheme" content="light">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, viewport-fit=cover">
<link rel="canonical" href="../1570.html" />

<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="AltRebol Search">

    <link href="https://rebol.metaeducation.com/stylesheets/color_definitions_base__2_ceb61c279a74dfa3cef6a62f7784988102abec82.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" class="light-scheme"/>

<link href="https://rebol.metaeducation.com/stylesheets/common_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="common"  />

  <link href="https://rebol.metaeducation.com/stylesheets/desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="desktop"  />



    <link href="https://rebol.metaeducation.com/stylesheets/chat_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="chat"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-details_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-details"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-lazy-videos_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-local-dates_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-narrative-bot_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-presence_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-presence"  />
    <link href="https://rebol.metaeducation.com/stylesheets/docker_manager_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="docker_manager"  />
    <link href="https://rebol.metaeducation.com/stylesheets/footnote_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="footnote"  />
    <link href="https://rebol.metaeducation.com/stylesheets/poll_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="poll"  />
    <link href="https://rebol.metaeducation.com/stylesheets/spoiler-alert_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="spoiler-alert"  />
    <link href="https://rebol.metaeducation.com/stylesheets/chat_desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="chat_desktop"  />
    <link href="https://rebol.metaeducation.com/stylesheets/poll_desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="https://rebol.metaeducation.com/stylesheets/common_theme_2_57fe803ed5a41e9f7d94086afaf66a1aab57d9ae.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="common_theme" data-theme-id="2" data-theme-name="default"/>
    

    
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;Design for IMPORT&#39;" href="../1570.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://rebol.metaeducation.com/t/design-for-import/1570/6" />
<meta name="twitter:url" content="https://rebol.metaeducation.com/t/design-for-import/1570/6" />
<meta property="og:title" content="Design for IMPORT" />
<meta name="twitter:title" content="Design for IMPORT" />
<meta property="og:description" content="Getting to be around the time where I have to do something about this.  (I need the form of import that gives back a module without pulling it into scope...)   I can&#39;t shake the feeling that when you have a list of configuration things that is possibly infinite, you don&#39;t want that potentially infinite list as the first argument.  Looking at this flipped (and switching back to historical .r)  use import %ws-runtime.r &lt;*&gt;  use import %ws-runtime.r [foo bar]  vm: import %ws-runtime.r  Now we can ..." />
<meta name="twitter:description" content="Getting to be around the time where I have to do something about this.  (I need the form of import that gives back a module without pulling it into scope...)   I can&#39;t shake the feeling that when you have a list of configuration things that is possibly infinite, you don&#39;t want that potentially infinite list as the first argument.  Looking at this flipped (and switching back to historical .r)  use import %ws-runtime.r &lt;*&gt;  use import %ws-runtime.r [foo bar]  vm: import %ws-runtime.r  Now we can ..." />
<meta property="og:article:section" content="Development" />
<meta property="og:article:section:color" content="25AAE2" />
<meta property="og:article:section" content="Modules" />
<meta property="og:article:section:color" content="25AAE2" />
<meta property="article:published_time" content="2025-04-09T04:41:18+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler ">
    
    <header>
  <a href="https://rebol.metaeducation.com/">AltRebol</a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="../1570.html">Design for IMPORT</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://rebol.metaeducation.com/c/development/modules/21" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://rebol.metaeducation.com/c/development/modules/21" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Modules</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  

    <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='Design for IMPORT'>
      <link itemprop='url' href='../1570.html'>
      <meta itemprop='datePublished' content='2021-03-21T22:21:55Z'>
        <meta itemprop='articleSection' content='Modules'>
      <meta itemprop='keywords' content=''>
      <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
        <meta itemprop='name' content='AltRebol'>
          <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
            <meta itemprop='url' content='https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
          </div>
      </div>

          <span itemprop='author' itemscope itemtype="http://schema.org/Person">
            <meta itemprop='name' content='hostilefork'>
            <link itemprop='url' rel='nofollow' href='https://rebol.metaeducation.com/u/hostilefork'>
          </span>
        <meta itemprop='text' content='So almost all languages are now at the point where modules are insulated from each other... and when they import definitions, these imports apply only to them and not other places. 
The way some import functions work act&amp;hellip;'>

          <div id='post_6' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://rebol.metaeducation.com/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2025-04-09T04:41:18Z' class='post-time'>
                    April 9, 2025,  4:41am
                  </time>
                  <meta itemprop='dateModified' content='2025-04-09T04:41:18Z'>
              <span itemprop='position'>6</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <aside class="quote no-group" data-username="hostilefork" data-post="4" data-topic="1570">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="../../../user_avatar/rebol.metaeducation.com/hostilefork/48/421_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p>Making USE arity-2 could avoid the <strong><code>use:some</code></strong>, to be more like:</p>
<pre data-code-wrap="plaintext"><code class="lang-plaintext">use &lt;*&gt; import %ws-runtime.reb
use [foo bar] import %ws-runtime.reb
vm: import %ws-runtime.reb
</code></pre>
</blockquote>
</aside>
<p>Getting to be around the time where I have to do something about this.  (I need the form of import that gives back a module without pulling it into scope...)</p>
<hr>
<p>I can't shake the feeling that when you have a list of configuration things that is possibly infinite, you don't want that potentially infinite list as the first argument.</p>
<p>Looking at this flipped (and <a href="../../revisiting-the-riddle-of-the-r/1664.html">switching back to historical <strong>.r</strong></a>)</p>
<pre><code>use import %ws-runtime.r &lt;*&gt; 
use import %ws-runtime.r [foo bar] 
vm: import %ws-runtime.r
</code></pre>
<p>Now we can ask: how would USE interpret a filename if <em>not</em> as a module?  Could the import be implied?</p>
<pre><code>use %ws-runtime.r &lt;*&gt; 
use %ws-runtime.r [foo bar] 
vm: import %ws-runtime.r
</code></pre>
<p>Bringing me back to: does the arity-2 nature of USE convey the grouping well enough?  If not, we're back to a single arity default:</p>
<pre><code>use %ws-runtime.r 
use [%ws-runtime.r foo bar]
vm: import %ws-runtime.r
</code></pre>
<p>Sidenote here, what (if anything) is the result of a USE operation?  It's importing symbols into a context, so maybe the aggregate context?  Seems to make the most sense, and it's something it has on hand.</p>
<pre><code>let a: 10
let b: 20
aggregate: use make object! [c: 30 d: 4] 
let e: 30

&gt;&gt; aggregate.a
== 10

&gt;&gt; aggregate.c
== 30

&gt;&gt; aggregate.e
** Error e is not in there
</code></pre>
<p>Seems vaguely sane.  So in this world <strong><code>use %foo.r</code></strong> would be a synonym of <strong><code>use import %foo.r</code></strong></p>
<p>It's possible--perhaps--that USE could be an arity-1 equivalent of BIND.</p>
<p>So for example, you might want to import a module's definitions so just one function uses it.  You don't want to do that every time you run the function, so:</p>
<pre><code>something: func [...spec...] (use %some-module.r [...body...])
something-else: ... ; no %some-module.r influence, GROUP! ended
</code></pre>
<p>The use is injecting that module's influence in the evaluation stream, so when the body block evaluates it gets that binding wave added on.  But perhaps you could also write that as:</p>
<pre><code>something: func [...spec...] bind %some-module.r [...body...]
something-else: ... ; no %some-module.r influence, BIND arity-2
</code></pre>
<p>So you wouldn't need to throw up a GROUP! or something to stop the USE propagation from spreading.  It seems logical, that anything you might want to do one way you might want to do the other way.</p>
<p>Sounds nice on paper.  <img src="../../../images/emoji/twitter/page_with_curl.png%3Fv=14" title=":page_with_curl:" class="emoji" alt=":page_with_curl:" loading="lazy" width="20" height="20">  But there's a big wide open design space there about how to subset a binding operation to just the things you want.</p>
<pre><code>use [
    %some-module.r [x y z]
    %some-other-module.r [a b ccc: c]  ; alias c as ccc?
]
</code></pre>
<p>And maybe not all the options have to go on all the things. The above could cover the common IMPORT case, but perhaps you could break it apart:</p>
<pre><code>some-mod: import [%some-module.r &lt;lots&gt; /of #crazy op.t:i/o:n.s]

use [
    (some-mod) [x y z]
    %some-other-module.r [a b ccc: c]
]
</code></pre>
<aside class="quote no-group" data-username="bradrn" data-post="5" data-topic="1570">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="../../../user_avatar/rebol.metaeducation.com/bradrn/48/365_2.png" class="avatar"> bradrn:</div>
<blockquote>
<p>I like the idea of separating USE and IMPORT like that. It feels like a very clean design to me.</p>
</blockquote>
</aside>
<p>It's starting to look palatable... especially if USE and BIND can be unified.</p>
<h2><a name="p-8126-what-about-old-rebol2-use-1" class="anchor" href="6.html#p-8126-what-about-old-rebol2-use-1"></a>What About Old Rebol2 USE?</h2>
<p>What old Rebol2 USE used to do, was effectively EVAL BIND:</p>
<pre><code>x: "outside"
use [x] [  ; old meaning of USE
     x: "inside"
     print [x]  ; prints inside
]
print [x]  ; prints outside
</code></pre>
<p>This form of USE tended to be used to do some prep work and return blocks, e.g. a BIND operation that wanted to do some additional work:</p>
<pre><code>make-thing: func [...] [
    return use [x] [
        x: 1 + 2  ; concept is there's setup code, so you can't just bind
        [some block referring to x]
    ]
]
</code></pre>
<p>Things are a lot different today, and you can accomplish this with LET and other constructs.</p>
<pre><code>    return eval bind [x] [
        x: 1 + 2
        [some block referring to x]
    ]

    return (
        let x: 1 + 2
        [some block referring to x]
    )

    return (
        use {x: 1 + 2}  ; FENCE! behavior not decided, but probably this works
        [some block referring to x]
    )
</code></pre>
<p>I think the idea of being able to slipstream bindings into the current evaluation stream is a higher calling for USE, and I don't think this arity-2-evaluating form is a big priority.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
    </div>

      <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
          <span itemprop='name'>
            <a itemprop="url" href="../1570.html#post_6">show post in topic</a>
          </span>
      </div>

    




    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/guidelines' itemprop="url">Guidelines </a>
        </span>
      </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://rebol.metaeducation.com/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://rebol.metaeducation.com/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    
  </body>
  
</html>
