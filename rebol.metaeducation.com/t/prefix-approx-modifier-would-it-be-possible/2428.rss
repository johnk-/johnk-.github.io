<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Prefix APPROX Modifier... Would It Be Possible?</title>
    <link>https://rebol.metaeducation.com/t/prefix-approx-modifier-would-it-be-possible/2428</link>
    <description>[quote=&quot;hostilefork, post:1, topic:349&quot;]
```
&gt;&gt; 1.0 like 1
== #[true]
```
[/quote]

Just a thought, could you modify the behaviour of `=` with a prefix, e.g. **`(approx 1 = 1.0)`** (could perhaps get messy).</description>
    
    <lastBuildDate>Tue, 29 Apr 2025 12:16:53 +0000</lastBuildDate>
    <category>Math</category>
    <atom:link href="https://rebol.metaeducation.com/t/prefix-approx-modifier-would-it-be-possible/2428.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Prefix APPROX Modifier... Would It Be Possible?</title>
        <dc:creator><![CDATA[hostilefork]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="rgchris" data-post="1" data-topic="2428">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://rebol.metaeducation.com/user_avatar/rebol.metaeducation.com/rgchris/48/14_2.png" class="avatar"> rgchris:</div>
<blockquote>
<p><strong><code>(approx 1 = 1.0)</code></strong></p>
</blockquote>
</aside>
<p><a class="mention" href="https://rebol.metaeducation.com/u/rgchris">@rgchris</a> made this suggestion 7 years ago.</p>
<p>It looked kind of neat, but I didn't see any real way to do it.</p>
<h2><a name="p-8178-in-the-isotopic-era-exclamation_question_mark-atom-exclamation_question_mark-you-might-sort-of-do-it-1" class="anchor" href="https://rebol.metaeducation.com#p-8178-in-the-isotopic-era-exclamation_question_mark-atom-exclamation_question_mark-you-might-sort-of-do-it-1"></a>In The Isotopic Era <img src="https://rebol.metaeducation.com/images/emoji/twitter/exclamation_question_mark.png?v=14" title=":exclamation_question_mark:" class="emoji" alt=":exclamation_question_mark:" loading="lazy" width="20" height="20"> <img src="https://rebol.metaeducation.com/images/emoji/twitter/atom.png?v=14" title=":atom:" class="emoji" alt=":atom:" loading="lazy" width="20" height="20"> <img src="https://rebol.metaeducation.com/images/emoji/twitter/exclamation_question_mark.png?v=14" title=":exclamation_question_mark:" class="emoji" alt=":exclamation_question_mark:" loading="lazy" width="20" height="20"> You Might Sort Of Do It</h2>
<p>This can be made to work <em>IF</em> you are comparing values where the baseline result can be a raised error.</p>
<p>Something like:</p>
<pre><code>&gt;&gt; 1 = 1.0
** (Raised) Error: Different-typed numeric values are only approximately equal
</code></pre>
<p>So you'd be able to have APPROX be a defuser for that <em>specific</em> error ID, and turn it into an ~okay~.</p>
<pre><code>&gt;&gt; approx 1 = 1.0
== ~okay~  ; anti
</code></pre>
<p>Where this wouldn't work would be if the baseline response was falsey, e.g.</p>
<pre><code>&gt;&gt; 1.000000001 = 1.000000000
== ~null~  ; anti
</code></pre>
<p>Hence the only way this would work out would be if you were willing to make that a raised error, forcing people to modify with something like EXACT</p>
<pre><code>&gt;&gt; 1.000000001 = 1.000000000
** (Raised) Error: Numeric values very close, use EXACT or APPROX

&gt;&gt; exact 1.000000001 = 1.000000000
== ~null~  ; anti

&gt;&gt; approx 1.000000001 = 1.000000000
== ~okay~  ; anti
</code></pre>
<h2><a name="p-8178-is-making-close-compares-raise-an-error-a-practical-default-2" class="anchor" href="https://rebol.metaeducation.com#p-8178-is-making-close-compares-raise-an-error-a-practical-default-2"></a>Is Making Close Compares Raise An Error A Practical Default?</h2>
<p>Maybe.  <img src="https://rebol.metaeducation.com/images/emoji/twitter/thinking.png?v=14" title=":thinking:" class="emoji" alt=":thinking:" loading="lazy" width="20" height="20">  But it couldn't be just close compares that raised an error, it would be <em>all</em> floating point EQUAL? tests</p>
<p>See... there is a school of thought saying that plain equality tests shouldn't work on floating point numbers at all.  You should only use SAME? to see if they're the exact same bit pattern, or comparison with some tolerance level.</p>
<p><a href="https://randomascii.wordpress.com/2012/02/25/comparing-floating-point-numbers-2012-edition/" class="inline-onebox">Comparing Floating Point Numbers, 2012 Edition | Random ASCII â€“ tech blog of Bruce Dawson</a></p>
<p>If we were to buck the norms, we could do this very bizarre thing where doing equality comparisons returned a raised error <em>that embedded the exact difference in the error</em>.  (Actually, it would probably have to embed the compared numbers themselves, because as the article points out...the specific magnitudes affect the ideal choices for epsilon.)</p>
<p>APPROX(IMATELY) might use some common epsilon by default, but let you be more specific and act on the amount specified in the error.</p>
<p><strong>This is a wacky idea that would let us help educate people on the innate perils of using equality on floating point numbers, while still letting people use the = operator on floating point numbers.</strong></p>
<p>I can't say I hate it.  It's... interesting.</p>
<p>But it propagates the concern to things like <strong><code>[foo 1.0] = [foo 1.0]</code></strong> ... if we say you can't do floating point comparisons without an approximation, then the moment you have two abstract blocks that want to compare it will trigger the raised error.  And if the error involves an epsilon, how are you going to get the epsilon for <em>all</em> the floating point values in the block.  <img src="https://rebol.metaeducation.com/images/emoji/twitter/frowning.png?v=14" title=":frowning:" class="emoji" alt=":frowning:" loading="lazy" width="20" height="20">  You would have to compare the blocks in their entirety and find the "largest effective epsilon" somehow, and raise the error based on that.</p>
<p>Not impossible--and you have to compare the blocks in their entirety anyway in order to say they were equal--but wild.  If we say the mechanic stops applying when you're comparing blocks, that gives echoes of the historical gap in behavior between comparing individual elements and then comparing them when they're in blocks--which I pointed out as bad mojo.</p>
<p>Anyway... one of many things to think about.</p>
          <p><a href="https://rebol.metaeducation.com/t/prefix-approx-modifier-would-it-be-possible/2428/2">Read full topic</a></p>
        ]]></description>
        <link>https://rebol.metaeducation.com/t/prefix-approx-modifier-would-it-be-possible/2428/2</link>
        <pubDate>Tue, 29 Apr 2025 00:53:08 +0000</pubDate>
        <guid isPermaLink="false">rebol.metaeducation.com-post-2428-2</guid>
        <source url="https://rebol.metaeducation.com/t/prefix-approx-modifier-would-it-be-possible/2428.rss">Prefix APPROX Modifier... Would It Be Possible?</source>
      </item>
      <item>
        <title>Prefix APPROX Modifier... Would It Be Possible?</title>
        <dc:creator><![CDATA[rgchris]]></dc:creator>
        <description><![CDATA[
            <aside class="quote no-group" data-username="hostilefork" data-post="1" data-topic="349">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="https://rebol.metaeducation.com/user_avatar/rebol.metaeducation.com/hostilefork/48/421_2.png" class="avatar"><a href="https://rebol.metaeducation.com/t/349/1">On another topic</a></div>
<blockquote>
<pre data-code-wrap="plaintext"><code class="lang-plaintext">&gt;&gt; 1.0 like 1
== #[true]
</code></pre>
</blockquote>
</aside>
<p>Just a thought, could you modify the behaviour of <code>=</code> with a prefix, e.g. <strong><code>(approx 1 = 1.0)</code></strong> (could perhaps get messy).</p>
          <p><a href="https://rebol.metaeducation.com/t/prefix-approx-modifier-would-it-be-possible/2428/1">Read full topic</a></p>
        ]]></description>
        <link>https://rebol.metaeducation.com/t/prefix-approx-modifier-would-it-be-possible/2428/1</link>
        <pubDate>Mon, 23 Oct 2017 18:07:02 +0000</pubDate>
        <guid isPermaLink="false">rebol.metaeducation.com-post-2428-1</guid>
        <source url="https://rebol.metaeducation.com/t/prefix-approx-modifier-would-it-be-possible/2428.rss">Prefix APPROX Modifier... Would It Be Possible?</source>
      </item>
  </channel>
</rss>
