<?xml version="1.0" encoding="UTF-8" ?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:dc="http://purl.org/dc/elements/1.1/">
  <channel>
    <title>Code Completion As CAPS-LOCK... Way Better Than Tab</title>
    <link>https://rebol.metaeducation.com/t/code-completion-as-caps-lock-way-better-than-tab/2504</link>
    <description>The overloading of the tab key to mean &quot;indent&quot; and &quot;complete code&quot; has always been pretty horrible.  Now it&#39;s intolerable: suggestions from AI come out of the blue at any moment, and can hijack what would have been an indent nanoseconds before.  The tab key becomes completely unreliable in function.

This infuriated me enough to do something about it.

I decided to turn Caps Lock into an actually useful key.

It isn&#39;t too hard to do... *if you know what to do*.  Here&#39;s a handy guide.

## WINDOWS: [PowerToys Keyboard Manager](https://github.com/microsoft/PowerToys?tab=readme-ov-file)

VSCode is actually able to map the caps lock key to completion without any special tools... BUT... *it won&#39;t stop the key from toggling the caps-lock state*.  If your caps lock has a light it will go on and off, and each time you do a completion it will toggle the casing.

So use [Microsoft PowerToys](https://github.com/microsoft/PowerToys?tab=readme-ov-file)  *(it&#39;s open source!)*, specifically the **Keyboard Manager**

![image|663x443, 75%](upload://k8nntHpu3b9V1VPvvya970uaYqb.png)

I&#39;ve remapped the CAPS LOCK key to **F19**.  My keyboard only has 12 function keys, so I&#39;m not bumping anything I&#39;d use out of the way.

*(At first I didn&#39;t realize these extra function keys were available... and tried the &quot;virtual keys&quot; you can assign, with names &quot;VK 1&quot; up to &quot;VK 252&quot;.  But choosing something in this range is a bit fraught... e.g. VK 1 is actually the mouse button.  And they show up in VSCode as &quot;unknown&quot; in the keyboard mapping.)*

The strange choice of F19 (when it goes up to F24) is because the Mac solution can only go up to F20, and the Linux solution has a default collision that you have to do special overrides for F20.  If you want to be able to share your keymaps across your computers, F19 seems a good choice.

## APPLE: [Karabiner Elements](https://karabiner-elements.pqrs.org/)

So the Mac lets you swap the Caps Lock for another modifier key (like Shift or Ctrl), or disable it entirely.  But you can&#39;t make it do anything specific as a key out of the box.

A program called [Karabiner Elements](https://karabiner-elements.pqrs.org/) does a bunch of useful things (&quot;and it&#39;s only a hundred megabytes&quot;)  :roll_eyes:

You&#39;ll have to approve a list of scary-sounding permissions that you are installing an app and driver that sees every key that you press.  But, Karabiner Elements is also open source:

  [https://github.com/pqrs-org/Karabiner-Elements](https://github.com/pqrs-org/Karabiner-Elements)

And they seem generally trustworthy enough in the scheme of things, to use their binaries, but... I guess it depends on how badly you want to remap the Caps Lock key.

*(Disdain for all of this is certainly why Carl was aiming to have a Rebol OS.)*

It&#39;s in &quot;Simple Modifications&quot;:

![image|690x166, 75%](upload://aHFv9Lz7QcXbLTdJbvgRW1CiJ5S.png)

Note that if you previously had the OS doing mappings of your modifier keys, this overrules that.  So you&#39;ll have to reconfigure your swappings of Command/Ctrl/Fn/etc.
## LINUX: [`keyd`](https://github.com/rvaiya/keyd) (key daemon)

You would think a configuration thing like this would be easy on Linux, but it took me and the AI quite a while of trying things with no effect before a solution was found.

There are files that *look* like editing them should be able to produce the desired effect.  The files `/usr/share/X11/xkb/symbols/pc` and `/usr/share/X11/xkb/keycodes/evdev` sure look like source code for specifying the entirety of your keyboard&#39;s behavior.  But when it comes to the caps lock key, no dice--about the best I could accomplish was get it to not do anything (even though the light on the key toggled on and off).

The keyd project seems to be the right solution to this problem, and works on x11 or Wayland, and it&#39;s got some cool features too.  But it&#39;s not in the Debian repositories so you have to build it from source:

    git clone https://github.com/rvaiya/keyd
    cd keyd
    make
    sudo make install
    sudo systemctl enable keyd
    sudo systemctl start keyd

Once you&#39;ve got it, you edit `/etc/keyd/default.conf`:

    [ids]
    *

    [main]
    capslock = f19

Then you restart the daemon:

    $ sudo systemctl restart keyd

If you&#39;re lucky, that should work!  But if your `xmodmap` contains instructions that route the keys to functions, you won&#39;t get them falling through to where VSCode and such can see them.  That&#39;s what&#39;s wrong with F20, it defaults to mapping the microphone input.  You can see it with a grep for F20&#39;s keycode, which is 198:

    $ xmodmap -pke | grep 198
    keycode 198 = XF86AudioMicMute NoSymbol XF86AudioMicMute

Your Linux installation might have made other arbitrary choices, perhaps even with F19.

To get into the weeds with xmodmap, you can edit your `~/.Xmodmap` file:

    keycode 198 = F20

Load it to see the changes:

    $ xmodmap ~/.Xmodmap

For me, that worked to let me map it for F20.  But in this handy guide, I&#39;m just suggesting using F19 so you don&#39;t have to go further with adding that xmodmap persistently to your startup files.</description>
    
    <lastBuildDate>Mon, 07 Jul 2025 19:03:19 +0000</lastBuildDate>
    <category>C/C++ Implementation</category>
    <atom:link href="https://rebol.metaeducation.com/t/code-completion-as-caps-lock-way-better-than-tab/2504.rss" rel="self" type="application/rss+xml" />
      <item>
        <title>Code Completion As CAPS-LOCK... Way Better Than Tab</title>
        <dc:creator><![CDATA[hostilefork]]></dc:creator>
        <description><![CDATA[
            <p>The overloading of the tab key to mean "indent" and "complete code" has always been pretty horrible.  Now it's intolerable: suggestions from AI come out of the blue at any moment, and can hijack what would have been an indent nanoseconds before.  The tab key becomes completely unreliable in function.</p>
<p>This infuriated me enough to do something about it.</p>
<p>I decided to turn Caps Lock into an actually useful key.</p>
<p>It isn't too hard to do... <em>if you know what to do</em>.  Here's a handy guide.</p>
<h2><a name="p-8498-windows-powertoys-keyboard-managerhttpsgithubcommicrosoftpowertoystabreadme-ov-file-1" class="anchor" href="https://rebol.metaeducation.com#p-8498-windows-powertoys-keyboard-managerhttpsgithubcommicrosoftpowertoystabreadme-ov-file-1"></a>WINDOWS: <a href="https://github.com/microsoft/PowerToys?tab=readme-ov-file">PowerToys Keyboard Manager</a></h2>
<p>VSCode is actually able to map the caps lock key to completion without any special tools... BUT... <em>it won't stop the key from toggling the caps-lock state</em>.  If your caps lock has a light it will go on and off, and each time you do a completion it will toggle the casing.</p>
<p>So use <a href="https://github.com/microsoft/PowerToys?tab=readme-ov-file">Microsoft PowerToys</a>  <em>(it's open source!)</em>, specifically the <strong>Keyboard Manager</strong></p>
<p></p><div class="lightbox-wrapper"><a class="lightbox" href="https://rebol.metaeducation.com/uploads/default/original/1X/8d1de5ca96aaa4f3b77498e7cee347110cdc3217.png" data-download-href="https://rebol.metaeducation.com/uploads/default/8d1de5ca96aaa4f3b77498e7cee347110cdc3217" title="image"><img src="https://rebol.metaeducation.com/uploads/default/original/1X/8d1de5ca96aaa4f3b77498e7cee347110cdc3217.png" alt="image" data-base62-sha1="k8nntHpu3b9V1VPvvya970uaYqb" width="497" height="332"></a></div><p></p>
<p>I've remapped the CAPS LOCK key to <strong>F19</strong>.  My keyboard only has 12 function keys, so I'm not bumping anything I'd use out of the way.</p>
<p><em>(At first I didn't realize these extra function keys were available... and tried the "virtual keys" you can assign, with names "VK 1" up to "VK 252".  But choosing something in this range is a bit fraught... e.g. VK 1 is actually the mouse button.  And they show up in VSCode as "unknown" in the keyboard mapping.)</em></p>
<p>The strange choice of F19 (when it goes up to F24) is because the Mac solution can only go up to F20, and the Linux solution has a default collision that you have to do special overrides for F20.  If you want to be able to share your keymaps across your computers, F19 seems a good choice.</p>
<h2><a name="p-8498-apple-karabiner-elementshttpskarabiner-elementspqrsorg-2" class="anchor" href="https://rebol.metaeducation.com#p-8498-apple-karabiner-elementshttpskarabiner-elementspqrsorg-2"></a>APPLE: <a href="https://karabiner-elements.pqrs.org/">Karabiner Elements</a></h2>
<p>So the Mac lets you swap the Caps Lock for another modifier key (like Shift or Ctrl), or disable it entirely.  But you can't make it do anything specific as a key out of the box.</p>
<p>A program called <a href="https://karabiner-elements.pqrs.org/">Karabiner Elements</a> does a bunch of useful things ("and it's only a hundred megabytes")  <img src="https://rebol.metaeducation.com/images/emoji/twitter/roll_eyes.png?v=14" title=":roll_eyes:" class="emoji" alt=":roll_eyes:" loading="lazy" width="20" height="20"></p>
<p>You'll have to approve a list of scary-sounding permissions that you are installing an app and driver that sees every key that you press.  But, Karabiner Elements is also open source:</p>
<p><a href="https://github.com/pqrs-org/Karabiner-Elements">https://github.com/pqrs-org/Karabiner-Elements</a></p>
<p>And they seem generally trustworthy enough in the scheme of things, to use their binaries, but... I guess it depends on how badly you want to remap the Caps Lock key.</p>
<p><em>(Disdain for all of this is certainly why Carl was aiming to have a Rebol OS.)</em></p>
<p>It's in "Simple Modifications":</p>
<p></p><div class="lightbox-wrapper"><a class="lightbox" href="https://rebol.metaeducation.com/uploads/default/original/1X/4b057513043b5c269a8379553672de353272cad0.png" data-download-href="https://rebol.metaeducation.com/uploads/default/4b057513043b5c269a8379553672de353272cad0" title="image"><img src="https://rebol.metaeducation.com/uploads/default/optimized/1X/4b057513043b5c269a8379553672de353272cad0_2_517x124.png" alt="image" data-base62-sha1="aHFv9Lz7QcXbLTdJbvgRW1CiJ5S" width="517" height="124" srcset="https://rebol.metaeducation.com/uploads/default/optimized/1X/4b057513043b5c269a8379553672de353272cad0_2_517x124.png, https://rebol.metaeducation.com/uploads/default/optimized/1X/4b057513043b5c269a8379553672de353272cad0_2_775x186.png 1.5x, https://rebol.metaeducation.com/uploads/default/optimized/1X/4b057513043b5c269a8379553672de353272cad0_2_1034x248.png 2x" data-dominant-color="E8EAED"></a></div><p></p>
<p>Note that if you previously had the OS doing mappings of your modifier keys, this overrules that.  So you'll have to reconfigure your swappings of Command/Ctrl/Fn/etc.</p>
<h2><a name="p-8498-linux-keydhttpsgithubcomrvaiyakeyd-key-daemon-3" class="anchor" href="https://rebol.metaeducation.com#p-8498-linux-keydhttpsgithubcomrvaiyakeyd-key-daemon-3"></a>LINUX: <a href="https://github.com/rvaiya/keyd"><code>keyd</code></a> (key daemon)</h2>
<p>You would think a configuration thing like this would be easy on Linux, but it took me and the AI quite a while of trying things with no effect before a solution was found.</p>
<p>There are files that <em>look</em> like editing them should be able to produce the desired effect.  The files <code>/usr/share/X11/xkb/symbols/pc</code> and <code>/usr/share/X11/xkb/keycodes/evdev</code> sure look like source code for specifying the entirety of your keyboard's behavior.  But when it comes to the caps lock key, no dice--about the best I could accomplish was get it to not do anything (even though the light on the key toggled on and off).</p>
<p>The keyd project seems to be the right solution to this problem, and works on x11 or Wayland, and it's got some cool features too.  But it's not in the Debian repositories so you have to build it from source:</p>
<pre><code>git clone https://github.com/rvaiya/keyd
cd keyd
make
sudo make install
sudo systemctl enable keyd
sudo systemctl start keyd
</code></pre>
<p>Once you've got it, you edit <code>/etc/keyd/default.conf</code>:</p>
<pre><code>[ids]
*

[main]
capslock = f19
</code></pre>
<p>Then you restart the daemon:</p>
<pre><code>$ sudo systemctl restart keyd
</code></pre>
<p>If you're lucky, that should work!  But if your <code>xmodmap</code> contains instructions that route the keys to functions, you won't get them falling through to where VSCode and such can see them.  That's what's wrong with F20, it defaults to mapping the microphone input.  You can see it with a grep for F20's keycode, which is 198:</p>
<pre><code>$ xmodmap -pke | grep 198
keycode 198 = XF86AudioMicMute NoSymbol XF86AudioMicMute
</code></pre>
<p>Your Linux installation might have made other arbitrary choices, perhaps even with F19.</p>
<p>To get into the weeds with xmodmap, you can edit your <code>~/.Xmodmap</code> file:</p>
<pre><code>keycode 198 = F20
</code></pre>
<p>Load it to see the changes:</p>
<pre><code>$ xmodmap ~/.Xmodmap
</code></pre>
<p>For me, that worked to let me map it for F20.  But in this handy guide, I'm just suggesting using F19 so you don't have to go further with adding that xmodmap persistently to your startup files.</p>
          <p><a href="https://rebol.metaeducation.com/t/code-completion-as-caps-lock-way-better-than-tab/2504/1">Read full topic</a></p>
        ]]></description>
        <link>https://rebol.metaeducation.com/t/code-completion-as-caps-lock-way-better-than-tab/2504/1</link>
        <pubDate>Mon, 07 Jul 2025 11:36:08 +0000</pubDate>
        <guid isPermaLink="false">rebol.metaeducation.com-post-2504-1</guid>
        <source url="https://rebol.metaeducation.com/t/code-completion-as-caps-lock-way-better-than-tab/2504.rss">Code Completion As CAPS-LOCK... Way Better Than Tab</source>
      </item>
  </channel>
</rss>
