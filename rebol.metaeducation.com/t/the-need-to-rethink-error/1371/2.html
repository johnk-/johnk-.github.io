<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>The Need To Rethink ERROR! - #2 by hostilefork - Errors - AltRebol</title>
    <meta name="description" content="Looking around at how people deal with failure conditions, there&amp;#39;s a pretty strong trend against exceptions--a trend which has grown stronger in the last batch of popular languages. 
Exceptions operate on a dubious princ&amp;hellip;">
    <meta name="generator" content="Discourse 3.5.0.beta6-dev - https://github.com/discourse/discourse version 623cde985b21c2ed812b83d3ea94f69231613718">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" media="all" content="#fff">

<meta name="color-scheme" content="light">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, viewport-fit=cover">
<link rel="canonical" href="../1371.html" />

<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="AltRebol Search">

    <link href="https://rebol.metaeducation.com/stylesheets/color_definitions_base__2_ceb61c279a74dfa3cef6a62f7784988102abec82.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" class="light-scheme"/>

<link href="https://rebol.metaeducation.com/stylesheets/common_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="common"  />

  <link href="https://rebol.metaeducation.com/stylesheets/desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="desktop"  />



    <link href="https://rebol.metaeducation.com/stylesheets/chat_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="chat"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-details_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-details"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-lazy-videos_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-local-dates_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-narrative-bot_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-presence_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-presence"  />
    <link href="https://rebol.metaeducation.com/stylesheets/docker_manager_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="docker_manager"  />
    <link href="https://rebol.metaeducation.com/stylesheets/footnote_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="footnote"  />
    <link href="https://rebol.metaeducation.com/stylesheets/poll_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="poll"  />
    <link href="https://rebol.metaeducation.com/stylesheets/spoiler-alert_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="spoiler-alert"  />
    <link href="https://rebol.metaeducation.com/stylesheets/chat_desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="chat_desktop"  />
    <link href="https://rebol.metaeducation.com/stylesheets/poll_desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="https://rebol.metaeducation.com/stylesheets/common_theme_2_57fe803ed5a41e9f7d94086afaf66a1aab57d9ae.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="common_theme" data-theme-id="2" data-theme-name="default"/>
    

    
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;The Need To Rethink ERROR!&#39;" href="../1371.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://rebol.metaeducation.com/t/the-need-to-rethink-error/1371/2" />
<meta name="twitter:url" content="https://rebol.metaeducation.com/t/the-need-to-rethink-error/1371/2" />
<meta property="og:title" content="The Need To Rethink ERROR!" />
<meta name="twitter:title" content="The Need To Rethink ERROR!" />
<meta property="og:description" content="Thoughts on CALL And Errors In @gchiu&#39;s small pharmac script, there are a couple of uses of CALL that run ghostscript (gs):  call [     gs -sDEVICE=pngmono -o (join root &quot;-%02d.png&quot;) -r600 (pdfname) ]  call [     gs -sDEVICE=eps2write -sPAPERSIZE=a4         -o (join root &quot;-%02d.eps&quot;) (pdfname) ]  But if either of these calls fail, the script will keep running.  That is because CALL is not checking the result code...and in OS terms, any process that returns a nonzero value had an error.  I think ..." />
<meta name="twitter:description" content="Thoughts on CALL And Errors In @gchiu&#39;s small pharmac script, there are a couple of uses of CALL that run ghostscript (gs):  call [     gs -sDEVICE=pngmono -o (join root &quot;-%02d.png&quot;) -r600 (pdfname) ]  call [     gs -sDEVICE=eps2write -sPAPERSIZE=a4         -o (join root &quot;-%02d.eps&quot;) (pdfname) ]  But if either of these calls fail, the script will keep running.  That is because CALL is not checking the result code...and in OS terms, any process that returns a nonzero value had an error.  I think ..." />
<meta property="og:article:section" content="Development" />
<meta property="og:article:section:color" content="25AAE2" />
<meta property="og:article:section" content="Errors" />
<meta property="og:article:section:color" content="25AAE2" />
<meta property="article:published_time" content="2021-10-04T22:00:48+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler ">
    
    <header>
  <a href="https://rebol.metaeducation.com/">AltRebol</a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="../1371.html">The Need To Rethink ERROR!</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://rebol.metaeducation.com/c/development/errors/54" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://rebol.metaeducation.com/c/development/errors/54" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Errors</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  

    <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='The Need To Rethink ERROR!'>
      <link itemprop='url' href='../1371.html'>
      <meta itemprop='datePublished' content='2020-10-23T07:48:00Z'>
        <meta itemprop='articleSection' content='Errors'>
      <meta itemprop='keywords' content=''>
      <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
        <meta itemprop='name' content='AltRebol'>
          <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
            <meta itemprop='url' content='https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
          </div>
      </div>

          <span itemprop='author' itemscope itemtype="http://schema.org/Person">
            <meta itemprop='name' content='hostilefork'>
            <link itemprop='url' rel='nofollow' href='https://rebol.metaeducation.com/u/hostilefork'>
          </span>
        <meta itemprop='text' content='Looking around at how people deal with failure conditions, there&amp;#39;s a pretty strong trend against exceptions--a trend which has grown stronger in the last batch of popular languages. 
Exceptions operate on a dubious princ&amp;hellip;'>

          <div id='post_2' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://rebol.metaeducation.com/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-10-04T22:00:48Z' class='post-time'>
                    October 4, 2021, 10:00pm
                  </time>
                  <meta itemprop='dateModified' content='2021-10-04T22:11:29Z'>
              <span itemprop='position'>2</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <h2><a name="p-5563-thoughts-on-call-and-errors-1" class="anchor" href="2.html#p-5563-thoughts-on-call-and-errors-1"></a>Thoughts on CALL And Errors</h2>
<p>In <a class="mention" href="https://rebol.metaeducation.com/u/gchiu">@gchiu</a>'s small pharmac script, there are a <a href="https://github.com/gchiu/pharmac/blob/master/scripts/grab-pdfs.reb#L122">couple of uses of CALL</a> that run ghostscript (gs):</p>
<pre><code>call [
    gs -sDEVICE=pngmono -o (join root "-%02d.png") -r600 (pdfname)
]

call [
    gs -sDEVICE=eps2write -sPAPERSIZE=a4
        -o (join root "-%02d.eps") (pdfname)
]
</code></pre>
<p><strong>But if either of these calls fail, the script will keep running.</strong>  That is because CALL is not checking the result code...and in OS terms, any process that returns a nonzero value had an error.</p>
<p><strong>I think the default behavior of CALL should be to raise an error on a nonzero result.</strong></p>
<p>The best strategy seems that if you request the exit status explicitly, then it would assume you were going to handle it.</p>
<pre><code>[# status]: call [...]
</code></pre>
<p>What makes this a little bit weird is that there doesn't seem to be any particularly great return result from CALL besides the integer return value.  So there'd be a ~none~ return result by default, and this status would be the secondary result.</p>
<p>This doesn't exactly fit the pattern of my "distinguished error" result, because the status is an integer... not an ERROR!.  Though if you don't ask for the status and it raises an error because of that you could see it that way:</p>
<pre><code>[#].err: call [...]
</code></pre>
<h2><a name="p-5563-could-a-function-tell-if-you-use-its-primary-return-result-2" class="anchor" href="2.html#p-5563-could-a-function-tell-if-you-use-its-primary-return-result-2"></a>Could a Function Tell If You "Use" Its Primary Return Result?</h2>
<p>It's hard to say what "using" would mean.</p>
<p>For instance, imagine this scenario:</p>
<pre><code>&gt;&gt; call [rm nonexistentfile.txt] print "nocheck"
** Error: CALL returned exitstatus 1
** Near: rm nonexistentfile.txt
</code></pre>
<p>So I'm proposing that would raise an error in a script.  But what if you wrote:</p>
<pre><code>&gt;&gt; call [rm nonexistentfile.txt]
== 1
</code></pre>
<p>The value 1 got "used" in the sense that it was reported by the console.  Should that count as suppressing the error, since someone took the result?</p>
<p>What about:</p>
<pre><code>&gt;&gt; elide call [rm nonexistentfile.txt]
</code></pre>
<p>The ELIDE consumed the result, but threw it away.  It doesn't seem that should suppress errors.</p>
<p>Really only multiple-returns are set up to be explicitly thought of as "requested" vs. not.  We could argue that explicit setting to a word is different:</p>
<pre><code>status: call [rm nonexistentfile.txt]
</code></pre>
<p>And then CALL could be told whether there was an explicit assignment or not.  But the way that multi-returns are checked is if their argument names are null or not...and the RETURN argument isn't named right now (it's just the RETURN: in the spec).</p>
<p>Overall I am wary of trying to do anything detection-wise with the main return, and keep that for multi-returns...which are really just syntactic sugar over refinements.  That has this weird implication for CALL not having the exitstatus as its primary return.  Oh well.</p>
<h2><a name="p-5563-thoughts-on-call-and-asynchronousness-3" class="anchor" href="2.html#p-5563-thoughts-on-call-and-asynchronousness-3"></a>Thoughts on CALL and Asynchronousness</h2>
<aside class="quote no-group" data-username="hostilefork" data-post="1" data-topic="1371">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="../../../user_avatar/rebol.metaeducation.com/hostilefork/48/421_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p>Another key contributor to exception unpopularity is <strong>exceptions don't work well with asynchronous programming</strong>. Code that triggered a request can be off the stack while a handler is running. So there is nowhere to put a <code>catch {}</code> above the stack for the problem.</p>
</blockquote>
</aside>
<p>In the model I'm pushing for asynchronousness, this argument isn't as applicable...because the error can be received by the callsite.</p>
<p>What you'd want to do to make CALL asynchronous would be to just spawn it off on a separate "goroutine"-like thing.</p>
<p>If you didn't care about the result, you could just do something like this:</p>
<pre><code> go [call [echo "I'm being printed by the OS"]]
 print "This could print before the echo executes."
</code></pre>
<p>But if you wanted to coordinate, you'd make something like a "channel" and have the goroutine transmit updates on it.</p>
<pre><code>let c: make-channel
go [
    send-channel c &lt;start&gt;
    call [echo "I'm being printed by the OS"]
    send-channel c &lt;finish&gt;
    close-channel c
]
while [msg: receive-channel c] [
   print ["Got signal from channel:" msg]
]
print "Channel has been closed"
</code></pre>
<p>That would be one strategy.  But a different strategy would be used if you wanted to communicate with the input and receive the output, in a streaming fashion.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="2" />
              <span class='post-likes'>2 Likes</span>
            </div>

                <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../../making-call-raise-a-definitional-error-for-bad-exit-codes/2068.html">Making CALL Raise a (definitional) Error For Bad Exit Codes</a>
                        <meta itemprop='position' content='2'>
                      </div>
                </div>
          </div>
    </div>

      <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
          <span itemprop='name'>
            <a itemprop="url" href="../1371.html#post_2">show post in topic</a>
          </span>
      </div>

    




    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/guidelines' itemprop="url">Guidelines </a>
        </span>
      </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://rebol.metaeducation.com/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://rebol.metaeducation.com/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    
  </body>
  
</html>
