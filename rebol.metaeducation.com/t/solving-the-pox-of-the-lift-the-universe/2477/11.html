<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Solving the Pox of the (^)... LIFT the Universe? - #11 by hostilefork - Internals - AltRebol</title>
    <meta name="description" content="I&amp;#39;ve taken the big bold leap into the world of fully LIFT&amp;#39;ed FRAME!s. 
As a refresher: this is the idea that as far as the &amp;quot;API&amp;quot; for calling functions is concerned, you always communicate via lifted values. 
That means w&amp;hellip;">
    <meta name="generator" content="Discourse 3.5.0.beta6-dev - https://github.com/discourse/discourse version 623cde985b21c2ed812b83d3ea94f69231613718">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" media="all" content="#fff">

<meta name="color-scheme" content="light">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, viewport-fit=cover">
<link rel="canonical" href="../2477.html" />

<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="AltRebol Search">

    <link href="https://rebol.metaeducation.com/stylesheets/color_definitions_base__2_ceb61c279a74dfa3cef6a62f7784988102abec82.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" class="light-scheme"/>

<link href="https://rebol.metaeducation.com/stylesheets/common_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="common"  />

  <link href="https://rebol.metaeducation.com/stylesheets/desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="desktop"  />



    <link href="https://rebol.metaeducation.com/stylesheets/chat_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="chat"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-details_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-details"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-lazy-videos_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-local-dates_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-narrative-bot_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-presence_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-presence"  />
    <link href="https://rebol.metaeducation.com/stylesheets/docker_manager_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="docker_manager"  />
    <link href="https://rebol.metaeducation.com/stylesheets/footnote_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="footnote"  />
    <link href="https://rebol.metaeducation.com/stylesheets/poll_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="poll"  />
    <link href="https://rebol.metaeducation.com/stylesheets/spoiler-alert_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="spoiler-alert"  />
    <link href="https://rebol.metaeducation.com/stylesheets/chat_desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="chat_desktop"  />
    <link href="https://rebol.metaeducation.com/stylesheets/poll_desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="https://rebol.metaeducation.com/stylesheets/common_theme_2_57fe803ed5a41e9f7d94086afaf66a1aab57d9ae.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="common_theme" data-theme-id="2" data-theme-name="default"/>
    

    
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;Solving the Pox of the (^)... LIFT the Universe?&#39;" href="../2477.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://rebol.metaeducation.com/t/solving-the-pox-of-the-lift-the-universe/2477/11" />
<meta name="twitter:url" content="https://rebol.metaeducation.com/t/solving-the-pox-of-the-lift-the-universe/2477/11" />
<meta property="og:title" content="Solving the Pox of the (^)... LIFT the Universe?" />
<meta name="twitter:title" content="Solving the Pox of the (^)... LIFT the Universe?" />
<meta property="og:description" content="I&#39;ve pushed this through... and by and large I&#39;d say it&#39;s a really positive direction.  Of course, it&#39;s a GIGANTIC model change.  So there are some issues which have to be faced.  Impact on Generators Previously, the idea with a generator was that it could produce any value that wasn&#39;t an unstable ERROR! antiform.  The only legal ERROR! to YIELD was one with id: &#39;done, and this would be interpreted as the end of the enumeration.  YIELD-ing any other ERROR! would result in it being promoted to a..." />
<meta name="twitter:description" content="I&#39;ve pushed this through... and by and large I&#39;d say it&#39;s a really positive direction.  Of course, it&#39;s a GIGANTIC model change.  So there are some issues which have to be faced.  Impact on Generators Previously, the idea with a generator was that it could produce any value that wasn&#39;t an unstable ERROR! antiform.  The only legal ERROR! to YIELD was one with id: &#39;done, and this would be interpreted as the end of the enumeration.  YIELD-ing any other ERROR! would result in it being promoted to a..." />
<meta property="og:article:section" content="Development" />
<meta property="og:article:section:color" content="25AAE2" />
<meta property="og:article:section" content="Internals" />
<meta property="og:article:section:color" content="25AAE2" />
<meta property="article:published_time" content="2025-06-20T11:40:34+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler ">
    
    <header>
  <a href="https://rebol.metaeducation.com/">AltRebol</a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="../2477.html">Solving the Pox of the (^)... LIFT the Universe?</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://rebol.metaeducation.com/c/development/internals/9" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://rebol.metaeducation.com/c/development/internals/9" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Internals</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  

    <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='Solving the Pox of the (^)... LIFT the Universe?'>
      <link itemprop='url' href='../2477.html'>
      <meta itemprop='datePublished' content='2025-06-06T22:07:42Z'>
        <meta itemprop='articleSection' content='Internals'>
      <meta itemprop='keywords' content=''>
      <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
        <meta itemprop='name' content='AltRebol'>
          <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
            <meta itemprop='url' content='https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
          </div>
      </div>

          <span itemprop='author' itemscope itemtype="http://schema.org/Person">
            <meta itemprop='name' content='hostilefork'>
            <link itemprop='url' rel='nofollow' href='https://rebol.metaeducation.com/u/hostilefork'>
          </span>
        <meta itemprop='text' content='I&amp;#39;ve taken the big bold leap into the world of fully LIFT&amp;#39;ed FRAME!s. 
As a refresher: this is the idea that as far as the &amp;quot;API&amp;quot; for calling functions is concerned, you always communicate via lifted values. 
That means w&amp;hellip;'>

          <div id='post_11' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://rebol.metaeducation.com/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2025-06-20T11:40:34Z' class='post-time'>
                    June 20, 2025, 11:40am
                  </time>
                  <meta itemprop='dateModified' content='2025-06-20T11:55:35Z'>
              <span itemprop='position'>11</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <aside class="quote no-group" data-username="hostilefork" data-post="2" data-topic="2477">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="../../../user_avatar/rebol.metaeducation.com/hostilefork/48/421_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p>I sure hope I'm not missing something here, because this looks great.</p>
</blockquote>
</aside>
<p>I've pushed this through... and by and large I'd say it's a <em>really</em> positive direction.</p>
<p>Of course, it's a GIGANTIC model change.  So there are some issues which have to be faced.</p>
<h2><a name="p-8449-impact-on-generators-1" class="anchor" href="11.html#p-8449-impact-on-generators-1"></a>Impact on Generators</h2>
<p>Previously, the idea with a generator was that it could produce any value that wasn't an unstable ERROR! antiform.  The only legal ERROR! to YIELD was one with <strong><code>id: 'done</code></strong>, and this would be interpreted as the end of the enumeration.  YIELD-ing any other ERROR! would result in it being promoted to a PANIC.</p>
<p>I said this was better than using NULL, because it meant anything that could be stored in a variable could be returned... your generator could give back sequences like NULL, 10, NULL, 20 etc.  If NULL wasn't in-band you could always TRY the result of your generator and get NULL for the only legitimate ERROR! it could return... being done.  Otherwise you could test with <code>done?</code></p>
<p>My hope was that generators would be able to power things like FOR-EACH, by providing a feed of values back.  But with lift-the-universe, what's legal to store in a variable has broadened...when you're using ^META-representation.</p>
<p>If you have something like:</p>
<pre><code>for-each [^val] generator-for-values-of-object obj [ 
    ...
]
</code></pre>
<p><em>(<a href="../../literal-arguments-as-proxies-for-dialects/2489.html">Note this may go back to being legal as <strong>for-each ^val</strong> soon</a>, pending deep thought.)</em></p>
<p>So the OBJECT! can contain ERROR! values, stored via ^META assignment.</p>
<p>If we had to change all generators that fed back values to use a lifted protocol (like TWEAK does), that would make those generators less generally useful.</p>
<p><em>Note that conceptually, this problem isn't new.</em>  It just puts the problem a bit more in your face.  A generator couldn't speak in terms of ERROR! values before--as I mentioned--so <em>something</em> gets twisted up here.  The twist has just encroached upon something more fundamental, e.g. enumerating things that can be valid values in an OBJECT!.  So it's not as easily dismissed as before with "well, if you want to return an error from your generator do it lifted".</p>
<p><strong>There may be a workaround if PACK!s aren't taken literally.</strong>  This was already something I was considering, e.g. I was thinking that the reason you could write:</p>
<pre><code>for-each 'key obj [...]

for-each [key val] obj [...]
</code></pre>
<p>Was that the generator behind the scenes powering the OBJ fields would return a PACK! with the key and value in it.  If it didn't return a PACK!, then what would happen when you said <strong>for-each 'key obj [...]</strong> would be that you'd get the key on one iteration, that key's value on the next, then the next key, then the next value... it would be the PACK! coming back from the generator that signaled "hey, I'm actually <em>two</em> values that should be part of <em>one</em> iteration"</p>
<p>So if that's already true--that PACK! isn't literal--then returning an <em>actual</em> pack would have to be done with a PACK-inside-a-PACK.  And by the same token, an ERROR! could be handled by being inside a pack as well.</p>
<p>What's nice about this is that it pushes the "weirdness" off a bit.  Generators that want to be compatible with FOR-EACH and friends don't have to speak fully in terms of a lifted protocol.  They just have to return their PACK! and ERROR! wrapped inside a PACK!... that's the bargain.  <em>(Perhaps GHOST! would have to be inside a PACK! as well just to say "all unstable antiforms must be wrapped in a PACK! to be used with FOR-EACH/MAP-EACH?  I don't know if there's a reason, but if the other two have to be then maybe I can find a good reason why it should apply to ghosts too.)</em></p>
<p><strong>I think this seems like an acceptable tradeoff.</strong>  It doesn't mean you have to use PACK! this way in your own off-the-cuff generators that aren't intended to be used with FOR-EACH.  But you always had to deal with the ERROR! exception, and this just throws in another exception that solves the exception.</p>
<h2><a name="p-8449-sidenote-representing-true-unset-2" class="anchor" href="11.html#p-8449-sidenote-representing-true-unset-2"></a>Sidenote: Representing "True Unset"</h2>
<p>So this actually does have another wrinkle, which is that since object values can now hold states "beneath" even unstable antiforms... how to represent the state that leaks through to casual user consciousness: <em>true unset</em>?</p>
<pre><code>&gt;&gt; f. make frame! negate/

&gt;&gt; f.number
** Panic: number is truly unset

&gt;&gt; f.^number
** Panic: look man, it's not TRASH!, it's TRULY UNSET, ^META won't help you

&gt;&gt; unset? $f.number  ; &lt;-- special functions must be used!
== \~okay~\  ; antiform
</code></pre>
<p>So now, let's go back to our generator-powering-for-each:</p>
<pre><code>for-each [key ^val] f [
   if unset? $val [print [key "is unset!"]]
]
</code></pre>
<p>Notice there's no problem with what state we want ^val to hold (though there is some question over whether you should have to say ^val to get the unsetness, or if plain val would allow it).</p>
<p>The problem is: <em>how would a generator be able to return this state</em>?  <img src="../../../images/emoji/twitter/frowning.png%3Fv=14" title=":frowning:" class="emoji" alt=":frowning:" loading="lazy" width="20" height="20"></p>
<p>Curiously, if you were building a PACK! by hand, you could make something that did it.  The unlifted band has not been used in PACK historically... every element had to be a quasiform or quoted.  But if you build a pack manually, you can actually put sub-band values in it... as long as they're not antiforms and can go in a BLOCK!:</p>
<pre><code>&gt;&gt; anti ['number _]
== \~['number _]~\  ; antiform
</code></pre>
<p>I'm choosing <code>_</code> here as an arbitrary out-of-band thing that could represent the truly unset state.  But the key is that whatever it is, it can't be a quasiform or quoted.  TWEAK should probably use the same state here <em>(I've been using the <code>~</code> antiform so far, but that would be disconnected with this purpose--it's easy to change.)</em></p>
<p>How many sub-band values should be legal?  I don't know, but if we made an exception for just this <em>one</em> then it seems to address this particular problem.</p>
<p>Does SET-BLOCK have to support it, just because it exists to paper over a representational hole in enumerating OBJECT! values via generators?  I don't know if it does or not.</p>
<p>Does there have to be some helper for making it easier to make these?</p>
<pre><code>&gt;&gt; unsettable-pack [1 + 2 &lt;special-unset-signal&gt; _]
== \~['3 _ '_]~\  ; antiform
</code></pre>
<p>Probably not.  It's by design that PACK! is pretty easy to make.</p>
<pre><code>&gt;&gt; anti reduce [lift 1 + 2 _ lift _]
== \~['3 _ '_]~\  ; antiform
</code></pre>
<p>Any in-the-box construct that obfuscates that probably isn't helping.  If you find yourself generating a lot of these in some pattern you can write your own helper.</p>
<h2><a name="p-8449-side-note-addendum-generator-binding-requests-3" class="anchor" href="11.html#p-8449-side-note-addendum-generator-binding-requests-3"></a>Side Note Addendum: Generator Binding Requests</h2>
<p>Since I can think of solutions to the lift-the-universe problems...and see them as epicycles of an already existing problem... that's not such a big deal for the generator-powered FOR-EACH.</p>
<p>A bit more of a problem is the question of <a href="../../sticky-set-word-binding-problem-in-make-object/2127/5.html">how to communicate <code>$var</code> to ask for binding to be imparted on a per-variable basis</a>.</p>
<p>Maybe since the protocol is already special, passing a generator :BINDINGS might ask for an inflation where it returns 2x as many values via PACK!... the value and then the binding separately, and FOR-EACH/etc. would then merge the bindings onto the values if they were applicable to the corresponding variable.</p>
<p>It's an ugly idea, but it's the first idea I've had that might work.  I just mention it because if we resorted to passing in the variables to the generator so it could see the decoration, that would also provide a channel for pure-unsetting the variable.  But that doesn't jibe with how I'm thinking about this working.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="1" />
              <span class='post-likes'>1 Like</span>
            </div>

          </div>
    </div>

      <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
          <span itemprop='name'>
            <a itemprop="url" href="../2477.html#post_11">show post in topic</a>
          </span>
      </div>

    




    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/guidelines' itemprop="url">Guidelines </a>
        </span>
      </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://rebol.metaeducation.com/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://rebol.metaeducation.com/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    
  </body>
  
</html>
