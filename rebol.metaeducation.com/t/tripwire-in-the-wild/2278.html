<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Labeled TRASH! Runes in The Wild - Feature Discover - AltRebol</title>
    <meta name="description" content="If you access an unset variable, you don&amp;#39;t get a lot of information back: 
&amp;gt;&amp;gt; state: ~

&amp;gt;&amp;gt; state
** Script Error: state is ~ antiform

That ~ is the quasiform/antiform of the space RUNE!: 
&amp;gt;&amp;gt; quasi _
== ~

&amp;gt;&amp;gt; type of ant&amp;hellip;">
    <meta name="generator" content="Discourse 3.5.0.beta6-dev - https://github.com/discourse/discourse version 623cde985b21c2ed812b83d3ea94f69231613718">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" media="all" content="#fff">

<meta name="color-scheme" content="light">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, viewport-fit=cover">
<link rel="canonical" href="2278.html" />

<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="AltRebol Search">

    <link href="https://rebol.metaeducation.com/stylesheets/color_definitions_base__2_ceb61c279a74dfa3cef6a62f7784988102abec82.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" class="light-scheme"/>

<link href="https://rebol.metaeducation.com/stylesheets/common_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="common"  />

  <link href="https://rebol.metaeducation.com/stylesheets/desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="desktop"  />



    <link href="https://rebol.metaeducation.com/stylesheets/chat_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="chat"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-details_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-details"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-lazy-videos_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-local-dates_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-narrative-bot_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
    <link href="https://rebol.metaeducation.com/stylesheets/discourse-presence_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="discourse-presence"  />
    <link href="https://rebol.metaeducation.com/stylesheets/docker_manager_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="docker_manager"  />
    <link href="https://rebol.metaeducation.com/stylesheets/footnote_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="footnote"  />
    <link href="https://rebol.metaeducation.com/stylesheets/poll_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="poll"  />
    <link href="https://rebol.metaeducation.com/stylesheets/spoiler-alert_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="spoiler-alert"  />
    <link href="https://rebol.metaeducation.com/stylesheets/chat_desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="chat_desktop"  />
    <link href="https://rebol.metaeducation.com/stylesheets/poll_desktop_e0a75505da9bc96953dd62a4aad773a25cca0f8e.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="https://rebol.metaeducation.com/stylesheets/common_theme_2_57fe803ed5a41e9f7d94086afaf66a1aab57d9ae.css?__ws=rebol.metaeducation.com" media="all" rel="stylesheet" data-target="common_theme" data-theme-id="2" data-theme-name="default"/>
    

    
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;Labeled TRASH! Runes in The Wild&#39;" href="../labeled-trash-runes-in-the-wild/2278.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://rebol.metaeducation.com/t/labeled-trash-runes-in-the-wild/2278" />
<meta name="twitter:url" content="https://rebol.metaeducation.com/t/labeled-trash-runes-in-the-wild/2278" />
<meta property="og:title" content="Labeled TRASH! Runes in The Wild" />
<meta name="twitter:title" content="Labeled TRASH! Runes in The Wild" />
<meta property="og:description" content="If you access an unset variable, you don&#39;t get a lot of information back:  &gt;&gt; state: ~  &gt;&gt; state ** Script Error: state is ~ antiform  That ~ is the quasiform/antiform of the space RUNE!:  &gt;&gt; quasi _ == ~  &gt;&gt; type of anti _ == ~{trash!}~  ; antiform (datatype)  But you&#39;re not just limited to the space RUNE! to make &quot;unset&quot; variables... because you can use any RUNE!.  &gt;&gt; state: ~#[INITIALIZE-STATE not called yet]#~  &gt;&gt; state ** Script Error: state is trash: ~#[INITIALIZE-STATE not called yet]#~  (..." />
<meta name="twitter:description" content="If you access an unset variable, you don&#39;t get a lot of information back:  &gt;&gt; state: ~  &gt;&gt; state ** Script Error: state is ~ antiform  That ~ is the quasiform/antiform of the space RUNE!:  &gt;&gt; quasi _ == ~  &gt;&gt; type of anti _ == ~{trash!}~  ; antiform (datatype)  But you&#39;re not just limited to the space RUNE! to make &quot;unset&quot; variables... because you can use any RUNE!.  &gt;&gt; state: ~#[INITIALIZE-STATE not called yet]#~  &gt;&gt; state ** Script Error: state is trash: ~#[INITIALIZE-STATE not called yet]#~  (..." />
<meta property="og:article:section" content="Usage" />
<meta property="og:article:section:color" content="3AB54A" />
<meta property="og:article:section" content="Feature Discover" />
<meta property="og:article:section:color" content="3AB54A" />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="6 ❤" />
<meta property="article:published_time" content="2024-09-15T07:46:39+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler ">
    
    <header>
  <a href="https://rebol.metaeducation.com/">AltRebol</a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="2278.html">Labeled TRASH! Runes in The Wild</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://rebol.metaeducation.com/c/usage/feature-discover/24" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #3AB54A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Usage</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://rebol.metaeducation.com/c/usage/feature-discover/24" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #3AB54A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Feature Discover</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  

    <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='Labeled TRASH! Runes in The Wild'>
      <link itemprop='url' href='2278.html'>
      <meta itemprop='datePublished' content='2024-09-15T07:46:39Z'>
        <meta itemprop='articleSection' content='Feature Discover'>
      <meta itemprop='keywords' content=''>
      <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
        <meta itemprop='name' content='AltRebol'>
          <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
            <meta itemprop='url' content='https://rebol.metaeducation.com/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
          </div>
      </div>


          <div id='post_1'  class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://rebol.metaeducation.com/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>

                <link itemprop="mainEntityOfPage" href="2278.html">


              <span class="crawler-post-infos">
                  <time  datetime='2024-09-15T07:46:39Z' class='post-time'>
                    September 15, 2024,  7:46am
                  </time>
                  <meta itemprop='dateModified' content='2025-05-19T13:55:22Z'>
              <span itemprop='position'>1</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>If you access an unset variable, you don't get a lot of information back:</p>
<pre><code>&gt;&gt; state: ~

&gt;&gt; state
** Script Error: state is ~ antiform
</code></pre>
<p>That <code>~</code> is the quasiform/antiform of the space RUNE!:</p>
<pre><code>&gt;&gt; quasi _
== ~

&gt;&gt; type of anti _
== ~{trash!}~  ; antiform (datatype)
</code></pre>
<p><strong>But you're not just limited to the space RUNE! to make "unset" variables... because you can use <em>any</em> RUNE!.</strong></p>
<pre><code>&gt;&gt; state: ~#[INITIALIZE-STATE not called yet]#~

&gt;&gt; state
** Script Error: state is trash: ~#[INITIALIZE-STATE not called yet]#~
</code></pre>
<p><em>(This concept was originally called a "tripwire" when labeled trash was a distinct datatype from trash.  But now that the <strong><code>_</code></strong> is just the rune! for space, it unifies to where all antiform runes are just called TRASH!)</em></p>
<p>DEFAULT reacts to labeled trash like anything else, considering the variable to be "vacant"</p>
<pre><code>&gt;&gt; vacant? $state
== ~okay~  ; anti

&gt;&gt; state: default [10 + 20]
== 30

&gt;&gt; state
== 30
</code></pre>
<h2><a name="p-7676-can-be-better-than-a-meandering-comment-1" class="anchor" href="2278.html#p-7676-can-be-better-than-a-meandering-comment-1"></a>Can Be Better Than A Meandering Comment!</h2>
<p>A comment won't direct people to the relevant issue at runtime.  But a well-chosen labeled trash can.</p>
<p>Compare:</p>
<pre><code>; !!! UPARSE is not available in SYS because it is higher level.  We hack it
; up so that when %uparse.r runs it pokes itself into sys.util/parse
;
parse: ~
</code></pre>
<p>With:</p>
<pre><code>parse: ~#[higher-level %uparse.r hasn't set SYS.UTIL/PARSE yet]#~
</code></pre>
<p>Much better!  Gives you the information you need, when you need it!</p>
<p><em>(Note: I was inspired to this concept by a style of usage <a class="mention" href="https://rebol.metaeducation.com/u/rgchris">@rgchris</a> had in his scripts, using TAG!s to provide guidance for what was supposed to be filled into certain slots.  I just wanted to give that some teeth, to know that the variable was conceptually unset.)</em></p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="3" />
              <span class='post-likes'>3 Likes</span>
            </div>

                <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../making-fail-stand-out-with-antiform-tag/2282.html">Making FAIL Stand Out With Antiform TAG!</a>
                        <meta itemprop='position' content='1'>
                      </div>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../generalized-argument-removal-specialize-relax/2297.html">Generalized Argument Removal - SPECIALIZE:RELAX</a>
                        <meta itemprop='position' content='2'>
                      </div>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../2024-recap-with-great-features-come-great-incompatibility/2362.html">2024 Recap: With Great Features Come Great Incompatibility</a>
                        <meta itemprop='position' content='3'>
                      </div>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../why-have-an-unset-state-in-rebol-languages/2476/5.html">Why have an &quot;Unset State&quot; in Rebol Languages?</a>
                        <meta itemprop='position' content='4'>
                      </div>
                </div>
          </div>
          <div id='post_3' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://rebol.metaeducation.com/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2024-11-10T13:44:52Z' class='post-time'>
                    November 10, 2024,  1:44pm
                  </time>
                  <meta itemprop='dateModified' content='2025-05-19T13:55:47Z'>
              <span itemprop='position'>3</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <h2><a name="p-7883-labeled-trash-catches-bugs-failing-functions-wont-1" class="anchor" href="2278.html#p-7883-labeled-trash-catches-bugs-failing-functions-wont-1"></a>Labeled Trash Catches Bugs Failing Functions Won't</h2>
<p>Prior to the existence of labeled TRASH!, there were some functions in LIB for things like RETURN, CONTINUE, THROW, etc. to give you messages when you tried to use these definitional constructs in places that didn't provide them:</p>
<pre><code>return: func [] [
    fail:blame "RETURN called when no generator is providing it" $return
]

continue: func [] [
    fail:blame "CONTINUE called when no loop is providing it" $return
]

throw: func [] [
    fail:blame "THROW called when no catch is providing it" $return
]

...
</code></pre>
<p>Passing the <code>$return</code> bound word as the <code>:BLAME</code> argument is a bit awkward to write.  But it means the error will blame the callsite, showing the error there--instead of implicating the FAIL itself inside the stub function.  That makes the error much more useful.</p>
<p><strong>But this still makes it look like the functions are available.</strong>  <img src="../../images/emoji/twitter/frowning.png%3Fv=14" title=":frowning:" class="emoji" alt=":frowning:" loading="lazy" width="20" height="20"></p>
<p>You won't get an error if you say <strong><code>return/</code></strong> to try and get a RETURN function.  You'll get a function--and it will pass the rule that things ending in slash must look up to functions--but it's not the kind of RETURN function you actually wanted.</p>
<p>This led to confusing downstream bugs when some code wasn't binding correctly, but proceeded merrily along as if it had gotten a RETURN function.</p>
<p><strong>Labeled trash makes it nice and tidy!</strong></p>
<pre><code>return: ~#[RETURN used when no function generator is providing it]#~

continue: ~#[CONTINUE used when no loop is providing it]#~

throw: ~#[THROW used when no catch is providing it]#~

...
</code></pre>
<p>You get the "blame" of the callsite for free, because trashes aren't function instantiations.</p>
<p>And if you say <strong><code>return/</code></strong> then that's an error, because it's not a function.</p>
<p><em>This is quite an improvement!</em></p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="2" />
              <span class='post-likes'>2 Likes</span>
            </div>

          </div>
          <div id='post_4' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" rel='nofollow' href='https://rebol.metaeducation.com/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2025-03-17T21:11:17Z' class='post-time'>
                    March 17, 2025,  9:11pm
                  </time>
                  <meta itemprop='dateModified' content='2025-05-19T13:56:01Z'>
              <span itemprop='position'>4</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <aside class="quote no-group quote-modified" data-username="hostilefork" data-post="3" data-topic="2278">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="24" height="24" src="../../user_avatar/rebol.metaeducation.com/hostilefork/48/421_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p><strong>Labeled trash Catches Bugs Failing Functions Won't</strong></p>
<pre data-code-wrap="plaintext"><code class="lang-plaintext">return: func [] [
    fail:blame "RETURN called when no generator is providing it" $return
]
</code></pre>
<p>vs.</p>
<pre data-code-wrap="plaintext"><code class="lang-plaintext">return: ~#"RETURN used when no function generator is providing it"~
</code></pre>
</blockquote>
</aside>
<p>I've already shown that trashes are better for error locality than stub failure functions, because you get an error when you try to fetch a function e.g. via <strong><code>return/</code></strong> ... vs. getting a function that's just going to fail later.</p>
<p>But there's another benefit over the stub function: <em>it gives you the right error even if you don't have a refinement, vs. saying "no refinement available"</em></p>
<p>I noticed this when I had a function for adding things to the built-in SymId table during bootstrap:</p>
<pre><code>add-sym: func [
    "Add SYM_XXX to enumeration"
    return: "position of an already existing symbol if found"
        [null? block!]
    text [word! text!]
    :relax "tolerate an already-added symbol"
][
    ...
]
</code></pre>
<p>After the table is finalized and written to disk, you don't want more stray calls to ADD-SYM.  It's bootstrap so there's no labeled trash, so I just did the old crappy stub function trick:</p>
<pre><code>add-sym: does [
   fail "Symbol table finalized, can't ADD-SYM at this point"
]
</code></pre>
<p><em>But what if you called ADD-SYM:RELAX ?</em>  If you use a refinement, you don't get the informative message, you get a message about it not having the refinement:</p>
<pre><code>** Script Error: incompatible or duplicate refinement: :relax
</code></pre>
<p>So even though your stub function doesn't require any arguments, it has to copy all the refinements as well, or you don't get a good error!</p>
<p>With labeled trash, it would be all good:</p>
<pre><code>add-sym: ~#[Symbol table finalized, can't ADD-SYM at this point]#~
</code></pre>
<h2><a name="p-8037-just-another-big-w-for-trash-runes-trophy-1" class="anchor" href="2278.html#p-8037-just-another-big-w-for-trash-runes-trophy-1"></a>Just Another Big W For TRASH! Runes <img src="../../images/emoji/twitter/trophy.png%3Fv=14" title=":trophy:" class="emoji" alt=":trophy:" loading="lazy" width="20" height="20"></h2>
<p>They're kind of the sleeper hit of the isotope world...</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="1" />
              <span class='post-likes'>1 Like</span>
            </div>

          </div>
    </div>


    




    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://rebol.metaeducation.com/guidelines' itemprop="url">Guidelines </a>
        </span>
      </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://rebol.metaeducation.com/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://rebol.metaeducation.com/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    
  </body>
  
</html>
