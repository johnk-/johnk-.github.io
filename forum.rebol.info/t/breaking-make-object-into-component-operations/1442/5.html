<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Breaking MAKE OBJECT! Into Component Operations - #5 by hostilefork - Binding - AltRebol</title>
    <meta name="description" content="The behavior of the following in historical Rebol/Red strikes me as extremely buggy: 
rule-ctx: [num: 1020]
rule: [num &amp;#39;foo]
bind rule rule-ctx

parse-obj: make object! compose [
     rule: (rule)  ; assume this is the n&amp;hellip;">
    <meta name="generator" content="Discourse 3.4.0.beta3-dev - https://github.com/discourse/discourse version 93983286b54a0e96b8073abce23f4566e9f296f7">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" media="all" content="#ffffff">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="../1442.html" />

<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="AltRebol Search">

    <link href="https://forum.rebol.info/stylesheets/color_definitions_base__2_b36da8919caf93960d3b4470a90d0e79c6a110e2.css?__ws=forum.rebol.info" media="all" rel="stylesheet" class="light-scheme"/>

  <link href="https://forum.rebol.info/stylesheets/desktop_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="desktop"  />



  <link href="https://forum.rebol.info/stylesheets/chat_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="chat"  />
  <link href="https://forum.rebol.info/stylesheets/checklist_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="checklist"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-details_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-details"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-lazy-videos_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-local-dates_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-narrative-bot_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-presence_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-presence"  />
  <link href="https://forum.rebol.info/stylesheets/docker_manager_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="docker_manager"  />
  <link href="https://forum.rebol.info/stylesheets/footnote_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="footnote"  />
  <link href="https://forum.rebol.info/stylesheets/poll_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="poll"  />
  <link href="https://forum.rebol.info/stylesheets/spoiler-alert_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="spoiler-alert"  />
  <link href="https://forum.rebol.info/stylesheets/chat_desktop_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="chat_desktop"  />
  <link href="https://forum.rebol.info/stylesheets/poll_desktop_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="https://forum.rebol.info/stylesheets/desktop_theme_2_bac9ab3eace9fe3f17026a3c4dbf25e3e9e1e9a0.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2" data-theme-name="default"/>

    
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;Breaking MAKE OBJECT! Into Component Operations&#39;" href="../1442.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://forum.rebol.info/t/breaking-make-object-into-component-operations/1442/5" />
<meta name="twitter:url" content="https://forum.rebol.info/t/breaking-make-object-into-component-operations/1442/5" />
<meta property="og:title" content="Breaking MAKE OBJECT! Into Component Operations" />
<meta name="twitter:title" content="Breaking MAKE OBJECT! Into Component Operations" />
<meta property="og:description" content="I&#39;ve had some success deploying this .word as member idea, with a shallow object creation... and it seems like the right fit for many cases--enough so that I think it should be the &quot;default&quot; for what we would traditionally think of as the creation of traditional &quot;objects&quot; and &quot;classes&quot;.  But as expected, there are cases that don&#39;t fit.  For instance, in the bootstrap process, the configuration files make objects that are a bit more like modules:  REBOL [Title: &quot;Filesystem configuration file&quot;]  ..." />
<meta name="twitter:description" content="I&#39;ve had some success deploying this .word as member idea, with a shallow object creation... and it seems like the right fit for many cases--enough so that I think it should be the &quot;default&quot; for what we would traditionally think of as the creation of traditional &quot;objects&quot; and &quot;classes&quot;.  But as expected, there are cases that don&#39;t fit.  For instance, in the bootstrap process, the configuration files make objects that are a bit more like modules:  REBOL [Title: &quot;Filesystem configuration file&quot;]  ..." />
<meta property="og:article:section" content="Development" />
<meta property="og:article:section:color" content="25AAE2" />
<meta property="og:article:section" content="Binding" />
<meta property="og:article:section:color" content="25AAE2" />
<meta property="article:published_time" content="2024-11-18T02:14:15+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler ">
    
    <header>
  <a href="https://forum.rebol.info/">
    AltRebol
  </a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="../1442.html">Breaking MAKE OBJECT! Into Component Operations</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/development/binding/49" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/development/binding/49" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Binding</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  

    <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='Breaking MAKE OBJECT! Into Component Operations'>
      <link itemprop='url' href='../1442.html'>
      <meta itemprop='datePublished' content='2020-12-28T08:53:07Z'>
        <meta itemprop='articleSection' content='Binding'>
      <meta itemprop='keywords' content=''>
      <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
        <meta itemprop='name' content='AltRebol'>
          <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
            <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
          </div>
      </div>

          <span itemprop='author' itemscope itemtype="http://schema.org/Person">
            <meta itemprop='name' content='hostilefork'>
            <link itemprop='url' href='https://forum.rebol.info/u/hostilefork'>
          </span>
        <meta itemprop='text' content='The behavior of the following in historical Rebol/Red strikes me as extremely buggy: 
rule-ctx: [num: 1020]
rule: [num &amp;#39;foo]
bind rule rule-ctx

parse-obj: make object! compose [
     rule: (rule)  ; assume this is the n&amp;hellip;'>

          <div id='post_5' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2024-11-18T02:14:15Z' class='post-time'>
                    November 18, 2024,  2:14am
                  </time>
                  <meta itemprop='dateModified' content='2024-11-18T02:14:15Z'>
              <span itemprop='position'>5</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <aside class="quote no-group" data-username="hostilefork" data-post="4" data-topic="1442">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="../../../user_avatar/forum.rebol.info/hostilefork/48/421_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p>Since changing MAKE OBJECT! would be too far-reaching a change at the moment, I've retaken CONSTRUCT for this shallower version:</p>
<pre data-code-wrap="plaintext"><code class="lang-plaintext">&gt;&gt; x: 10
&gt;&gt; obj: construct [x: x * 2, f: func [] [print ["x is" x "and .x is" .x]]]
== make object! [
    x: 20
    f: ~#[frame! []]~
]

&gt;&gt; obj.f
x is 10 and .x is 20
</code></pre>
</blockquote>
</aside>
<p>I've had some success deploying this <strong><code>.word</code></strong> as member idea, with a shallow object creation... and it seems like the right fit for many cases--enough so that I think it should be the "default" for what we would traditionally think of as the creation of traditional "objects" and "classes".</p>
<p>But as expected, there are cases that don't fit.  For instance, in the bootstrap process, the configuration files make objects that are a bit more like modules:</p>
<pre><code>REBOL [Title: "Filesystem configuration file"]

name: 'Filesystem
source: %filesystem/mod-filesystem.c

os: platform-config.name
if os = 'Windows [  ; means OS as it was just defined...
    ...
]
</code></pre>
<p>This looks module-like, but it's done with objects (in particular because the bootstrap executable doesn't do modules correctly).  And additionally, it inherits from a base object.</p>
<p>So when I talk about the "component" operations, we have to consider:</p>
<ol>
<li>
<p>What kind of thing are we making (OBJECT!, MODULE!, ERROR!, ...)</p>
</li>
<li>
<p>Is there a parent to inherit from?  (if so, we presume this answers 1, which is why MAKE doesn't need to know the type if you pass an instance instead... you can't MAKE ERROR! from a parent that's a MODULE!)</p>
</li>
<li>
<p>Do you want the definitions of the object fields being defined to be visible to the code that's assigning those fields, or do you want the existing bindings to be visible?</p>
</li>
</ol>
<p>With the CONSTRUCT I mention above, that gives you an OBJECT! with no parent...and the fields of the object are not visible to the code doing the assigning.  (I propose this as the default behavior for FENCE!.)</p>
<p>I added a CONSTRUCT:WITH to pass in a parent, so you could add a parent...<a href="../../refinement-arguments-at-head-of-args-list-not-tail/2331.html">though it would be better if that argument came first</a></p>
<pre><code>construct:with [
    something: ...
    ...
] parent
</code></pre>
<p>vs.</p>
<pre><code>construct:with parent [
    something: ...
    ...
]
</code></pre>
<p>I could just go ahead and make it arity-2, though I'm not thrilled by it.</p>
<pre><code>construct object! [...]  ; shallow version, no parent
construct parent [...]  ; shallow version, parent

make object! [...]   ; inside version, no parent
make parent [...]   ; inside version, parent
</code></pre>
<h2><a name="p-7911-why-would-make-vs-construct-be-inside-binding-1" class="anchor" href="5.html#p-7911-why-would-make-vs-construct-be-inside-binding-1"></a>Why would MAKE vs. CONSTRUCT Be "Inside Binding"?</h2>
<p>Outside of the inertia of history, I don't know how much sense this makes.  It could be <strong><code>construct:inside</code></strong> vs. plain <strong><code>construct</code></strong>.  :-/</p>
<pre><code>&gt;&gt; x: 10
&gt;&gt; construct [x: 20, y: x + 100]
== #{x: 20 y: 110}

&gt;&gt; x: 10
&gt;&gt; construct:inside [x: 20, y: x + 100]
== #{x: 20 y: 120}
</code></pre>
<p>The inside version being implemented by <strong><code>wrap:context</code></strong> was one idea I had:</p>
<pre><code>&gt;&gt; x: 10
&gt;&gt; wrap:context [x: 20, y: x + 100]
== #{x: 20 y: 120}
</code></pre>
<p>What this has going for it:</p>
<ul>
<li>
<p>"WRAP" really does sound like it's enclosing the code in a context</p>
</li>
<li>
<p>It aligns with what WRAP does to a BLOCK! normally... this would just say "make me a context out of that, vs. giving a block".</p>
</li>
</ul>
<p>But then you have the other parameterization points... MODULE! vs. OBJECT! etc., and whether you want to inherit or not.</p>
<p><strong>There's simply a lot of parameters here.</strong>  Anyway, there's a lot of new mechanics that need to settle out while contemplating this, just wanted to write that down.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
    </div>

      <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
          <span itemprop='name'>
            <a itemprop="url" href="../1442.html#post_5">show post in topic</a>
          </span>
      </div>

    




    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forum.rebol.info/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forum.rebol.info/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forum.rebol.info/guidelines' itemprop="url">Guidelines </a>
        </span>
      </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    
  </body>
  
</html>
