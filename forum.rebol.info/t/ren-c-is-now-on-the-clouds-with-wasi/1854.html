<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Ren-C is Now on the Clouds ‚òÅÔ∏è with WASI - WebAssembly - AltRebol</title>
    <meta name="description" content="Note: WASI =&amp;gt; WebAssembly System Interface 

  
We&amp;#39;ve been running in a browser for a while.  And over time, as that host environment has gotten better...we&amp;#39;ve been getting better, too.  (It can sometimes pay to be an e&amp;hellip;">
    <meta name="generator" content="Discourse 3.1.0.beta4 - https://github.com/discourse/discourse version 25276f62f959eab4557049a655300a70835c5769">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" media="all" content="#ffffff">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="1854.html" />

<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="AltRebol Search">

    <link href="https://forum.rebol.info/stylesheets/color_definitions_base__2_caa66e77e807fc270e5b21d201643962219b6a9a.css?__ws=forum.rebol.info" media="all" rel="stylesheet" class="light-scheme"/>

  <link href="https://forum.rebol.info/stylesheets/desktop_97f5da14b02e14a864d77b6d983a33a1b302f894.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="desktop"  />



  <link href="https://forum.rebol.info/stylesheets/chat_97f5da14b02e14a864d77b6d983a33a1b302f894.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="chat"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-details_97f5da14b02e14a864d77b6d983a33a1b302f894.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-details"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-lazy-videos_97f5da14b02e14a864d77b6d983a33a1b302f894.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-local-dates_97f5da14b02e14a864d77b6d983a33a1b302f894.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-narrative-bot_97f5da14b02e14a864d77b6d983a33a1b302f894.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-presence_97f5da14b02e14a864d77b6d983a33a1b302f894.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-presence"  />
  <link href="https://forum.rebol.info/stylesheets/docker_manager_97f5da14b02e14a864d77b6d983a33a1b302f894.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="docker_manager"  />
  <link href="https://forum.rebol.info/stylesheets/poll_97f5da14b02e14a864d77b6d983a33a1b302f894.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="poll"  />
  <link href="https://forum.rebol.info/stylesheets/chat_desktop_97f5da14b02e14a864d77b6d983a33a1b302f894.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="chat_desktop"  />
  <link href="https://forum.rebol.info/stylesheets/poll_desktop_97f5da14b02e14a864d77b6d983a33a1b302f894.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="https://forum.rebol.info/stylesheets/desktop_theme_2_5e18a6fac02b6ab11e33445179f4a2961aadbfd8.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2" data-theme-name="default"/>

    
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;Ren-C is Now on the Clouds ‚òÅÔ∏è with WASI&#39;" href="1854.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.rebol.info/uploads/default/original/1X/26d1a0133b87b8f3ac7008467a4d6b29d6c21069.png" />
<meta property="og:image" content="https://forum.rebol.info/uploads/default/original/1X/26d1a0133b87b8f3ac7008467a4d6b29d6c21069.png" />
<meta property="og:url" content="https://forum.rebol.info/t/ren-c-is-now-on-the-clouds-with-wasi/1854" />
<meta name="twitter:url" content="https://forum.rebol.info/t/ren-c-is-now-on-the-clouds-with-wasi/1854" />
<meta property="og:title" content="Ren-C is Now on the Clouds ‚òÅÔ∏è with WASI" />
<meta name="twitter:title" content="Ren-C is Now on the Clouds ‚òÅÔ∏è with WASI" />
<meta property="og:description" content="Note: WASI =&gt; WebAssembly System Interface      We&#39;ve been running in a browser for a while.  And over time, as that host environment has gotten better...we&#39;ve been getting better, too.  (It can sometimes pay to be an early adopter and co-evolve with a platform.)  After several long days of nuanced work, I&#39;ve been able to take another step...running in a WasmEdge VM!  Unlike the web version, this has the command-line processing built into it.  So you can pass wasmedge the %r3.wasm file, and say..." />
<meta name="twitter:description" content="Note: WASI =&gt; WebAssembly System Interface      We&#39;ve been running in a browser for a while.  And over time, as that host environment has gotten better...we&#39;ve been getting better, too.  (It can sometimes pay to be an early adopter and co-evolve with a platform.)  After several long days of nuanced work, I&#39;ve been able to take another step...running in a WasmEdge VM!  Unlike the web version, this has the command-line processing built into it.  So you can pass wasmedge the %r3.wasm file, and say..." />
<meta property="og:article:section" content="Development" />
<meta property="og:article:section:color" content="25AAE2" />
<meta property="og:article:section" content="WebAssembly" />
<meta property="og:article:section:color" content="25AAE2" />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="5 mins üïë" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="6 ‚ù§" />
<meta property="article:published_time" content="2022-07-01T00:52:32+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler ">
    
    <header>
  <a href="https://forum.rebol.info/">
    AltRebol
  </a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="1854.html">Ren-C is Now on the Clouds ‚òÅÔ∏è with WASI</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/development/8" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/development/emscripten/5" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>WebAssembly</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  

    <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='Ren-C is Now on the Clouds ‚òÅÔ∏è with WASI'>
        <meta itemprop='articleSection' content='WebAssembly'>
      <meta itemprop='keywords' content=''>
      <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
        <meta itemprop='name' content='AltRebol'>
          <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
            <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
          </div>
      </div>

          <div id='post_1'  class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="1854.html">

                <link itemprop="image" href="../../uploads/default/original/1X/26d1a0133b87b8f3ac7008467a4d6b29d6c21069.png">

              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2022-07-01T00:52:32Z' class='post-time'>
                    July 1, 2022, 12:52am
                  </time>
                  <meta itemprop='dateModified' content='2023-10-17T13:15:29Z'>
              <span itemprop='position'>1</span>
              </span>
            </div>
            <div class='post' itemprop='articleBody'>
              <blockquote>
<p>Note: WASI =&gt; WebAssembly System Interface</p>
</blockquote>
<p><div class="lightbox-wrapper"><a class="lightbox" href="../../uploads/default/original/1X/26d1a0133b87b8f3ac7008467a4d6b29d6c21069.png" data-download-href="https://forum.rebol.info/uploads/default/26d1a0133b87b8f3ac7008467a4d6b29d6c21069" title="image"><img src="../../uploads/default/optimized/1X/26d1a0133b87b8f3ac7008467a4d6b29d6c21069_2_207x108.png" alt="image" data-base62-sha1="5xpgmNShmHOnF7AMwpjAGNfL3v3" width="207" height="108" srcset="../../uploads/default/optimized/1X/26d1a0133b87b8f3ac7008467a4d6b29d6c21069_2_207x108.png, ../../uploads/default/optimized/1X/26d1a0133b87b8f3ac7008467a4d6b29d6c21069_2_310x162.png 1.5x, ../../uploads/default/optimized/1X/26d1a0133b87b8f3ac7008467a4d6b29d6c21069_2_414x216.png 2x" data-dominant-color="7054BA"><div class="meta">
<svg class="fa d-icon d-icon-far-image svg-icon" aria-hidden="true"><use href="#far-image"></use></svg><span class="filename">image</span><span class="informations">926√ó484 17.9 KB</span><svg class="fa d-icon d-icon-discourse-expand svg-icon" aria-hidden="true"><use href="#discourse-expand"></use></svg>
</div></a></div></p>
<p>We've been running in a browser for a while.  And over time, as that host environment has gotten better...we've been getting better, too.  (It can <sub>sometimes</sub> pay to be an early adopter and co-evolve with a platform.)</p>
<p>After several long days of nuanced work, I've been able to take another step...running in a WasmEdge VM!</p>
<p>Unlike the web version, this has the command-line processing built into it.  So you can pass <code>wasmedge</code> the %r3.wasm file, and say something like <strong><code>--do</code></strong> of the code you want to run:</p>
<pre><code>$ wasmedge r3.wasm --do \
      "print ['** uparse {Hello, Cloud} [thru space across to &lt;end&gt;] '**]"
</code></pre>
<p>Then you get your result:</p>
<pre><code>** Cloud **
</code></pre>
<p><strong><a href="https://github.com/metaeducation/ren-c/runs/7140995235?check_suite_focus=true#step:18:4">See for yourself, on the GitHub Workflow that builds it!!!!</a></strong></p>
<h1>
<a name="so-er-so-what-subsomeone-might-asksub-1" class="anchor" href="1854.html#so-er-so-what-subsomeone-might-asksub-1"></a>"So... er... so what?" <sub>(someone might ask)</sub>
</h1>
<p>... WH-</p>
<p>... WH- WHAT YOU DO MEAN, <em>"SO WHAT?"</em> ... YOU, you... <em>IGNORAMUS</em>!</p>
<p><img src="../../images/emoji/twitter/angry.png%3Fv=12" title=":angry:" class="emoji only-emoji" alt=":angry:" loading="lazy" width="20" height="20"><br>
...</p>
<p>Oh, all right, well.  Fine.  Let me try and break down what this is... and what it might mean for Ren-C's future in the cloud space (and elsewhere).</p>
<hr>
<h1>
<a name="first-lets-talk-about-the-dream-that-isnt-subyetsub-2" class="anchor" href="1854.html#first-lets-talk-about-the-dream-that-isnt-subyetsub-2"></a>First Let's Talk About <em>"The Dream That Isn't"</em> <sub>(yet)</sub>
</h1>
<p>...and that dream is "SERVERLESS"-ness.</p>
<ul>
<li>
<p>Picture if you will, the idea that we take <code>%httpd.reb</code> and shoot it into the sun... <img src="../../images/emoji/twitter/rocket.png%3Fv=12" title=":rocket:" class="emoji" alt=":rocket:" loading="lazy" width="20" height="20"> <img src="../../images/emoji/twitter/sun_with_face.png%3Fv=12" title=":sun_with_face:" class="emoji" alt=":sun_with_face:" loading="lazy" width="20" height="20"> ...vowing to never try and write another web server in a Redbol again.</p>
</li>
<li>
<p>INSTEAD we dial the clock back to how people responded to web requests in the 90's: we think of it that each request starts a whole new copy of %r3.exe, which does its work, and exits.</p>
<ul>
<li>
<p>...this really <em>is</em> how systems used to work, back when there were 5 people on the Internet.  (Modems were so slow that you couldn't get more than one request a week, anyway.)</p>
</li>
<li>
<p>But in the name of speed, webmastering became a mystical black art of figuring out how to force your PHP or Python or whatever to stay resident inside the Apache server and <em>not</em> exit.</p>
</li>
<li>
<p>The seeping complexity started to require watchdog processes to check to make sure your long-running process wasn't accruing memory across requests, or restarting it if it crashed.</p>
</li>
<li>
<p>Security was also being compromised, because bugs in your code could allow session data to seep between different requests...since the process was long-lived and kept memory open.</p>
</li>
</ul>
</li>
<li>
<p>THE UTOPIA WE ARE BEING SOLD is that IF we package our code as a blob-o-WebAssembly...</p>
<ul>
<li>
<p>We will get all the benefits of running fresh every request...</p>
</li>
<li>
<p>...but with a performance characteristic like if we'd rigged up a way to stay running the whole time.</p>
</li>
</ul>
</li>
<li>
<p>THERE WILL STILL BE A WEBSERVER RUNNING (of course)</p>
<ul>
<li>
<p>However: it will be <em>The One True Debugged WebServer</em> (compiled in something fully formal like Rust or Haskell, right?)...so it won't have the same security problems that your dirty Wasm blob would have if it tried to implement a long-running web server itself.</p>
</li>
<li>
<p>It will have lightning fast abilities to spin up and down the Wasm blobs, much faster than an OS shutdown and launch would ever be.</p>
</li>
</ul>
</li>
</ul>
<h2>
<a name="ive-now-made-us-one-of-those-wasm-blobs-3" class="anchor" href="1854.html#ive-now-made-us-one-of-those-wasm-blobs-3"></a>I've Now Made Us One Of Those Wasm Blobs!</h2>
<p>Hence we can focus our efforts on the high level logic of how to answer a web request without worrying about the details of writing, running, or administrating a web server.</p>
<p>If you've ever looked at some Platform as a Service (PaaS) like Heroku or AWS and seen a short list of languages supported, that's going to be a thing of the past.  Anyone who builds to WebAssembly can be hosted and just pay the price of their storage/CPU/network use.</p>
<ul>
<li>
<p>Yesterday we were a black sheep of languages...with a shoddy, slow, and insecure webserver.</p>
</li>
<li>
<p>Tomorrow... we'll still be a black sheep of languages.  But one that's on an even playing field for providing higher level logic for processing and serving data on the web.</p>
</li>
</ul>
<h2>
<a name="ah-now-i-see-the-what-of-the-so-what-4" class="anchor" href="1854.html#ah-now-i-see-the-what-of-the-so-what-4"></a><em>"Ah!  Now I See the What of the So What!"</em>
</h2>
<p><img src="../../images/emoji/twitter/smiling_face_with_three_hearts.png%3Fv=12" title=":smiling_face_with_three_hearts:" class="emoji only-emoji" alt=":smiling_face_with_three_hearts:" loading="lazy" width="20" height="20"></p>
<p>It's a quite compelling vision statement, and a lot of people are evangelical (you can tell by how many times people say the term "serverless" at conferences these days).</p>
<p>I'm definitely the sort of person this is an easy sell to. You should choose your battles when it comes to optimization, this is one of my favorite quotes:</p>
<blockquote>
<p><em>"90% of a program's execution time is spent in only 10% of its code. The standard inference from this rule is that programmers should find that 10% of the code and optimize it ... But a second inference is just as important: programmers can deoptimize the other 90% of the code (in order to make it easier to use, maintain, etc.)</em>   -- <a href="http://en.wikipedia.org/wiki/Richard_E._Pattis">Richard Pattis</a></p>
</blockquote>
<p>So focusing performance research on the spin-up and tear-down sounds 100% right.  Over the long run, the factors I mention probably mitigate any "catastrophic slowdown".  Your higher level program logic is starting from a clean slate every time.  There's no memory fragmentation or leaks, and all those security benefits I mentioned.</p>
<h2>
<a name="not-just-the-cloud-but-one-binary-for-all-desktops-5" class="anchor" href="1854.html#not-just-the-cloud-but-one-binary-for-all-desktops-5"></a>Not Just the Cloud, but <em>One Binary For All Desktops</em>
</h2>
<p>As WebAssembly has proven its mettle on the Web, people have asked why it couldn't be run from a terminal prompt.  All you'd need would be a runtime host--simpler than a browser--that provided basic file, I/O, and network services.</p>
<p>If you could do that, you'd be able to have one <strong><code>%r3.wasm</code></strong> file that you could download and use for Linux, Mac, Windows, on the cloud, and in your browser...</p>
<p>...in theory.  And that theory is almost practice.  (<a href="../wasmtime-and-wasi/1151/4.html">I've remarked on another thread about it</a> so take discussions of the non-cloud applications there.)</p>
<h2>
<a name="of-course-its-not-all-there-yet-6" class="anchor" href="1854.html#of-course-its-not-all-there-yet-6"></a>Of Course, It's Not All-There-Yet</h2>
<h3>
<a name="what-about-those-wasm-blob-server-providers-7" class="anchor" href="1854.html#what-about-those-wasm-blob-server-providers-7"></a>What about those Wasm blob server providers?</h3>
<p>They don't exist yet.</p>
<p>So if you're going to use the serverless methodology in the here and now, you're going to still be in the webmastering game.  Only now you're learning how to set up Docker instances and configure bleeding-edge Wasm runtimes.</p>
<h3>
<a name="what-about-that-one-true-webserver-8" class="anchor" href="1854.html#what-about-that-one-true-webserver-8"></a>What about that "One True Webserver?"</h3>
<p>Y'know, the webserver you're going to throw out yours for.  The one that's bulletproof and supersonic and Utopian--the kind Jesus would have written--the one that's going save us all?</p>
<p><em>It's NodeJS.</em>  <img src="../../images/emoji/twitter/man_facepalming.png%3Fv=12" title=":man_facepalming:" class="emoji" alt=":man_facepalming:" loading="lazy" width="20" height="20"><br>
<sub>at least for WasmEdge on AWS Lambda, for now</sub></p>
<p>So I hope you like setting up NodeJS in Docker.</p>
<h3>
<a name="what-about-the-language-agnosticism-in-hosting-9" class="anchor" href="1854.html#what-about-the-language-agnosticism-in-hosting-9"></a>What about the "Language Agnosticism" in hosting?</h3>
<p>The company behind WasmEdge talks a big game, and they have a platform for <a href="https://www.secondstate.io/faas/">Functions as a Service (FaaS)</a>.  But for various reasons this only works with Rust.</p>
<p>Kind of annoyingly, if you read the docs for <a href="https://wasmedge.org/book/en/dev.html">develop a WasmEdge app</a> you will see it say:</p>
<blockquote>
<p>For compiled languages (e.g., C and Rust), WasmEdge WebAssembly provides a safe, secure, isolated, and containerized runtime as opposed to Native Client (NaCl).</p>
</blockquote>
<p>Then you will see it list examples for <a href="https://wasmedge.org/book/en/dev/rust.html">Rust</a>, <a href="https://wasmedge.org/book/en/dev/js.html">JavaScript</a>, <a href="https://wasmedge.org/book/en/dev/go.html">Go</a>, <a href="https://wasmedge.org/book/en/dev/swift.html">Swift</a>, <a href="https://wasmedge.org/book/en/dev/as.html">AssemblyScript</a>, <a href="https://wasmedge.org/book/en/dev/kotlin.html">Kotlin</a>, <a href="https://wasmedge.org/book/en/dev/grain.html">Grain</a>, <a href="https://wasmedge.org/book/en/dev/python.html">Python</a></p>
<p><em>Noticeably missing is C.</em>  And that's the one we need.</p>
<p>Without C support for things like sockets, our Ren-C Wasm blob cannot make network requests.  We can do filesystem operations, but networking is just not there yet.</p>
<p><em>(The missing C bits relative to the other languages isn't technically WasmEdge's fault...it's just that the libc implementation for Wasi doesn't have some things that the Rust standard library does.  I just wish they'd explained the details of how they got the other languages to work built upon Rust...rather than leaving it as an exercise for the reader to delve into it all to figure out.)</em></p>
<h2>
<a name="but-stay-tuned-10" class="anchor" href="1854.html#but-stay-tuned-10"></a>But Stay Tuned...</h2>
<p>This is a pretty major development, and things are moving fast.  I want <a class="mention" href="https://forum.rebol.info/u/gchiu">@gchiu</a> to keep the eyes on the prize here, and we see what we can do to make sure we've got some demos rolled out in this space.  As we find ways to bring more features online, I'll let you know.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="4" />
              <span class='post-likes'>4 Likes</span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="0" />
              </div>

                <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../wasmtime-and-wasi/1151/4.html">Wasmtime and Wasi</a>
                        <meta itemprop='position' content='14'>
                      </div>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../happy-2023-and-2022-general-status-reflection/1988.html">Happy 2023, and 2022 General Status &amp; Reflection</a>
                        <meta itemprop='position' content='15'>
                      </div>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../about-the-webassembly-category/16.html">About the WebAssembly category</a>
                        <meta itemprop='position' content='16'>
                      </div>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../iceflow19-thomas-royko/1897/2.html">Iceflow19 (Thomas Royko)</a>
                        <meta itemprop='position' content='17'>
                      </div>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../john-sullivan/2182/3.html">John Sullivan</a>
                        <meta itemprop='position' content='18'>
                      </div>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../back-to-personal-computing/186/19.html">Back To Personal Computing</a>
                        <meta itemprop='position' content='19'>
                      </div>
                </div>
          </div>
          <div id='post_2' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
                  Split this topic 
              </span>

              <link itemprop="mainEntityOfPage" href="1854.html">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2023-10-18T03:50:26Z' class='post-time'>
                    October 18, 2023,  3:50am
                  </time>
                  <meta itemprop='dateModified' content='2023-10-18T03:50:26Z'>
              <span itemprop='position'>2</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>4 posts were split to a new topic: <a href="../networking-calls-from-ren-c-wasi-build/2054.html">Networking Calls from Ren-C WASI Build?</a></p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="0" />
              </div>

          </div>
          <div id='post_6' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.rebol.info/u/gchiu'><span itemprop='name'>gchiu</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="1854.html">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2022-07-05T10:32:06Z' class='post-time'>
                    July 5, 2022, 10:32am
                  </time>
                  <meta itemprop='dateModified' content='2023-10-18T03:50:45Z'>
              <span itemprop='position'>6</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Rebol has for many years been at the forefront of personal computing so it's good to see it head back that way even it is personal cloud computing.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="0" />
              </div>

          </div>
          <div id='post_7' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='../../u/OneArb.html'><span itemprop='name'>OneArb</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="1854.html">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2023-10-15T20:18:44Z' class='post-time'>
                    October 15, 2023,  8:18pm
                  </time>
                  <meta itemprop='dateModified' content='2023-10-18T02:13:32Z'>
              <span itemprop='position'>7</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Could you please provide a Ren-C WASI stack update?</p>
<p>If I got everything right, the runtime can get permissions to access a local directory (using runtime command line parameters).</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="1" />
              </div>

          </div>
          <div id='post_8' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="1854.html">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2023-10-16T17:25:40Z' class='post-time'>
                    October 16, 2023,  5:25pm
                  </time>
                  <meta itemprop='dateModified' content='2023-10-18T02:12:52Z'>
              <span itemprop='position'>8</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <aside class="quote no-group" data-username="OneArb" data-post="7" data-topic="1854">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="20" height="20" src="../../user_avatar/forum.rebol.info/onearb/40/356_2.png" class="avatar"> OneArb:</div>
<blockquote>
<p>Could you please provide a Ren-C WASI stack update?</p>
</blockquote>
</aside>
<p>I hadn't really messed with it in the past year, but since you asked I went and bumped the WASI SDK version we build against from v16 to v20.  There was a little debugging I had to do to get it to work, but it's working.</p>
<aside class="quote no-group" data-username="OneArb" data-post="7" data-topic="1854">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="20" height="20" src="../../user_avatar/forum.rebol.info/onearb/40/356_2.png" class="avatar"> OneArb:</div>
<blockquote>
<p>If I got everything right, the runtime can get permissions to access a local directory (using runtime command line parameters).</p>
</blockquote>
</aside>
<p>Yes (e.g. WasmEdge lets you map <strong><code>--dir guestdir:hostdir</code></strong> and through %guestdir/* you can access files in %hostdir/* (read-write or read-only).</p>
<p>But we now use libuv for filesystem and networking abstractions in the desktop build... and there's no WASI target for libuv.  (...and WASI's subset of Posix is insufficient to be able to use the libuv Posix target.)</p>
<p>Yet since they do offer some translation between simple C filesystem calls and the WASI layer, I did a little proof of concept by adding BASIC-READ and BASIC-WRITE functions, with this little test:</p>
<pre><code>wasmedge --dir x:. r3.wasm --do \
    "print {Begin}, basic-write %x/test.txt {Test}, print {End}"

wasmedge --dir x:. r3.wasm  --do \
    "either {Test} = as text! basic-read %x/test.txt [print {Yay}] [fail]"

r3 --do \
      "if {Test} = as text! read %test.txt [print {Verified}] else [fail]"
</code></pre>
<p><strong><a href="https://github.com/metaeducation/ren-c/actions/runs/6536811606/job/17749329640#step:20:25">And it works.</a></strong></p>
<p>WASI is generally meant to be run by a native Wasm runtime.  But the WASI-built blobs can be loaded into browsers if one wants to, there are various experiments.</p>
<p>Here is one such experiment: <strong><a href="https://runno.dev/wasi">https://runno.dev/wasi</a></strong></p>
<p>And here is a WASI blob I made that you can upload in there and it sort of works, when you turn echo on in the settings:</p>
<p><a href="http://hostilefork.com/media/shared/wasi/r3.wasm">http://hostilefork.com/media/shared/wasi/r3.wasm</a></p>
<p>But bear in mind that blob was built for WasmEdge, which supports neither Wasm exceptions nor setjmp()/longjmp() emulation.  So any error or typo will crash it.</p>
<p><em>(This should change soon, as <a href="https://github.com/WasmEdge/WasmEdge/pull/2459#pullrequestreview-1626437664">Wasm exceptions have just been pushed on a branch</a> this week in WasmEdge.)</em></p>
<p>If you write a file with BASIC-WRITE there, it will let you download it from the browser.  In terms of leveraging the browser's ability to grant access to files on your local system, that's something I haven't kept up with but my understanding is that <a href="https://developer.mozilla.org/en-US/docs/Web/API/File_System_API">people have pushed to make it possible</a>.  That particular demo doesn't do that particular thing.</p>
<p>In any case, it's still a pretty diverse set of scenarios with pros and cons for every choice.  I think serverless routines is the near-term sweet spot for WASI (as opposed to overtaking the need for .EXEs on desktops).  And the richness and interoperability with the browser of the ReplPad is a lot more interesting than running a WASI blob in a dumb terminal emulated in a webpage.  But it's good to have options.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="2" />
              <span class='post-likes'>2 Likes</span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="1" />
              </div>

          </div>
          <div id='post_9' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="1854.html">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2023-10-17T04:03:04Z' class='post-time'>
                    October 17, 2023,  4:03am
                  </time>
                  <meta itemprop='dateModified' content='2023-10-17T12:13:35Z'>
              <span itemprop='position'>9</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <aside class="quote no-group" data-username="hostilefork" data-post="8" data-topic="1854">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/hostilefork/40/26_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p>In any case, it's still a pretty diverse set of scenarios with pros and cons for every choice. I think serverless routines is the near-term sweet spot for WASI (as opposed to overtaking the need for .EXEs on desktops).</p>
</blockquote>
</aside>
<p>In terms of how far away WASI blobs are from being a replacement for .EXEs on your desktop, I'll point out this thread about the lack of "termios" (things letting you move the cursor around the screen and draw, as well as accept and react to a keypress instantly without needing to wait until a line of input is entered with RETURN):</p>
<p><a href="https://github.com/WebAssembly/WASI/issues/161" class="inline-onebox">missing termios.h functionality ¬∑ Issue #161 ¬∑ WebAssembly/WASI ¬∑ GitHub</a></p>
<p>They mention that some of the holdup is because of security concerns... they don't want to blindly parrot old APIs that were designed without an eye toward security.  Security and near-native speed are the two big focus points for what WASI workloads are worried about.</p>
<p>The danger here is that if they don't standardize something, WASI runtimes like WasmTime or WasmEdge or <a href="https://github.com/appcypher/awesome-wasm-runtimes">any of the others</a> might go their own way, and implement something ad-hoc.  Then you'd end up in a situation where depending on what runtime you were using you'd have to write different code for REPLs... which would just mirror the situation where Windows and UNIX don't have compatible interfaces, and that would motivate a higher-level package like ncurses.</p>
<p>Long story short: I don't imagine you'll want to use WASI blobs interactively for consoles until this sorts out, which won't be any sooner than several years from now.  That's going to be the domain of ReplPad and the platform-specific .EXEs for some time to come.</p>
<p><strong>But</strong> you could use a %r3.wasm plus %some-script.reb (or encap them together for r3-some-script.wasm) and passing it arguments to do data processing tasks that are able to run anywhere... cloud, browser, various desktops.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="1" />
              </div>

          </div>
          <div id='post_10' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="1854.html">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2023-10-17T12:31:35Z' class='post-time'>
                    October 17, 2023, 12:31pm
                  </time>
                  <meta itemprop='dateModified' content='2023-10-17T12:31:35Z'>
              <span itemprop='position'>10</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <aside class="quote no-group" data-username="hostilefork" data-post="9" data-topic="1854">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/hostilefork/40/26_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p>The danger here is that if they don't standardize something, WASI runtimes like WasmTime or WasmEdge or <a href="https://github.com/appcypher/awesome-wasm-runtimes">any of the others</a> might go their own way, and implement something ad-hoc.</p>
</blockquote>
</aside>
<p>Looking into it further, this has already happened with a fork of the WASI spec called "WASIX", that is only supported in the <a href="https://docs.wasmer.io/runtime/runners/wasix">Wasmer runtime</a>.</p>
<p><a href="https://wasix.org/">https://wasix.org/</a></p>
<p>I went through some hassles to get Ren-C built against it with the Posix terminal code enabled, and verified you can indeed react to single key presses and cursor around in the console.  But Wasmer <a href="https://github.com/wasix-org/wasix-libc/issues/20#issuecomment-1710255113">does not implement Wasm exceptions yet</a>, and their support for the <code>setjmp()</code>/<code>longjmp()</code> alternative is a step back to the pre-Stackless methods of Emscripten... and it appears to be buggy.  So you still wind up crashing any time there's an error raised.</p>
<p>Further, I discovered its support for Posix seems pretty far from being thorough enough to run libuv's Posix implementation on.  The effort seems skeletal enough that it won't be able to do that any time soon.</p>
<p>Also...sentiment on HackerNews seems to be that Wasmer is a black sheep in the community, as pushing for something that makes WASI blobs only execute in one runtime is against the mission.</p>
<p>Hence I was likely correct about WASI .wasm blobs being unlikely to be the delivery vehicle for desktop Ren-C consoles anytime soon.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="0" />
              </div>

          </div>
          <div id='post_13' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
                  Split this topic 
              </span>

              <link itemprop="mainEntityOfPage" href="1854.html">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2023-10-18T02:08:00Z' class='post-time'>
                    October 18, 2023,  2:08am
                  </time>
                  <meta itemprop='dateModified' content='2023-10-18T02:08:00Z'>
              <span itemprop='position'>13</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>2 posts were split to a new topic: <a href="../building-c-gui-code-that-calls-ren-c-wasm-and-runs-in-browser/2053.html">Building C++ GUI Code that Calls Ren-C Wasm and Runs in Browser</a></p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="0" />
              </div>

          </div>
    </div>






    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forum.rebol.info/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forum.rebol.info/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forum.rebol.info/guidelines' itemprop="url">FAQ/Guidelines </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forum.rebol.info/tos' itemprop="url">Terms of Service </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forum.rebol.info/privacy' itemprop="url">Privacy Policy </a>
        </span>
      </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    
  </body>
  
</html>
