<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>TRIPWIRE in The Wild - Show &amp; Tell - AltRebol</title>
    <meta name="description" content="If you access an unset variable, you don&amp;#39;t get a lot of information back: 
&amp;gt;&amp;gt; state: ~

&amp;gt;&amp;gt; state
** Script Error: state is ~ antiform
** See ^(...) and GET/ANY

But with antiform tags, you can embed a message into the un&amp;hellip;">
    <meta name="generator" content="Discourse 3.4.0.beta3-dev - https://github.com/discourse/discourse version 93983286b54a0e96b8073abce23f4566e9f296f7">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" media="all" content="#ffffff">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="../2278.html" />

<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="AltRebol Search">

    <link href="https://forum.rebol.info/stylesheets/color_definitions_base__2_b36da8919caf93960d3b4470a90d0e79c6a110e2.css?__ws=forum.rebol.info" media="all" rel="stylesheet" class="light-scheme"/>

  <link href="https://forum.rebol.info/stylesheets/desktop_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="desktop"  />



  <link href="https://forum.rebol.info/stylesheets/chat_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="chat"  />
  <link href="https://forum.rebol.info/stylesheets/checklist_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="checklist"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-details_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-details"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-lazy-videos_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-local-dates_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-narrative-bot_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-presence_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-presence"  />
  <link href="https://forum.rebol.info/stylesheets/docker_manager_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="docker_manager"  />
  <link href="https://forum.rebol.info/stylesheets/footnote_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="footnote"  />
  <link href="https://forum.rebol.info/stylesheets/poll_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="poll"  />
  <link href="https://forum.rebol.info/stylesheets/spoiler-alert_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="spoiler-alert"  />
  <link href="https://forum.rebol.info/stylesheets/chat_desktop_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="chat_desktop"  />
  <link href="https://forum.rebol.info/stylesheets/poll_desktop_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="https://forum.rebol.info/stylesheets/desktop_theme_2_bac9ab3eace9fe3f17026a3c4dbf25e3e9e1e9a0.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2" data-theme-name="default"/>

    
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;TRIPWIRE in The Wild&#39;" href="../2278.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://forum.rebol.info/t/tripwire-in-the-wild/2278/1" />
<meta name="twitter:url" content="https://forum.rebol.info/t/tripwire-in-the-wild/2278/1" />
<meta property="og:title" content="TRIPWIRE in The Wild" />
<meta name="twitter:title" content="TRIPWIRE in The Wild" />
<meta property="og:description" content="If you access an unset variable, you don&#39;t get a lot of information back:  &gt;&gt; state: ~  &gt;&gt; state ** Script Error: state is ~ antiform ** See ^(...) and GET/ANY  But with antiform tags, you can embed a message into the unset variable:  &gt;&gt; state: ~&lt;INITIALIZE-STATE hasn&#39;t been called yet&gt;~  &gt;&gt; state ** Script Error: state is ~&lt;INITIALIZE-STATE hasn&#39;t been called yet&gt;~ antiform ** See ^(...) and GET/ANY  This new concept is called a TRIPWIRE.  DEFAULT reacts to it, considering the variable to be &quot;v..." />
<meta name="twitter:description" content="If you access an unset variable, you don&#39;t get a lot of information back:  &gt;&gt; state: ~  &gt;&gt; state ** Script Error: state is ~ antiform ** See ^(...) and GET/ANY  But with antiform tags, you can embed a message into the unset variable:  &gt;&gt; state: ~&lt;INITIALIZE-STATE hasn&#39;t been called yet&gt;~  &gt;&gt; state ** Script Error: state is ~&lt;INITIALIZE-STATE hasn&#39;t been called yet&gt;~ antiform ** See ^(...) and GET/ANY  This new concept is called a TRIPWIRE.  DEFAULT reacts to it, considering the variable to be &quot;v..." />
<meta property="og:article:section" content="Usage" />
<meta property="og:article:section:color" content="3AB54A" />
<meta property="og:article:section" content="Show &amp; Tell" />
<meta property="og:article:section:color" content="3AB54A" />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins 🕑" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="4 ❤" />
<meta property="article:published_time" content="2024-09-15T07:46:39+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler ">
    
    <header>
  <a href="https://forum.rebol.info/">
    AltRebol
  </a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="../2278.html">TRIPWIRE in The Wild</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/usage/show-and-tell/33" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #3AB54A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Usage</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/usage/show-and-tell/33" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #3AB54A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Show &amp; Tell</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  

    <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='TRIPWIRE in The Wild'>
      <link itemprop='url' href='../2278.html'>
      <meta itemprop='datePublished' content='2024-09-15T07:46:39Z'>
        <meta itemprop='articleSection' content='Show &amp; Tell'>
      <meta itemprop='keywords' content=''>
      <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
        <meta itemprop='name' content='AltRebol'>
          <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
            <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
          </div>
      </div>


          <div id='post_1'  class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>

                <link itemprop="mainEntityOfPage" href="../2278.html">


              <span class="crawler-post-infos">
                  <time  datetime='2024-09-15T07:46:39Z' class='post-time'>
                    September 15, 2024,  7:46am
                  </time>
                  <meta itemprop='dateModified' content='2024-09-15T07:46:39Z'>
              <span itemprop='position'>1</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>If you access an unset variable, you don't get a lot of information back:</p>
<pre><code>&gt;&gt; state: ~

&gt;&gt; state
** Script Error: state is ~ antiform
** See ^(...) and GET/ANY
</code></pre>
<p>But with <strong><a href="../../antiform-tag-as-triggers-an-error-on-access-type/2170.html">antiform tags</a></strong>, you can embed a message into the unset variable:</p>
<pre><code>&gt;&gt; state: ~&lt;INITIALIZE-STATE hasn't been called yet&gt;~

&gt;&gt; state
** Script Error: state is ~&lt;INITIALIZE-STATE hasn't been called yet&gt;~ antiform
** See ^(...) and GET/ANY
</code></pre>
<p>This new concept is called a <strong>TRIPWIRE</strong>.</p>
<p>DEFAULT reacts to it, considering the variable to be "vacant"</p>
<pre><code>&gt;&gt; vacancy? get/any $state
== ~okay~  ; anti

&gt;&gt; state: default [10 + 20]
== 30

&gt;&gt; state
== 30
</code></pre>
<h2>
<a name="can-be-better-than-a-meandering-comment-1" class="anchor" href="1.html#can-be-better-than-a-meandering-comment-1"></a>Can Be Better Than A Meandering Comment!</h2>
<p>A comment won't direct people to the relevant issue at runtime.  But a well-chosen tripwire can.</p>
<p>Compare:</p>
<pre><code>; !!! UPARSE is not available in SYS because it is higher level.  We hack it
; up so that when %uparse.r runs it pokes itself into sys.util/parse
;
parse: ~
</code></pre>
<p>With:</p>
<pre><code>parse: ~&lt;higher-level %uparse.r hasn't set SYS.UTIL/PARSE yet&gt;~
</code></pre>
<p>Much better!  Gives you the information you need, when you need it!</p>
<p><em>(Note: I was inspired to this concept by a style of usage <a class="mention" href="https://forum.rebol.info/u/rgchris">@rgchris</a> had in his scripts, using TAG!s to provide guidance for what was supposed to be filled into certain slots.  I just wanted to give that some teeth, to know that the variable was conceptually unset.)</em></p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="2" />
              <span class='post-likes'>2 Likes</span>
            </div>

                <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../../generalized-argument-removal-specialize-relax/2297.html">Generalized Argument Removal - SPECIALIZE:RELAX</a>
                        <meta itemprop='position' content='2'>
                      </div>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../../making-fail-stand-out-with-antiform-tag/2282.html">Making FAIL Stand Out With Antiform TAG!</a>
                        <meta itemprop='position' content='3'>
                      </div>
                </div>
          </div>
          <div id='post_2' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2024-10-08T01:54:42Z' class='post-time'>
                    October 8, 2024,  1:54am
                  </time>
                  <meta itemprop='dateModified' content='2024-10-08T01:54:42Z'>
              <span itemprop='position'>2</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <h2><a name="p-7832-is-signaling-with-tripwires-good-or-bad-1" class="anchor" href="1.html#p-7832-is-signaling-with-tripwires-good-or-bad-1"></a>Is Signaling With Tripwires Good Or Bad?</h2>
<p>I don't totally remember the motivation, but I came up with a feature of ASSERT where you could give it a handler...to receive the assertion condition that failed, and process it in some way:</p>
<pre><code>&gt;&gt; h: func [cond] [print ["condition is:" @cond]]

&gt;&gt; assert:handler [1 = 1, 2 = 3, 3 = 4] get $h
condition is [2 = 3]
** Error: Assertion Failure....
</code></pre>
<p>Maybe it's interesting.  I dunno.  But something I had in it was that ASSERT would check the return value from the function, and if it was an <strong><code>~ignore~</code></strong> WORD! antiform it would not raise an error, but would continue processing the conditions.</p>
<p>We don't allow arbitrary keywords any longer, but the feature could still be approximated with a tripwire as <strong><code>~&lt;ignore&gt;~</code></strong>.</p>
<pre><code>&gt;&gt; h: func [cond] [print ["condition is:" @cond] return ~&lt;ignore&gt;~]

&gt;&gt; assert:handler [1 = 1, 2 = 3, 3 = 4] get $h
condition is [2 = 3]
condition is [3 = 4]

&gt;&gt;
</code></pre>
<p>There have been some changes to where functions <a href="../../implicit-execution-of-return-in-functions-bad/1656.html">return nothing by default, if you don't have a return statement</a>.  But this doesn't apply to lambdas.</p>
<p>So some of the idea here is to let you use a thing like a lambda and have a weird/ornery out-of-band kind of result that signals a behavior, while other values (blocks, integers, anything you might randomly synthesize) won't.  e.g.  <strong><code>h: cond -&gt; [append log cond]</code></strong> as a handler would log the assert but still fail, while <strong><code>h: cond -&gt; [append log cond, ~&lt;ignore&gt;~]</code></strong> would log and not fail.</p>
<p>Obviously there's potential for failure or conflation if you call a function that just so happens to evaluate to <strong><code>~&lt;ignore&gt;~</code></strong> and you didn't mean to ignore.  But eh.  It is what it is, and it's kind of cool.</p>
<p>Making this kind of thing somewhat tractable is the fact that tripwires allow comparisons (while nothings don't).  So they are more readily used in this way, despite being "ornery".</p>
<p>I'll keep this around for now.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
          <div id='post_3' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2024-11-10T13:44:52Z' class='post-time'>
                    November 10, 2024,  1:44pm
                  </time>
                  <meta itemprop='dateModified' content='2024-11-10T13:44:52Z'>
              <span itemprop='position'>3</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <h2><a name="p-7883-tripwires-catch-bugs-failing-functions-wont-1" class="anchor" href="1.html#p-7883-tripwires-catch-bugs-failing-functions-wont-1"></a>Tripwires Catch Bugs Failing Functions Won't</h2>
<p>Prior to the existence of tripwires, there were some functions in LIB for things like RETURN, CONTINUE, THROW, etc. to give you messages when you tried to use these definitional constructs in places that didn't provide them:</p>
<pre><code>/return: func [] [
    fail:blame "RETURN called when no generator is providing it" $return
]

/continue: func [] [
    fail:blame "CONTINUE called when no loop is providing it" $return
]

/throw: func [] [
    fail:blame "THROW called when no catch is providing it" $return
]

...
</code></pre>
<p>Passing the <code>$return</code> bound word as the <code>:BLAME</code> argument is a bit awkward to write.  But it means the error will blame the callsite, showing the error there--instead of implicating the FAIL itself inside the stub function.  That makes the error much more useful.</p>
<p><strong>But this still makes it look like the functions are available.</strong>  <img src="../../../images/emoji/twitter/frowning.png%3Fv=12" title=":frowning:" class="emoji" alt=":frowning:" loading="lazy" width="20" height="20"></p>
<p>You won't get an error if you say <strong><code>return/</code></strong> to try and get a RETURN function.  You'll get a function--and it will pass the rule that things ending in slash must look up to functions--but it's not the kind of RETURN function you actually wanted.</p>
<p>This led to confusing downstream bugs when some code wasn't binding correctly, but proceeded merrily along as if it had gotten a RETURN function.</p>
<p><strong>Tripwires make it nice and tidy!</strong></p>
<pre><code>return: ~&lt;RETURN used when no function generator is providing it&gt;~

continue: ~&lt;CONTINUE used when no loop is providing it&gt;~

throw: ~&lt;THROW used when no catch is providing it&gt;~

...
</code></pre>
<p>You get the "blame" of the callsite for free, because tripwires aren't function instantiations.</p>
<p>And if you say <strong><code>return/</code></strong> then that's an error, because it's not a function.</p>
<p><em>This is quite an improvement!</em></p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="2" />
              <span class='post-likes'>2 Likes</span>
            </div>

          </div>
    </div>


    




    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forum.rebol.info/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forum.rebol.info/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forum.rebol.info/guidelines' itemprop="url">Guidelines </a>
        </span>
      </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    
  </body>
  
</html>
