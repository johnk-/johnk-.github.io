<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Looking into a *usermode* POINTFREE - #5 - Functions - AltRebol</title>
    <meta name="description" content="The concept of &amp;quot;Point Free&amp;quot; or &amp;quot;Tacit Programming&amp;quot; is that it&amp;#39;s a way of relating functions to each other without mentioning their arguments. 
So instead of writing something like: 
 append-to-data: function [value] [app&amp;hellip;">
    <meta name="generator" content="Discourse 3.4.0.beta3-dev - https://github.com/discourse/discourse version 93983286b54a0e96b8073abce23f4566e9f296f7">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" media="all" content="#ffffff">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="../1236.html" />

<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="AltRebol Search">

    <link href="https://forum.rebol.info/stylesheets/color_definitions_base__2_b36da8919caf93960d3b4470a90d0e79c6a110e2.css?__ws=forum.rebol.info" media="all" rel="stylesheet" class="light-scheme"/>

  <link href="https://forum.rebol.info/stylesheets/desktop_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="desktop"  />



  <link href="https://forum.rebol.info/stylesheets/chat_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="chat"  />
  <link href="https://forum.rebol.info/stylesheets/checklist_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="checklist"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-details_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-details"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-lazy-videos_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-local-dates_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-narrative-bot_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-presence_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-presence"  />
  <link href="https://forum.rebol.info/stylesheets/docker_manager_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="docker_manager"  />
  <link href="https://forum.rebol.info/stylesheets/footnote_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="footnote"  />
  <link href="https://forum.rebol.info/stylesheets/poll_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="poll"  />
  <link href="https://forum.rebol.info/stylesheets/spoiler-alert_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="spoiler-alert"  />
  <link href="https://forum.rebol.info/stylesheets/chat_desktop_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="chat_desktop"  />
  <link href="https://forum.rebol.info/stylesheets/poll_desktop_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="https://forum.rebol.info/stylesheets/desktop_theme_2_bac9ab3eace9fe3f17026a3c4dbf25e3e9e1e9a0.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2" data-theme-name="default"/>

    
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;Looking into a *usermode* POINTFREE&#39;" href="../1236.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://forum.rebol.info/t/looking-into-a-usermode-pointfree/1236/5" />
<meta name="twitter:url" content="https://forum.rebol.info/t/looking-into-a-usermode-pointfree/1236/5" />
<meta property="og:title" content="Looking into a *usermode* POINTFREE" />
<meta name="twitter:title" content="Looking into a *usermode* POINTFREE" />
<meta property="og:description" content="The concept of &quot;Point Free&quot; or &quot;Tacit Programming&quot; is that it&#39;s a way of relating functions to each other without mentioning their arguments.  So instead of writing something like:   append-to-data: function [value] [append data value]  You&#39;d have some way of avoiding the redundancy of having to say &quot;value&quot; twice.  So imagine declaring an identical function with a syntax like:   append-to-data: pointfree [append data]  That would notice you didn&#39;t provide all the parameters to append, so an impl..." />
<meta name="twitter:description" content="The concept of &quot;Point Free&quot; or &quot;Tacit Programming&quot; is that it&#39;s a way of relating functions to each other without mentioning their arguments.  So instead of writing something like:   append-to-data: function [value] [append data value]  You&#39;d have some way of avoiding the redundancy of having to say &quot;value&quot; twice.  So imagine declaring an identical function with a syntax like:   append-to-data: pointfree [append data]  That would notice you didn&#39;t provide all the parameters to append, so an impl..." />
<meta property="og:article:section" content="Development" />
<meta property="og:article:section:color" content="25AAE2" />
<meta property="og:article:section" content="Functions" />
<meta property="og:article:section:color" content="25AAE2" />
<meta property="article:published_time" content="2019-10-30T13:38:19+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler ">
    
    <header>
  <a href="https://forum.rebol.info/">
    AltRebol
  </a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="../1236.html">Looking into a *usermode* POINTFREE</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/development/functions/59" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/development/functions/59" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Functions</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  

    <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='Looking into a *usermode* POINTFREE'>
      <link itemprop='url' href='../1236.html'>
      <meta itemprop='datePublished' content='2019-10-30T13:38:19Z'>
        <meta itemprop='articleSection' content='Functions'>
      <meta itemprop='keywords' content=''>
      <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
        <meta itemprop='name' content='AltRebol'>
          <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
            <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
          </div>
      </div>


          <div id='post_1'  class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>

                <link itemprop="mainEntityOfPage" href="../1236.html">


              <span class="crawler-post-infos">
                  <time  datetime='2019-10-30T13:38:19Z' class='post-time'>
                    October 30, 2019,  1:38pm
                  </time>
                  <meta itemprop='dateModified' content='2024-09-10T15:56:25Z'>
              <span itemprop='position'>1</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>The concept of <a href="https://en.wikipedia.org/wiki/Tacit_programming">"Point Free" or "Tacit Programming"</a> is that it's a way of relating functions to each other without mentioning their arguments.</p>
<p>So instead of writing something like:</p>
<pre><code> append-to-data: function [value] [append data value]
</code></pre>
<p>You'd have some way of avoiding the redundancy of having to say "value" twice.  So imagine declaring an identical function with a syntax like:</p>
<pre><code> append-to-data: pointfree [append data]
</code></pre>
<p>That would notice you didn't provide all the parameters to append, so an implicit parameter to the new function would be added.  But what if you wanted instead something like:</p>
<pre><code>append-10: function [series] [append series 10]
</code></pre>
<p>So maybe you would have some syntax in POINTFREE for that where you put a placeholder in spots that you wanted implicitly picked up.  Maybe BLANK! as a default:</p>
<pre><code>append-10: pointfree [append _ 10]
</code></pre>
<p><em>(Note: <strong>pointfree</strong> may not be the best name, but it won't be taken for other reasons...and reinforces the term for Rebol programmers unused to FP concepts.  There may be a nicer name.)</em></p>
<h2>
<a name="writing-this-in-usermode-in-historical-rebol-is-non-trivial-1" class="anchor" href="5.html#writing-this-in-usermode-in-historical-rebol-is-non-trivial-1"></a>Writing This In Usermode In Historical Rebol Is Non-Trivial</h2>
<p>If you think writing a reliable POINTFREE yourself would be easy in Rebol2/Red, <strong>I invite you to try</strong>.  There's a lot to get right with parameter analysis and ordering refinements; beyond the average user.  It doesn't get much easier if you are coding inside the system, either.</p>
<p>It would also be noticeably slower, using any method in near-reach.  The only mechanisms would involve creating a whole new function spec, where the evaluator would have to pass parameters to that function...then start evaluating again to make a nested call...type checking all over again.</p>
<p>Ren-C has several tricks up its sleeve, including the duality between FRAME! and ACTION as "antiform FRAME!".  This provides a convenient round-trip:</p>
<pre><code>&gt;&gt; data: [a b c]

&gt;&gt; f: make frame! :append
&gt;&gt; f.series: data

&gt;&gt; apd: runs f
&gt;&gt; apd [d e f]

&gt;&gt; data
== [a b c d e f]
</code></pre>
<p>There's also a great convenience afforded by Ren-C's smart specialization handling.  Consider:</p>
<pre><code>&gt;&gt; parameters of :append
== [series value /part /only /dup /line]

&gt;&gt; apdup: :append/dup

&gt;&gt; parameters of :apdup
== [series value dup /part /only /line]
</code></pre>
<p>So if you have someone writing <strong>pointfree [append/dup ...]</strong> you don't worry...just GET the PATH!, and the function you are handed back doesn't even report DUP as a refinement.  It's a normal parameter now.</p>
<p>There's also more unlocked by the idea of <a href="../../pure-and-refined-simplifying-refinements-to-one-or-zero-args/1120.html">refinements naming their 0-or-1 arguments</a>.  We've seen it open doors with <a href="../../augment-add-parameters-and-refinements-after-the-fact/1216.html">AUGMENT</a>, but it helps here and elsewhere.</p>
<hr>
<h2>
<a name="a-start-on-the-vision-of-pointfree-2" class="anchor" href="5.html#a-start-on-the-vision-of-pointfree-2"></a>A Start on the Vision of POINTFREE</h2>
<p>Below is a draft usermode implementation.  It is incomplete and raises some issues.  The biggest issue is that it only lets you specialize by example at one level of depth.  So you can't write:</p>
<pre><code>&gt;&gt; apde-spread: pointfree [append _ spread]

&gt;&gt; apde-spread [a b c] [d e]
== [a b c d e]
</code></pre>
<p>That would require some kind of recursive process--the call to SPREAD in the parameter slot for APPEND would have to be done using POINTFREE as well.</p>
<p>Moreover, there's a semantic question of when to capture variables.  If you write:</p>
<pre><code>&gt;&gt; x: 10

&gt;&gt; add-x: pointfree [add x]

&gt;&gt; x: 20

&gt;&gt; add-x 1000
== ???
</code></pre>
<p>...do you want to add the value of X as it was at the moment of specialization, and get 1010?  Or to add its current value and get 1020?  If you wrote out a function you'd get 1020, and I'd think the more common desire (and you should have to say <strong>pointfree compose [add (x)]</strong> to get the former intent).  But as written now you get 1010, so a different mechanism is needed.</p>
<p>All that said, this implementation shows relatively little code, that's taking care of some rather complex acrobatics!  I'd hope it wouldn't be too far beyond the reach of a novice to write.</p>
<h3>
<a name="pointfree-is-lower-level-takes-applicand-separate-from-args-3" class="anchor" href="5.html#pointfree-is-lower-level-takes-applicand-separate-from-args-3"></a>POINTFREE* Is Lower-Level, Takes Applicand Separate From Args</h3>
<p>This layer takes FRAME! and BLOCK! as two separate arguments.  If the user does:</p>
<pre><code>&gt;&gt; apde: pointfree* :append [_ [d e]]
</code></pre>
<p>Then the blank signals an unspecialized slot.  So that would be like writing:</p>
<pre><code>&gt;&gt; apde: specialize :append [value: [d e]]  ; leave series unspecialized

&gt;&gt; apde [a b c]
== [a b c [d e]]
</code></pre>
<p>Note that Variadics are not supported at this time.  And there's an ongoing effort to improve <a href="../../representing-everything-about-a-parameter-except-its-name/1459/6.html">parameter reflection</a>, but this is what we have at the moment.</p>
<pre><code>pointfree*: func* [
    "Specialize by example: https://en.wikipedia.org/wiki/Tacit_programming"

    return: [action?]
    frame [&lt;unrun&gt; frame!]
    block "Invocation by example (BLANK!s are unspecialized)"
        [block!]
    &lt;local&gt; params var
][
    frame: copy frame  ; if given e.g. APPEND's frame, don't mutate it!

    for-each param (parameters of frame) [
        if tail? block [break]  ; no more args, leave rest unspecialized

        match [word! lit-word? get-word!] param else [
            continue  ; skip unused refinements
        ]

        case [
            blank? block.1 [  ; means leave unspecialized
                block: next block
            ]

            match word! param [  ; ordinary parameter
                [block frame.(param)]: evaluate/next block
            ]

            all [
                match [get-word!] param  ; soft literal parameter
                match [group! get-word! get-tuple!] block.1
            ][
                frame.(param): reeval block.1
                block: next block
            ]

            &lt;default&gt; [  ; hard literal or non-escaped soft literal
                frame.(param): block.1
                block: next block
            ]
        ]
    ]

    if not tail? block [
        fail/blame [
            "Unused argument data at end of POINTFREE block"
        ] $block
    ]

    return runs frame
]
</code></pre>
<h3>
<a name="higher-level-pointfree-includes-the-applicand-in-the-block-4" class="anchor" href="5.html#higher-level-pointfree-includes-the-applicand-in-the-block-4"></a>Higher-Level POINTFREE Includes the Applicand In The BLOCK!</h3>
<p>This higher-level version wants the name of an action at the head of the block, e.g.</p>
<pre><code>pointfree [append _ [d e]]
=&gt;
pointfree* :append [_ [d e]]
</code></pre>
<p>It does this by specializing out the frame on the interface of POINTFREE* and just taking a block.  Then when it's called, it overwrites the dummy specialization with a frame from the first block element, and updates the block to be one step forward.</p>
<pre><code>pointfree: specialize (adapt get $pointfree* [
    frame: (match frame! any [  ; no SET-WORD! namecache
        if match [word! path!] block.1 [
            unrun get/any inside block block.1
        ]
    ]) else [
        fail "POINTFREE requires FRAME! argument at head of block"
    ]

    block: next block
])[
    frame: unrun get $panic/value  ; overwritten, best to be something mean
]
</code></pre>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

                <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../../find-treats-typeset-s-specially-why-not-functions/1881/2.html">FIND treats TYPESET!s specially...why not functions?</a>
                        <meta itemprop='position' content='5'>
                      </div>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../../api-idea-prepared-statements/2353/2.html">API Idea: Prepared Statements</a>
                        <meta itemprop='position' content='6'>
                      </div>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../../function-mu-rebmus-function-generator-dialect/1379.html">FUNCTION-MU: Rebmu&#39;s Function Generator Dialect</a>
                        <meta itemprop='position' content='7'>
                      </div>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../../shorthand-interface-and-symbol-name-for-pointfree/2263.html">Shorthand Interface and Symbol/Name for POINTFREE</a>
                        <meta itemprop='position' content='8'>
                      </div>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../../parameter-order-in-rebol/1238.html">Parameter Order in Rebol</a>
                        <meta itemprop='position' content='9'>
                      </div>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../../the-cliffs-of-complexity-how-much-is-too-much/1241.html">The Cliffs of Complexity: How Much Is Too Much?</a>
                        <meta itemprop='position' content='10'>
                      </div>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../../speaking-with-tics-should-quoted-arguments-always-be-apostrophed/1359.html">Speaking With Tics: Should Quoted Arguments Always Be Apostrophe&#39;d?</a>
                        <meta itemprop='position' content='11'>
                      </div>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../../rebmus-funqtion-fq-dialecting-function-definition-itself/1796.html">Rebmu&#39;s FUNQTION (FQ): Dialecting Function Definition Itself</a>
                        <meta itemprop='position' content='12'>
                      </div>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../../brevity-in-the-box-when-is-it-worth-it/1380.html">Brevity in the Box: When Is It Worth It?</a>
                        <meta itemprop='position' content='13'>
                      </div>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../../arturo-rebol-inspired-language/1370/11.html">Arturo: &quot;Rebol-inspired&quot; Language</a>
                        <meta itemprop='position' content='14'>
                      </div>
                </div>
          </div>
    </div>

      <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
          <span itemprop='name'>
            <a itemprop="url" href="../1236.html#post_1">show post in topic</a>
          </span>
      </div>

    




    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forum.rebol.info/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forum.rebol.info/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forum.rebol.info/guidelines' itemprop="url">Guidelines </a>
        </span>
      </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    
  </body>
  
</html>
