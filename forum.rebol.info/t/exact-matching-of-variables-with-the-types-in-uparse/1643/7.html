<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Exact Matching of Variables with the @ Types In UPARSE - #7 by hostilefork - Parsing - AltRebol</title>
    <meta name="description" content="I mentioned that the @ types were slated for use for matching the contents of a variable exactly.  The most frequent example I have given is: 
&amp;gt;&amp;gt; block: [some &amp;quot;a&amp;quot;]

&amp;gt;&amp;gt; uparse [[some &amp;quot;a&amp;quot;] [some &amp;quot;a&amp;quot;]] [some @block]
== [som&amp;hellip;">
    <meta name="generator" content="Discourse 3.4.0.beta3-dev - https://github.com/discourse/discourse version 93983286b54a0e96b8073abce23f4566e9f296f7">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" media="all" content="#ffffff">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="../1643.html" />

<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="AltRebol Search">

    <link href="https://forum.rebol.info/stylesheets/color_definitions_base__2_b36da8919caf93960d3b4470a90d0e79c6a110e2.css?__ws=forum.rebol.info" media="all" rel="stylesheet" class="light-scheme"/>

  <link href="https://forum.rebol.info/stylesheets/desktop_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="desktop"  />



  <link href="https://forum.rebol.info/stylesheets/chat_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="chat"  />
  <link href="https://forum.rebol.info/stylesheets/checklist_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="checklist"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-details_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-details"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-lazy-videos_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-local-dates_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-narrative-bot_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-presence_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-presence"  />
  <link href="https://forum.rebol.info/stylesheets/docker_manager_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="docker_manager"  />
  <link href="https://forum.rebol.info/stylesheets/footnote_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="footnote"  />
  <link href="https://forum.rebol.info/stylesheets/poll_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="poll"  />
  <link href="https://forum.rebol.info/stylesheets/spoiler-alert_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="spoiler-alert"  />
  <link href="https://forum.rebol.info/stylesheets/chat_desktop_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="chat_desktop"  />
  <link href="https://forum.rebol.info/stylesheets/poll_desktop_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="https://forum.rebol.info/stylesheets/desktop_theme_2_bac9ab3eace9fe3f17026a3c4dbf25e3e9e1e9a0.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2" data-theme-name="default"/>

    
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;Exact Matching of Variables with the @ Types In UPARSE&#39;" href="../1643.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://forum.rebol.info/t/exact-matching-of-variables-with-the-types-in-uparse/1643/7" />
<meta name="twitter:url" content="https://forum.rebol.info/t/exact-matching-of-variables-with-the-types-in-uparse/1643/7" />
<meta property="og:title" content="Exact Matching of Variables with the @ Types In UPARSE" />
<meta name="twitter:title" content="Exact Matching of Variables with the @ Types In UPARSE" />
<meta property="og:description" content="I think I&#39;ve finally decided to declare @ to be a shorthand for &quot;match any item at this position&quot;, and not take an argument.  This combinator&#39;s &quot;long&quot; form is called ONE (a replacement for historical SKIP, because reading [x: skip] and expecting that to store an item in a variable sounds like the opposite of skipping... and also, SKIP being arity-0 doesn&#39;t fit with the rest of the system... UPARSE instead has a SKIP combinator that takes how much to skip):  &gt;&gt; parse [#foo &lt;bar&gt;] [issue! one] == &lt;..." />
<meta name="twitter:description" content="I think I&#39;ve finally decided to declare @ to be a shorthand for &quot;match any item at this position&quot;, and not take an argument.  This combinator&#39;s &quot;long&quot; form is called ONE (a replacement for historical SKIP, because reading [x: skip] and expecting that to store an item in a variable sounds like the opposite of skipping... and also, SKIP being arity-0 doesn&#39;t fit with the rest of the system... UPARSE instead has a SKIP combinator that takes how much to skip):  &gt;&gt; parse [#foo &lt;bar&gt;] [issue! one] == &lt;..." />
<meta property="og:article:section" content="Domains" />
<meta property="og:article:section:color" content="F1592A" />
<meta property="og:article:section" content="Parsing" />
<meta property="og:article:section:color" content="F1592A" />
<meta property="article:published_time" content="2024-11-08T20:06:33+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler ">
    
    <header>
  <a href="https://forum.rebol.info/">
    AltRebol
  </a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="../1643.html">Exact Matching of Variables with the @ Types In UPARSE</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/domains/parsing/16" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #F1592A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Domains</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/domains/parsing/16" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #F1592A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Parsing</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  

    <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='Exact Matching of Variables with the @ Types In UPARSE'>
      <link itemprop='url' href='../1643.html'>
      <meta itemprop='datePublished' content='2021-08-02T18:58:15Z'>
        <meta itemprop='articleSection' content='Parsing'>
      <meta itemprop='keywords' content=''>
      <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
        <meta itemprop='name' content='AltRebol'>
          <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
            <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
          </div>
      </div>

          <span itemprop='author' itemscope itemtype="http://schema.org/Person">
            <meta itemprop='name' content='hostilefork'>
            <link itemprop='url' href='https://forum.rebol.info/u/hostilefork'>
          </span>
        <meta itemprop='text' content='I mentioned that the @ types were slated for use for matching the contents of a variable exactly.  The most frequent example I have given is: 
&amp;gt;&amp;gt; block: [some &amp;quot;a&amp;quot;]

&amp;gt;&amp;gt; uparse [[some &amp;quot;a&amp;quot;] [some &amp;quot;a&amp;quot;]] [some @block]
== [som&amp;hellip;'>

          <div id='post_7' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2024-11-08T20:06:33Z' class='post-time'>
                    November 8, 2024,  8:06pm
                  </time>
                  <meta itemprop='dateModified' content='2024-11-09T22:41:54Z'>
              <span itemprop='position'>7</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>I think I've finally decided to declare <strong><code>@</code></strong> to be a shorthand for "match any item at this position", and not take an argument.</p>
<p>This combinator's "long" form is called ONE <em>(a replacement for historical SKIP, because reading <strong><code>[x: skip]</code></strong> and expecting that to store an item in a variable sounds like the opposite of skipping... and also, SKIP being arity-0 doesn't fit with the rest of the system... UPARSE instead has a SKIP combinator that takes how much to skip)</em>:</p>
<pre><code>&gt;&gt; parse [#foo &lt;bar&gt;] [issue! one]
== &lt;bar&gt;
</code></pre>
<p>So now, it simply has a shorthand:</p>
<pre><code>&gt;&gt; parse [#foo &lt;bar&gt;] [issue! @]
== &lt;bar&gt;
</code></pre>
<p>To justify why this isn't a fully arbitrary choice: when we see something like <code>@var</code> that's matching at the current position under the constraint of the provided variable:</p>
<pre><code>&gt;&gt; block: [some "a"]

&gt;&gt; parse [[some "a"] [some "a"]] [some @block]
== [some "a"]
</code></pre>
<p>So it doesn't seem too crazy that when you take away the variable name that's being looked up for the constraint, you'd get a combinator that matches <em>anything</em>.</p>
<h2><a name="p-7879-this-frees-blank-up-for-literal-match-blank-or-space-1" class="anchor" href="7.html#p-7879-this-frees-blank-up-for-literal-match-blank-or-space-1"></a>This Frees BLANK! Up For Literal Match Blank, Or Space</h2>
<p>Since the dawn of the BLANK! datatype, I have wanted to use it for space in string PARSE (among other places), and literal match of blanks in blocks:</p>
<pre><code>&gt;&gt; parse "a b" ["a" _ "b"]
== "b"

&gt;&gt; parse [a _ b] ['a _ 'b]
== b
</code></pre>
<p>But the idea of blank being either "match anything at current position" or "no-op" have been competing intents.</p>
<p>Even the question of being an underscore in strings comes up, but now that's done with quoting (which mold-matches any type)</p>
<pre><code>&gt;&gt; parse "a_&lt;b&gt;" ['a '_ '&lt;b&gt;]
== &lt;b&gt;
</code></pre>
<p>The @ symbol is a bit bulkier for match any item here, but I think its bulk is to scale of its intent...and as I point out, puts it in the family of the other <code>@xxx</code> combinators.</p>
<p>We now have a pretty good answer for people who want a way to opt out of rules without using an empty block... use a void:</p>
<pre><code>&gt;&gt; rule: if 1 = 2 [[some "b"]]
== ~void~  ; anti

&gt;&gt; parse "aaa" [rule some "a"]
== "a"
</code></pre>
<p>So I don't think it's necessary to dabble in the idea of having a fetched blank mean something different.  I'm happy enough saying that the BLANK! combinator only applies in the rule as source, and gives you an error if you try to fetch it via word.</p>
<p>Though I will point out that <strong><code>@var</code></strong> has quoting semantics--as if the fetched <strong>var</strong> were in the rule block with one quote level added.  Hence you would get the underscore behavior:</p>
<pre><code>&gt;&gt; parse "a_&lt;b&gt;" ['a @blank '&lt;b&gt;]
== &lt;b&gt;
</code></pre>
<p>...but if fetching BLANK! from a WORD! did anything (though I think it shouldn't), it should be a no-op:</p>
<pre><code> &gt;&gt; parse "ab" ['a blank 'b]
 == b  ; not that I think it should do this, but if it DID do something...
</code></pre>
<p>If some amazingly compelling case for that shows up, then perhaps it should be enabled.</p>
<h2><a name="p-7879-for-quoting-theres-just-and-literal-2" class="anchor" href="7.html#p-7879-for-quoting-theres-just-and-literal-2"></a>For Quoting, There's JUST and LITERAL</h2>
<p>This means @ doesn't behave like it does in the main evaluator as an arity-1 operator for literalizing the subsequent argument.</p>
<p>But you have other options.  <a href="../../synthesizing-parse-values-from-thin-air-just/2328.html">JUST will "just" synthesize the value (don't match it)</a>, while LITERAL will match it (and synthesize if matched).</p>
<pre><code>&gt;&gt; parse [] [just x]
== x

&gt;&gt; parse [''x] [literal ''x]
== ''x
</code></pre>
<p>LITERAL is nice when the thing you are matching has more than one quote level, because otherwise it can feel a little confusing:</p>
<pre><code>&gt;&gt; parse [''x] ['''x]
== ''x
</code></pre>
<p>It's also nice if something has a quote mark in the name:</p>
<pre><code> &gt;&gt; foo': "foo prime"

 &gt;&gt; parse [foo'] ['foo']  ; hrrrm
 == foo'

 &gt;&gt; parse [foo'] [literal foo']
 == foo'
</code></pre>
<p>As a shorthand, there's LIT.</p>
<pre><code> &gt;&gt; parse [foo'] [lit foo']
 == foo'
</code></pre>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="1" />
              <span class='post-likes'>1 Like</span>
            </div>

                <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../../tag-s-angle-brackets-they-arent-there/2326/3.html">TAG!s Angle Brackets: *They Aren&#39;t There!*</a>
                        <meta itemprop='position' content='2'>
                      </div>
                </div>
          </div>
    </div>

      <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
          <span itemprop='name'>
            <a itemprop="url" href="../1643.html#post_7">show post in topic</a>
          </span>
      </div>

    




    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forum.rebol.info/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forum.rebol.info/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forum.rebol.info/guidelines' itemprop="url">Guidelines </a>
        </span>
      </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    
  </body>
  
</html>
