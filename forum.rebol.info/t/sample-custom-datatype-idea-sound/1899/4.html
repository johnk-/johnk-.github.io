<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Sample Custom Datatype Idea: Sound - #4 by rgchris - Datatypes - AltRebol</title>
    <meta name="description" content="As an example, lets build a simple custom structure: 
[[internal structures][data1][data2][data3][data4]]

I want that that head corresponds to data1, and index? returns1 when positioned there. 
If you have an internal a&amp;hellip;">
    <meta name="generator" content="Discourse 2.7.0.beta4 - https://github.com/discourse/discourse version 3fc72543de22c329cf2156f28b781821adc496ae">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" content="#ffffff">
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="../1899.html" />
<script type="application/ld+json">{"@context":"http://schema.org","@type":"WebSite","url":"https://forum.rebol.info","potentialAction":{"@type":"SearchAction","target":"https://forum.rebol.info/search?q={search_term_string}","query-input":"required name=search_term_string"}}</script>
<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="AltRebol Search">

      <link href="https://forum.rebol.info/stylesheets/desktop_cdfbc200d3f5311dbee0f69ae668cfc42cfc8cb7.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="desktop" data-theme-id="2"/>
      <link href="https://forum.rebol.info/stylesheets/desktop_theme_2_7b2b5b1bc734c2cc3b6ad5e0f49f467e8601ef2c.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2"/>
    
    
        <link rel="alternate" type="application/rss+xml" title="RSS feed of &#39;Sample Custom Datatype Idea: Sound&#39;" href="../1899.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://forum.rebol.info/t/sample-custom-datatype-idea-sound/1899/4" />
<meta name="twitter:url" content="https://forum.rebol.info/t/sample-custom-datatype-idea-sound/1899/4" />
<meta property="og:title" content="Sample Custom Datatype Idea: Sound" />
<meta name="twitter:title" content="Sample Custom Datatype Idea: Sound" />
<meta property="og:description" content="There&#39;s two ways to initiate ports in Rebol/Ren-C currently—1) by URL/File datatypes and 2) by block [scheme: &#39;thing ...dialect of your choice...]. If by overriding : you mean something along the lines of KWATZ!, that&#39;d be a huge language design decision.  For now ports are the closest thing you have to a custom datatype—I think there&#39;s another way but it needs to be fleshed out more as an approach.   I&#39;m not quite sure what you mean by this—do you mean that going the port direction means your ..." />
<meta name="twitter:description" content="There&#39;s two ways to initiate ports in Rebol/Ren-C currently—1) by URL/File datatypes and 2) by block [scheme: &#39;thing ...dialect of your choice...]. If by overriding : you mean something along the lines of KWATZ!, that&#39;d be a huge language design decision.  For now ports are the closest thing you have to a custom datatype—I think there&#39;s another way but it needs to be fleshed out more as an approach.   I&#39;m not quite sure what you mean by this—do you mean that going the port direction means your ..." />
<meta property="article:published_time" content="2022-07-25T13:36:42+00:00" />
<meta property="og:ignore_canonical" content="true" />



    
  </head>
  <body class="crawler">
    
    <header>
      <a href="https://forum.rebol.info/">
          <img src="../../../uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" alt="AltRebol" id="site-logo" style="max-width: 150px;">
      </a>
    </header>
    <div id="main-outlet" class="wrap">
        <div id="topic-title">
    <h1>
      <a href="../1899.html">Sample Custom Datatype Idea: Sound</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/development/8" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="../../../c/development/datatypes.html" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Datatypes</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  


      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../../u/GiuseppeChillemi.html'><span itemprop='name'>GiuseppeChillemi</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1899.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2022-07-24T10:23:27Z'>
              <time itemprop='dateModified' datetime='2022-07-24T12:01:56Z' class='post-time'>
                July 24, 2022, 12:01pm
              </time>
          <span itemprop='position'>#1</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>As an example, lets build a simple custom structure:</p>
<pre><code>[[internal structures][data1][data2][data3][data4]]
</code></pre>
<p>I want that that <code>head</code> corresponds to <code>data1</code>, and <code>index?</code> returns1 when positioned there.</p>
<p>If you have an internal action called "reposition" and "get-position" belonging to that datatype, Ren-C should look at the block if it carries an additional management object. If it contains "reposition" and "get-position" it should use this custom functions to override the standard ones for the datatype. You code them so that they do not move before data1, and you have a special structure which acts transparently to the standard Ren-C working.</p>
<p>Now lets take:</p>
<pre><code>sound: [[header] size: 5000 modified-by: "HF" sound: #A45ACF...  [tail-data]]
</code></pre>
<p>It is your structure to store a sound.</p>
<p>you want that at set operation using ':' will be written <code>raster-image:</code> content, so that</p>
<pre><code>sound: load %mysong.wav
</code></pre>
<p>You add a custom management object with overwrites the set operation and also all the others regarding <code>pick/length?/poke...</code> and so on, so that your Ren-C script works with the usual syntax, which is internally manage by from you replacement actions, translating everything to the new coordinates and operation system</p>
<p>Obviously, you could have additional action to be available to the developers which do not replace the internal actions but they could be called with syntax like:</p>
<pre><code>do-custom data 'method [parameter parameter]
</code></pre>
<p>or having a special path like <code>sound/#/fourier-trasform</code></p>
        </div>

        <meta itemprop='headline' content='Sample Custom Datatype Idea: Sound'>
          <meta itemprop='keywords' content=''>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

            <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                  <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                    <a href="../../could-strings-have-context/587/23.html" itemscope itemtype='http://schema.org/DiscussionForumPosting' itemprop='item'>
                      <meta itemprop='url' content='https://forum.rebol.info/t/could-strings-have-context/587/23'>
                      <span itemprop='name'>Could strings have context?</span>
                    </a>
                    <meta itemprop='position' content='1'>
                  </div>
            </div>
      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/rgchris'><span itemprop='name'>rgchris</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1899.html">


          <span class="crawler-post-infos">
              <meta itemprop='datePublished' content='2022-07-24T12:44:06Z'>
              <time itemprop='dateModified' datetime='2022-07-24T12:44:40Z' class='post-time'>
                July 24, 2022, 12:44pm
              </time>
          <span itemprop='position'>#2</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="GiuseppeChillemi" data-post="1" data-topic="1899">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/g/838e76/40.png" class="avatar"> GiuseppeChillemi:</div>
<blockquote>
<p>I want that that <code>head</code> corresponds to <code>data1</code>, and <code>index?</code> returns1 when positioned there.</p>
</blockquote>
</aside>
<p>You could do something like that now with the PORT! datatype, though awkwardly. The <a href="../../could-strings-have-context/587/19.html">port actors return whatever you want them to</a>:</p>
<pre><code class="lang-nohighlight">my-sound: make port! [
    scheme: 'simple-sound
    [data1] [data2] [data3] ...
]

; in Rebol 3, the only requirement creating a port with a block
; is that it begin [scheme: 'scheme-name ...], can be followed
; by any data sequence accessible to INIT/actors via
; PORT/SPEC/REF

length-of my-sound
; == whatever your 'length-of actor returns

sound-suite/play my-sound
; can check: port? my-sound; my-sound/scheme = 'simple-sound
</code></pre>
<p>One of the reasons I think PORT! is misunderstood is that this type of usage isn't really 'port' in the traditional sense of an interface between systems, I'd suggest this falls under the <a href="http://rebol.info/rebolsteps.html#section-8">traditional conception of Rebol objects</a> which I think could be improved upon. Hence...</p>
<aside class="quote no-group" data-username="GiuseppeChillemi" data-post="1" data-topic="1899">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/g/838e76/40.png" class="avatar"> GiuseppeChillemi:</div>
<blockquote>
<p>If you have an internal action called "reposition" and "get-position" belonging to that datatype, Ren-C should look at the block if it carries an additional management object. If it contains "reposition" and "get-position" it should use this custom functions to override the standard ones for the datatype.</p>
</blockquote>
</aside>
<p>This sort of comports to the <a href="../../could-strings-have-context/587/18.html">Javascript object model</a> and is the intent behind my <a href="../../class-an-alternative-to-method/1440.html">Class proposal</a>. The efficiency in this model is that functions are not copied from the prototype to the kids, nor are default values—the kids only contain values where they deviate from the prototype. On further consideration, I would likely add verb actors to the Class model and possibly methods of handling iteration that it can be traversed by the *-EACH functions.</p>
<p><em>As an aside, Javascript objects (including arrays) are entirely built on associative arrays (MAP!) with string keys, there's no binding (the value of THIS within a function is determined by how it is called and can be overridden by .APPLY()/.CALL()). A path <code>myobject.thing</code> is shorthand for <code>myobject['thing']</code>, similarly <code>myarray[0]</code> is shorthand for <code>myarray['0']</code>; if <code>myobject</code> has no <code>'thing'</code> key, JS will keep looking up the prototype chain until it reaches <code>Object.prototype</code> (which is where, e.g. <code>apply/call</code> live) and will return <code>undefined</code> if it's not found. In this way it avoids Rebol OBJECT! needing every key in each kid, and <code>instanceof</code> gives you some assurance that your object value has the requisite set of method (there's no equivalent of this in Rebol objects, slight equivalent in Rebol ports—<code>value/scheme = 'myscheme</code>).</em></p>
        </div>

        <meta itemprop='headline' content='Sample Custom Datatype Idea: Sound'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='../../../u/GiuseppeChillemi.html'><span itemprop='name'>GiuseppeChillemi</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1899.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-07-24T22:21:49Z' class='post-time'>
                July 24, 2022, 10:21pm
              </time>
              <meta itemprop='dateModified' content='2022-07-24T22:21:49Z'>
          <span itemprop='position'>#3</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <p>Thanks for the ports description, It is interesting but not perfect. I don't see a way to override <code>:</code> and also I have to investigate in other operations.</p>
<p>The difference is that while actions <code>copy</code> dispatch to the datatype without paths, you need paths in ports or a premise like <code>insert port...</code></p>
<p>I have read tha LUA has something similar with Metatables and Metamethods but I have to go deep in it.</p>
        </div>

        <meta itemprop='headline' content='Sample Custom Datatype Idea: Sound'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="1" />
          </div>

      </div>
      <div itemscope itemtype='http://schema.org/DiscussionForumPosting' class='topic-body crawler-post'>
        <div class='crawler-post-meta'>
          <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
            <meta itemprop='name' content='AltRebol'>
              <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
                <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
              </div>
          </div>
          <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
            <a itemprop="url" href='https://forum.rebol.info/u/rgchris'><span itemprop='name'>rgchris</span></a>
            
          </span>

          <link itemprop="mainEntityOfPage" href="../1899.html">


          <span class="crawler-post-infos">
              <time itemprop='datePublished' datetime='2022-07-25T13:36:42Z' class='post-time'>
                July 25, 2022,  1:36pm
              </time>
              <meta itemprop='dateModified' content='2022-07-25T13:36:42Z'>
          <span itemprop='position'>#4</span>
          </span>
        </div>
        <div class='post' itemprop='articleBody'>
          <aside class="quote no-group" data-username="GiuseppeChillemi" data-post="3" data-topic="1899">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/g/838e76/40.png" class="avatar"> GiuseppeChillemi:</div>
<blockquote>
<p>Thanks for the ports description, It is interesting but not perfect. I don't see a way to override <code>:</code> and also I have to investigate in other operations.</p>
</blockquote>
</aside>
<p>There's two ways to initiate ports in Rebol/Ren-C currently—1) by URL/File datatypes and 2) by block <code>[scheme: 'thing ...dialect of your choice...]</code>. If by overriding <code>:</code> you mean something along the lines of KWATZ!, that'd be a huge language design decision.  <em>For now</em> ports are the closest thing you have to a custom datatype—I think there's <a href="../../class-an-alternative-to-method/1440.html">another way</a> but it needs to be fleshed out more as an approach.</p>
<aside class="quote no-group" data-username="GiuseppeChillemi" data-post="3" data-topic="1899">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/g/838e76/40.png" class="avatar"> GiuseppeChillemi:</div>
<blockquote>
<p>The difference is that while actions <code>copy</code> dispatch to the datatype without paths, you need paths in ports or a premise like <code>insert port...</code></p>
</blockquote>
</aside>
<p>I'm not quite sure what you mean by this—do you mean that going the port direction means your custom values don't have their own methods? If that's more important than being able to use the standard verbs (per your example, PICK, LENGTH, INSERT, REMOVE, etc.), wouldn't plain objects work better instead? With ports as-is, you get to define the meaning of these verbs, so if you say <code>insert mysound [...random data...]</code> you can throw an error if it doesn't conform to your specification.</p>
<aside class="quote no-group" data-username="GiuseppeChillemi" data-post="3" data-topic="1899">
<div class="title">
<div class="quote-controls"></div>
<img alt="" width="20" height="20" src="../../../letter_avatar_proxy/v4/letter/g/838e76/40.png" class="avatar"> GiuseppeChillemi:</div>
<blockquote>
<p>I have read tha LUA has something similar with Metatables and Metamethods but I have to go deep in it.</p>
</blockquote>
</aside>
<p>Would be curious how this compares to Javascript's approach...</p>
        </div>

        <meta itemprop='headline' content='Sample Custom Datatype Idea: Sound'>

        <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
           <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
           <meta itemprop="userInteractionCount" content="0" />
           <span class='post-likes'></span>
         </div>

         <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
            <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
            <meta itemprop="userInteractionCount" content="0" />
          </div>

      </div>






    </div>
    <footer class="container wrap">
      <nav class='crawler-nav'>
        <ul>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/' itemprop="url">Home </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/categories' itemprop="url">Categories </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/guidelines' itemprop="url">FAQ/Guidelines </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
        </ul>
      </nav>
      <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
    </footer>
    
    
  </body>
  
</html>
