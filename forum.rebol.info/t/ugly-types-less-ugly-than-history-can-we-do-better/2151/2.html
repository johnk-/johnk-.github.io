<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Ugly Types: Less Ugly Than History, Can We Do Better? - #2 by bradrn - Datatypes - AltRebol</title>
    <meta name="description" content="The Limited and Ambiguous Historical Idea
People are used to being able to do things like: 
 x: 10
 switch type? x [
     integer! [print &amp;quot;It&amp;#39;s an integer&amp;quot;]
     block! [print &amp;quot;It&amp;#39;s a block&amp;quot;]
 ]

 assert [parse [1 [seco&amp;hellip;">
    <meta name="generator" content="Discourse 3.4.0.beta3-dev - https://github.com/discourse/discourse version 93983286b54a0e96b8073abce23f4566e9f296f7">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" media="all" content="#ffffff">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="../../datatype-ugliness-less-ugly-than-history-but-can-we-do-better/2151.html" />

<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="AltRebol Search">

    <link href="https://forum.rebol.info/stylesheets/color_definitions_base__2_b36da8919caf93960d3b4470a90d0e79c6a110e2.css?__ws=forum.rebol.info" media="all" rel="stylesheet" class="light-scheme"/>

  <link href="https://forum.rebol.info/stylesheets/desktop_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="desktop"  />



  <link href="https://forum.rebol.info/stylesheets/chat_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="chat"  />
  <link href="https://forum.rebol.info/stylesheets/checklist_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="checklist"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-details_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-details"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-lazy-videos_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-local-dates_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-narrative-bot_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-presence_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-presence"  />
  <link href="https://forum.rebol.info/stylesheets/docker_manager_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="docker_manager"  />
  <link href="https://forum.rebol.info/stylesheets/footnote_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="footnote"  />
  <link href="https://forum.rebol.info/stylesheets/poll_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="poll"  />
  <link href="https://forum.rebol.info/stylesheets/spoiler-alert_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="spoiler-alert"  />
  <link href="https://forum.rebol.info/stylesheets/chat_desktop_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="chat_desktop"  />
  <link href="https://forum.rebol.info/stylesheets/poll_desktop_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="https://forum.rebol.info/stylesheets/desktop_theme_2_bac9ab3eace9fe3f17026a3c4dbf25e3e9e1e9a0.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2" data-theme-name="default"/>

    
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;Ugly Types: Less Ugly Than History, Can We Do Better?&#39;" href="../2151.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://forum.rebol.info/t/ugly-types-less-ugly-than-history-can-we-do-better/2151/2" />
<meta name="twitter:url" content="https://forum.rebol.info/t/ugly-types-less-ugly-than-history-can-we-do-better/2151/2" />
<meta property="og:title" content="Ugly Types: Less Ugly Than History, Can We Do Better?" />
<meta name="twitter:title" content="Ugly Types: Less Ugly Than History, Can We Do Better?" />
<meta property="og:description" content="From a Haskeller’s perspective, this is the obvious solution. &#39;a could be &amp;[quoted word], and spread [1 2 3] could be &amp;[isotope group] (or even &amp;[isotope group integer]), and so on. The elements of these series could simply be ordinary words, left unevaluated and unbound: one could test &#39;isotope = first type of spread [a b c], and so on.  But I’m not convinced a Haskell-like type system is a great fit for Rebol. The biggest issue is that we want to have union and intersection types, and there’s..." />
<meta name="twitter:description" content="From a Haskeller’s perspective, this is the obvious solution. &#39;a could be &amp;[quoted word], and spread [1 2 3] could be &amp;[isotope group] (or even &amp;[isotope group integer]), and so on. The elements of these series could simply be ordinary words, left unevaluated and unbound: one could test &#39;isotope = first type of spread [a b c], and so on.  But I’m not convinced a Haskell-like type system is a great fit for Rebol. The biggest issue is that we want to have union and intersection types, and there’s..." />
<meta property="og:article:section" content="Development" />
<meta property="og:article:section:color" content="25AAE2" />
<meta property="og:article:section" content="Datatypes" />
<meta property="og:article:section:color" content="25AAE2" />
<meta property="article:published_time" content="2024-02-17T02:20:41+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler ">
    
    <header>
  <a href="https://forum.rebol.info/">
    AltRebol
  </a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="../../datatype-ugliness-less-ugly-than-history-but-can-we-do-better/2151.html">Ugly Types: Less Ugly Than History, Can We Do Better?</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/development/datatypes/45" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/development/datatypes/45" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Datatypes</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  

    <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='Ugly Types: Less Ugly Than History, Can We Do Better?'>
      <link itemprop='url' href='../../datatype-ugliness-less-ugly-than-history-but-can-we-do-better/2151.html'>
      <meta itemprop='datePublished' content='2024-02-16T23:29:33Z'>
        <meta itemprop='articleSection' content='Datatypes'>
      <meta itemprop='keywords' content=''>
      <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
        <meta itemprop='name' content='AltRebol'>
          <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
            <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
          </div>
      </div>

          <span itemprop='author' itemscope itemtype="http://schema.org/Person">
            <meta itemprop='name' content='hostilefork'>
            <link itemprop='url' href='https://forum.rebol.info/u/hostilefork'>
          </span>
        <meta itemprop='text' content='The Limited and Ambiguous Historical Idea
People are used to being able to do things like: 
 x: 10
 switch type? x [
     integer! [print &amp;quot;It&amp;#39;s an integer&amp;quot;]
     block! [print &amp;quot;It&amp;#39;s a block&amp;quot;]
 ]

 assert [parse [1 [seco&amp;hellip;'>

          <div id='post_2' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.rebol.info/u/bradrn'><span itemprop='name'>bradrn</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2024-02-17T02:20:41Z' class='post-time'>
                    February 17, 2024,  2:20am
                  </time>
                  <meta itemprop='dateModified' content='2024-02-17T02:20:41Z'>
              <span itemprop='position'>2</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <aside class="quote no-group" data-username="hostilefork" data-post="1" data-topic="2151">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="../../../user_avatar/forum.rebol.info/hostilefork/48/421_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p>Or maybe TYPE can be parameterized:</p>
<pre data-code-wrap="plaintext"><code class="lang-plaintext"> &gt;&gt; type of matrix
 == &amp;[matrix 10x10]
</code></pre>
</blockquote>
</aside>
<p>From a Haskeller’s perspective, this is the obvious solution. <code>'a</code> could be <code>&amp;[quoted word]</code>, and <code>spread [1 2 3]</code> could be <code>&amp;[isotope group]</code> (or even <code>&amp;[isotope group integer]</code>), and so on. The elements of these series could simply be ordinary words, left unevaluated and unbound: one could test <code>'isotope = first type of spread [a b c]</code>, and so on.</p>
<p>But I’m not convinced a Haskell-like type system is a great fit for Rebol. The biggest issue is that we want to have union and intersection types, and there’s no easy way to integrate them into a system like this. One could possibly make it more ergonomic using type synonyms, but then you’d have to handle those as well when testing types, and it becomes more complicated than it should.</p>
<p>I much prefer your alternative suggestion of making constraint functions fundamental… but with some small changes. If <code>type of ''a</code> is <code>&amp;quoted?</code>, then I feel that <code>type of spread [a b]</code> should be <code>&amp;isotope?</code>. But then one could have other basic predicates too. I think it’s particularly important to have a set of types <code>&amp;any-word?</code>, <code>&amp;any-block?</code>, and so on, which would match ‘under’ isotopes and quotes (and other sigils). From these, it should be possible to create other types by combining the existing predicates: for instance, a splice would be a type which is both <code>&amp;isotope?</code> and <code>&amp;any-group?</code>.</p>
<p>This does leave me uncertain about precisely how those combinations should be accomplished. The best idea I can come up with is to allow constraints to take arguments, like so:</p>
<pre data-code-wrap="plaintext"><code class="lang-plaintext">&gt;&gt; splice!: &amp;all [&amp;isotope? &amp;any-group?]
== &amp;all [&amp;isotope? &amp;any-group?]

; or equivalently:
&gt;&gt; splice!: &amp;all [isotope! any-group!]
== &amp;all [&amp;isotope? &amp;any-group?]

&gt;&gt; match splice! spread [1 2 3]
== ~true~

&gt;&gt; match splice! [1 2 3]
== ~false~

; another demonstration, with more combinators:
&gt;&gt; series!: &amp;all [
     &amp;not isotope!
     &amp;any [any-block! any-group! any-path! any-tuple! string!]
   ]
== &amp;all [&amp;not &amp;isotope? &amp;any [&amp;any-block? &amp;any-group? &amp;any-path? &amp;any-tuple? &amp;any-string?]]

&gt;&gt; match series! "foobar"
== ~true~

&gt;&gt; match series! '[a b c]:
== ~true~

&gt;&gt; match series! spread [1 2 3]
== ~false~
</code></pre>
<p>I’m not sure how feasible this is to implement, though. As I recall, the key innovation which allowed constraints-as-types was implementing them as <a href="../../intrinsics-functions-without-frames/2050.html">intrinsics</a>. Is there some way of getting these combinators <code>&amp;all</code>/<code>&amp;any</code>/<code>&amp;not</code> to construct new intrinsics at runtime? I really don’t know. Possibly, these type constraints may need to have their own internal representations, different to that of ordinary Rebol functions.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="1" />
              <span class='post-likes'>1 Like</span>
            </div>

                <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../../dropping-the-any-xxx-from-some-type-constraints/2152/2.html">Dropping the ANY-XXX! from (Some) Type Constraints?</a>
                        <meta itemprop='position' content='2'>
                      </div>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../../raku-perl-6-type-system/2156.html">Raku (Perl 6) Type System</a>
                        <meta itemprop='position' content='3'>
                      </div>
                </div>
          </div>
    </div>

      <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
          <span itemprop='name'>
            <a itemprop="url" href="../../datatype-ugliness-less-ugly-than-history-but-can-we-do-better/2151.html#post_2">show post in topic</a>
          </span>
      </div>

    




    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forum.rebol.info/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forum.rebol.info/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forum.rebol.info/guidelines' itemprop="url">Guidelines </a>
        </span>
      </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    
  </body>
  
</html>
