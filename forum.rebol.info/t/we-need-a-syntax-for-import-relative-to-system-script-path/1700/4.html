<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>We Need A Syntax For &quot;IMPORT Relative To System.Script.Path&quot; - #4 by hostilefork - Modules - AltRebol</title>
    <meta name="description" content="I&amp;#39;m moving ahead with DO of a script (or running on the command line) not changing the current working directory.  It&amp;#39;s an important and overdue change. 
So if you run: 
/home/me$ r3 /usr/local/scripts/something.r ./foo.&amp;hellip;">
    <meta name="generator" content="Discourse 3.4.0.beta3-dev - https://github.com/discourse/discourse version 93983286b54a0e96b8073abce23f4566e9f296f7">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" media="all" content="#ffffff">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="../1700.html" />

<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="AltRebol Search">

    <link href="https://forum.rebol.info/stylesheets/color_definitions_base__2_b36da8919caf93960d3b4470a90d0e79c6a110e2.css?__ws=forum.rebol.info" media="all" rel="stylesheet" class="light-scheme"/>

  <link href="https://forum.rebol.info/stylesheets/desktop_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="desktop"  />



  <link href="https://forum.rebol.info/stylesheets/chat_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="chat"  />
  <link href="https://forum.rebol.info/stylesheets/checklist_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="checklist"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-details_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-details"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-lazy-videos_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-local-dates_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-narrative-bot_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-presence_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-presence"  />
  <link href="https://forum.rebol.info/stylesheets/docker_manager_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="docker_manager"  />
  <link href="https://forum.rebol.info/stylesheets/footnote_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="footnote"  />
  <link href="https://forum.rebol.info/stylesheets/poll_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="poll"  />
  <link href="https://forum.rebol.info/stylesheets/spoiler-alert_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="spoiler-alert"  />
  <link href="https://forum.rebol.info/stylesheets/chat_desktop_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="chat_desktop"  />
  <link href="https://forum.rebol.info/stylesheets/poll_desktop_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="https://forum.rebol.info/stylesheets/desktop_theme_2_bac9ab3eace9fe3f17026a3c4dbf25e3e9e1e9a0.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2" data-theme-name="default"/>

    
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;We Need A Syntax For &quot;IMPORT Relative To System.Script.Path&quot;&#39;" href="../1700.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://forum.rebol.info/t/we-need-a-syntax-for-import-relative-to-system-script-path/1700/4" />
<meta name="twitter:url" content="https://forum.rebol.info/t/we-need-a-syntax-for-import-relative-to-system-script-path/1700/4" />
<meta property="og:title" content="We Need A Syntax For &quot;IMPORT Relative To System.Script.Path&quot;" />
<meta name="twitter:title" content="We Need A Syntax For &quot;IMPORT Relative To System.Script.Path&quot;" />
<meta property="og:description" content="We&#39;ll need to find a way to get everything everyone wants to do in the syntax.  What makes this hard is that with the rule that DO must act as any branch would, then DO has so many meanings for types already.  :-/  It makes it tempting to get some other word in there.  Of course, there&#39;s LOAD.  do load @json do load &#39;json  That&#39;s fairly succinct.  And it could then mean that do @json and do &#39;json could have  different behavior more mechanically related to branches.  Earl said a long time ago th..." />
<meta name="twitter:description" content="We&#39;ll need to find a way to get everything everyone wants to do in the syntax.  What makes this hard is that with the rule that DO must act as any branch would, then DO has so many meanings for types already.  :-/  It makes it tempting to get some other word in there.  Of course, there&#39;s LOAD.  do load @json do load &#39;json  That&#39;s fairly succinct.  And it could then mean that do @json and do &#39;json could have  different behavior more mechanically related to branches.  Earl said a long time ago th..." />
<meta property="og:article:section" content="Development" />
<meta property="og:article:section:color" content="25AAE2" />
<meta property="og:article:section" content="Modules" />
<meta property="og:article:section:color" content="25AAE2" />
<meta property="article:published_time" content="2021-09-03T03:58:06+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler ">
    
    <header>
  <a href="https://forum.rebol.info/">
    AltRebol
  </a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="../1700.html">We Need A Syntax For &quot;IMPORT Relative To System.Script.Path&quot;</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/development/modules/21" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/development/modules/21" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Modules</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  

    <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='We Need A Syntax For &quot;IMPORT Relative To System.Script.Path&quot;'>
      <link itemprop='url' href='../1700.html'>
      <meta itemprop='datePublished' content='2021-09-02T18:55:35Z'>
        <meta itemprop='articleSection' content='Modules'>
      <meta itemprop='keywords' content=''>
      <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
        <meta itemprop='name' content='AltRebol'>
          <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
            <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
          </div>
      </div>

          <span itemprop='author' itemscope itemtype="http://schema.org/Person">
            <meta itemprop='name' content='hostilefork'>
            <link itemprop='url' href='https://forum.rebol.info/u/hostilefork'>
          </span>
        <meta itemprop='text' content='I&amp;#39;m moving ahead with DO of a script (or running on the command line) not changing the current working directory.  It&amp;#39;s an important and overdue change. 
So if you run: 
/home/me$ r3 /usr/local/scripts/something.r ./foo.&amp;hellip;'>

          <div id='post_4' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-09-03T03:58:06Z' class='post-time'>
                    September 3, 2021,  3:58am
                  </time>
                  <meta itemprop='dateModified' content='2021-09-03T04:09:56Z'>
              <span itemprop='position'>4</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <aside class="quote no-group" data-username="giuliolunati" data-post="3" data-topic="1700">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="../../../user_avatar/forum.rebol.info/giuliolunati/48/203_2.png" class="avatar"> giuliolunati:</div>
<blockquote>
<p>Currently <code>import 'my-mod</code> searches for %my-mod.reb in system/options/module-paths.</p>
</blockquote>
</aside>
<p>We'll need to find a way to get everything everyone wants to do in the syntax.  What makes this hard is that with the rule that DO must act as any branch would, then DO has so many meanings for types already.  :-/</p>
<p>It makes it tempting to get some other word in there.  Of course, there's LOAD.</p>
<pre><code>do load @json
do load 'json
</code></pre>
<p>That's fairly succinct.  And it could then mean that <strong><code>do @json</code></strong> and <strong>do 'json</strong> could have  different behavior more mechanically related to branches.</p>
<p>Earl said a long time ago that he thought DO was too overloaded.  I think he wanted the basic DO to just run BLOCK!s and to have all the other mechanics pulled out to something else.</p>
<p>It's a bit of a loss to not have the syntax of just <strong><code>do &lt;tool&gt;</code></strong>...and if we went full in on the idea then it would mean we'd lose <strong><code>do %file.r</code></strong> too.  <img src="../../../images/emoji/twitter/frowning.png%3Fv=12" title=":frowning:" class="emoji" alt=":frowning:" loading="lazy" width="20" height="20"></p>
<p>It could be another word, like <strong><code>run %file.r</code></strong> and <strong><code>run &lt;tool&gt;</code></strong>.  Maybe RUN could also be variadic, and take a number of args that the tool would take on the command line.</p>
<pre><code>$ r3 some-script.r arg1 arg2

&gt;&gt; run %some-script.r arg1 arg2
</code></pre>
<p>This could take the pressure off DO for its argument types, allowing it to 100% match how branches act, and always be running on already-LOAD-ed data.</p>
<p>Then RUN + LOAD + IMPORT could share a concept of how they interpret types to locate source.</p>
<p><img src="../../../images/emoji/twitter/question.png%3Fv=12" title=":question:" class="emoji only-emoji" alt=":question:" loading="lazy" width="20" height="20"></p>
<p>If this all aligns, then I don't yet have a strong opinion on:</p>
<pre><code>import 'local-module
import @json

import @local-module
import 'json
</code></pre>
<p>Either would work.  But there is also the bigger question of IMPORT syntax for when it has more options...that needs to be thought through.</p>
<pre><code>import [
    @json
    /version 1.2.1  ; syntax for fields, to save reserved-words?
    parse-json  ; just import a thing by name?
    jget: get-json  ; be able to rename an import?
]
</code></pre>
<p>I thought this looked kind of crappy and asked for instance if we might be able to "sniff" blocks variadically in the import statement:</p>
<pre><code>import @json [
    /version 1.2.1  ; syntax for fields, to save reserved-words?
    parse-json  ; just import a thing by name?
    jget: get-json  ; be able to rename an import?
]
</code></pre>
<p>And maybe even do more with sensing.  I feel like noticing SET-WORD! on the left to give a name to the import is sort of a non-negotiable thing:</p>
<pre><code>j: import @json
</code></pre>
<p>But it makes import a little harder for people to adapt import, the weirder and more "sensing" it gets.  It's probably worth it.</p>
<p><strong><a href="../../design-for-import/1570.html">Here's what I said about contrast with JavaScript import</a></strong></p>
<p>Lots of unanswered questions!  But, maybe this RUN idea can help untie our hands.  Or maybe it's backwards...and DO should remain the version for running files, and some other function is needed for evaluating values as branch-types...</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
    </div>

      <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
          <span itemprop='name'>
            <a itemprop="url" href="../1700.html#post_4">show post in topic</a>
          </span>
      </div>

    




    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forum.rebol.info/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forum.rebol.info/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forum.rebol.info/guidelines' itemprop="url">Guidelines </a>
        </span>
      </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    
  </body>
  
</html>
