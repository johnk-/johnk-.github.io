<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Representing Everything About A Parameter (...except its name) - #4 by hostilefork - Functions - AltRebol</title>
    <meta name="description" content="I&amp;#39;m aiming to draw out the string labels in parameter lists into their own more compact form, that&amp;#39;s just the pointer to the string name. 
We can think of splitting out the symbol as if decorations we currently put on th&amp;hellip;">
    <meta name="generator" content="Discourse 3.4.0.beta3-dev - https://github.com/discourse/discourse version 93983286b54a0e96b8073abce23f4566e9f296f7">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" media="all" content="#ffffff">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="../1459.html" />

<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="AltRebol Search">

    <link href="https://forum.rebol.info/stylesheets/color_definitions_base__2_b36da8919caf93960d3b4470a90d0e79c6a110e2.css?__ws=forum.rebol.info" media="all" rel="stylesheet" class="light-scheme"/>

  <link href="https://forum.rebol.info/stylesheets/desktop_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="desktop"  />



  <link href="https://forum.rebol.info/stylesheets/chat_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="chat"  />
  <link href="https://forum.rebol.info/stylesheets/checklist_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="checklist"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-details_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-details"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-lazy-videos_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-local-dates_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-narrative-bot_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-presence_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-presence"  />
  <link href="https://forum.rebol.info/stylesheets/docker_manager_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="docker_manager"  />
  <link href="https://forum.rebol.info/stylesheets/footnote_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="footnote"  />
  <link href="https://forum.rebol.info/stylesheets/poll_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="poll"  />
  <link href="https://forum.rebol.info/stylesheets/spoiler-alert_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="spoiler-alert"  />
  <link href="https://forum.rebol.info/stylesheets/chat_desktop_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="chat_desktop"  />
  <link href="https://forum.rebol.info/stylesheets/poll_desktop_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="https://forum.rebol.info/stylesheets/desktop_theme_2_bac9ab3eace9fe3f17026a3c4dbf25e3e9e1e9a0.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2" data-theme-name="default"/>

    
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;Representing Everything About A Parameter (...except its name)&#39;" href="../1459.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://forum.rebol.info/t/representing-everything-about-a-parameter-except-its-name/1459/4" />
<meta name="twitter:url" content="https://forum.rebol.info/t/representing-everything-about-a-parameter-except-its-name/1459/4" />
<meta property="og:title" content="Representing Everything About A Parameter (...except its name)" />
<meta name="twitter:title" content="Representing Everything About A Parameter (...except its name)" />
<meta property="og:description" content="First Step of Mission Accomplished: we can convert actions to frames and back without any allocations!  (Another good side-effect: object representations are now about 5/8 the size of how big they are in R3-Alpha....)  The frame you get has the names as the keys, with typesets as the values:  &gt;&gt; interface: as frame! :append  &gt;&gt; find interface/series integer! ; null   (because APPEND doesn&#39;t allow INTEGER! in its series argument)  &gt;&gt; find interface/series block! == #[true]  &gt;&gt; append-alias: as a..." />
<meta name="twitter:description" content="First Step of Mission Accomplished: we can convert actions to frames and back without any allocations!  (Another good side-effect: object representations are now about 5/8 the size of how big they are in R3-Alpha....)  The frame you get has the names as the keys, with typesets as the values:  &gt;&gt; interface: as frame! :append  &gt;&gt; find interface/series integer! ; null   (because APPEND doesn&#39;t allow INTEGER! in its series argument)  &gt;&gt; find interface/series block! == #[true]  &gt;&gt; append-alias: as a..." />
<meta property="og:article:section" content="Development" />
<meta property="og:article:section:color" content="25AAE2" />
<meta property="og:article:section" content="Functions" />
<meta property="og:article:section:color" content="25AAE2" />
<meta property="article:published_time" content="2021-01-12T00:03:20+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler ">
    
    <header>
  <a href="https://forum.rebol.info/">
    AltRebol
  </a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="../1459.html">Representing Everything About A Parameter (...except its name)</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/development/functions/59" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/development/functions/59" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Functions</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  

    <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='Representing Everything About A Parameter (...except its name)'>
      <link itemprop='url' href='../1459.html'>
      <meta itemprop='datePublished' content='2021-01-06T18:29:54Z'>
        <meta itemprop='articleSection' content='Functions'>
      <meta itemprop='keywords' content=''>
      <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
        <meta itemprop='name' content='AltRebol'>
          <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
            <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
          </div>
      </div>

          <span itemprop='author' itemscope itemtype="http://schema.org/Person">
            <meta itemprop='name' content='hostilefork'>
            <link itemprop='url' href='https://forum.rebol.info/u/hostilefork'>
          </span>
        <meta itemprop='text' content='I&amp;#39;m aiming to draw out the string labels in parameter lists into their own more compact form, that&amp;#39;s just the pointer to the string name. 
We can think of splitting out the symbol as if decorations we currently put on th&amp;hellip;'>

          <div id='post_4' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-01-12T00:03:20Z' class='post-time'>
                    January 12, 2021, 12:03am
                  </time>
                  <meta itemprop='dateModified' content='2021-01-12T00:08:54Z'>
              <span itemprop='position'>4</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <aside class="quote no-group" data-username="hostilefork" data-post="1" data-topic="1459">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="../../../user_avatar/forum.rebol.info/hostilefork/48/421_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p>I'm aiming to draw out the string labels in parameter lists into their own more compact form, that's just the pointer to the string name.</p>
</blockquote>
</aside>
<p><strong>First Step of Mission Accomplished: we can convert actions to frames and back without any allocations!</strong>  (Another good side-effect: object representations are now about 5/8 the size of how big they are in R3-Alpha....)</p>
<p>The frame you get has the names as the keys, with typesets as the values:</p>
<pre><code>&gt;&gt; interface: as frame! :append

&gt;&gt; find interface/series integer!
; null   (because APPEND doesn't allow INTEGER! in its series argument)

&gt;&gt; find interface/series block!
== #[true]

&gt;&gt; append-alias: as action! :interface
== #[action! [series value /part /only /dup /line]]

&gt;&gt; append-alias [a b c] 'd
== [a b c d]
</code></pre>
<p>Of course if you try to <em>look</em> at this frame, it will be hideous, because typesets are hideous.  Things like ANY-VALUE! mold out as every single type.</p>
<p>What you would <em>want</em> (and what HELP wants) is something that looks much more like what you typed at source level.  Plus, as this thread brings up, you want to be able to know more than just the types...you want to know if the parameter is quoted or not...if it's endable, if it's const, if it's a refinement, etc. etc.</p>
<h2><a name="p-4580-this-is-about-more-than-just-knowing-1" class="anchor" href="4.html#p-4580-this-is-about-more-than-just-knowing-1"></a>This is About More Than Just <em>Knowing</em>...</h2>
<p>Clearly it's useful to have a representation of an action, where the keys are parameter names and the values are parameter types/modes.</p>
<p>But besides just getting an <em>immutable</em> description of an action as a frame, we'd like to be able to get a <em>mutable</em> copy...tweak it, and make a new action!</p>
<p>So imagine:</p>
<pre><code>&gt;&gt; f: copy as frame! :append

&gt;&gt; f/value: make typeset! [integer!]

&gt;&gt; append-only-integers: as action! f
</code></pre>
<p>That is actually pretty close to working.  But we want to be able to change more than just the types accepted...we'd like to change the quoting convention, and whether something is a refinement or not.</p>
<p>As this thread's goal states: we need to find a way of packing all that information up into <em>a value</em>...the value that you get from this mapping in the context.</p>
<h2><a name="p-4580-big-picture-building-actions-from-scratch-2" class="anchor" href="4.html#p-4580-big-picture-building-actions-from-scratch-2"></a>Big Picture: Building Actions From Scratch</h2>
<p>This direction is all part of the vision laid out in <a href="../../seeing-all-action-s-as-variadic-frame-makers/1002.html">"Seeing All ACTION!s As Variadic FRAME!-makers"</a>, which was written almost exactly two years ago.</p>
<p>That was before things like AUGMENT existed.  But we can now see operations like AUGMENT as being something that comes from being able to append new fields to a copy of a frame, and then <strong>as action!</strong> on the bigger frame.</p>
<p>I wondered in the original post "where does the body go in the frame spec?"  <em>But I think the answer is now that it doesn't go anywhere... you just ADAPT code into the frame.</em></p>
<p>Plus, I think that you should be able to give frames to ADAPT...and when you do, that means the bound code will see the locals in the frame.</p>
<pre><code> foo: func [x [integer!] &lt;local&gt; y] [...]

 bar: adapt :foo [... this would bind to x, not y ...]

 f1: make frame :foo
 baz: adapt f1 [... again just see x, not y ...]

 f2: make frame! [x: [integer!] y: _]  ; or whatever notation for "local" is

 mumble: adapt f2 [... this would bind to x *and* y ...]
</code></pre>
<p>The concept here is that once you seal something up as an action, the locals are no longer part of the interface...so anyone building on top of it can't see them.  But when you're making an action from scratch, you can set up a frame with locals and adapt code into it that sees those locals.</p>
<p>So basically, when you first MAKE FRAME! on a BLOCK!, you get something that has no implementation.  If you were to DO it, it would error... because what the fields contain are parameter <em>descriptions</em> and not intended parameter values.  But then you'd ADAPT it to give it a body.</p>
<p><strong>This should make it so that writing your own FUNC-like generator, or your own SPECIALIZE or AUGMENT or other concept... will be very easy!</strong></p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="1" />
              <span class='post-likes'>1 Like</span>
            </div>

          </div>
    </div>

      <div role='navigation' itemscope itemtype='http://schema.org/SiteNavigationElement' class="topic-body crawler-post">
          <span itemprop='name'>
            <a itemprop="url" href="../1459.html#post_4">show post in topic</a>
          </span>
      </div>

    




    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forum.rebol.info/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forum.rebol.info/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forum.rebol.info/guidelines' itemprop="url">Guidelines </a>
        </span>
      </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    
  </body>
  
</html>
