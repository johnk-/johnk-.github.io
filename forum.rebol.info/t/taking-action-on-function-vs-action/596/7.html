<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Taking ACTION! on &quot;Function vs. Action&quot; - #7 by hostilefork - Naming - AltRebol</title>
    <meta name="description" content="The very noun-sounding FUNCTION is an active generator, whose word sounds like it should be the name for a variable holding a type of its value: 

block: [This is a block!]
string: {This is a string!}
function: :append ;&amp;hellip;">
    <meta name="generator" content="Discourse 3.1.0.beta4 - https://github.com/discourse/discourse version 25276f62f959eab4557049a655300a70835c5769">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" media="all" content="#ffffff">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="../596.html" />

<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="AltRebol Search">

    <link href="https://forum.rebol.info/stylesheets/color_definitions_base__2_caa66e77e807fc270e5b21d201643962219b6a9a.css?__ws=forum.rebol.info" media="all" rel="stylesheet" class="light-scheme"/>

  <link href="https://forum.rebol.info/stylesheets/desktop_97f5da14b02e14a864d77b6d983a33a1b302f894.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="desktop"  />



  <link href="https://forum.rebol.info/stylesheets/chat_97f5da14b02e14a864d77b6d983a33a1b302f894.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="chat"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-details_97f5da14b02e14a864d77b6d983a33a1b302f894.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-details"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-lazy-videos_97f5da14b02e14a864d77b6d983a33a1b302f894.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-local-dates_97f5da14b02e14a864d77b6d983a33a1b302f894.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-narrative-bot_97f5da14b02e14a864d77b6d983a33a1b302f894.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-presence_97f5da14b02e14a864d77b6d983a33a1b302f894.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-presence"  />
  <link href="https://forum.rebol.info/stylesheets/docker_manager_97f5da14b02e14a864d77b6d983a33a1b302f894.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="docker_manager"  />
  <link href="https://forum.rebol.info/stylesheets/poll_97f5da14b02e14a864d77b6d983a33a1b302f894.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="poll"  />
  <link href="https://forum.rebol.info/stylesheets/chat_desktop_97f5da14b02e14a864d77b6d983a33a1b302f894.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="chat_desktop"  />
  <link href="https://forum.rebol.info/stylesheets/poll_desktop_97f5da14b02e14a864d77b6d983a33a1b302f894.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="https://forum.rebol.info/stylesheets/desktop_theme_2_5e18a6fac02b6ab11e33445179f4a2961aadbfd8.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2" data-theme-name="default"/>

    
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;Taking ACTION! on &quot;Function vs. Action&quot;&#39;" href="../596.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://forum.rebol.info/t/taking-action-on-function-vs-action/596/7" />
<meta name="twitter:url" content="https://forum.rebol.info/t/taking-action-on-function-vs-action/596/7" />
<meta property="og:title" content="Taking ACTION! on &quot;Function vs. Action&quot;" />
<meta name="twitter:title" content="Taking ACTION! on &quot;Function vs. Action&quot;" />
<meta property="og:description" content="This may deserve the understatement of the year award!  ðŸ†  Nevertheless, after many hours of hacking around, I&#39;ve gotten it to sort of work!!   Overall Use Impressions Are Mostly Positive âž•  Behold:  &gt;&gt; f: make frame! :append == make frame! [     series: ~     value: ~     part: ~     dup: ~     line: ~ ]  &gt;&gt; f.value: 100  &gt;&gt; ap100: isotopic f  ; synonymous in this case with `runs f` == ~make frame! [     series: ~     value: 100     part: ~     dup: ~     line: ~ ]~  ; i..." />
<meta name="twitter:description" content="This may deserve the understatement of the year award!  ðŸ†  Nevertheless, after many hours of hacking around, I&#39;ve gotten it to sort of work!!   Overall Use Impressions Are Mostly Positive âž•  Behold:  &gt;&gt; f: make frame! :append == make frame! [     series: ~     value: ~     part: ~     dup: ~     line: ~ ]  &gt;&gt; f.value: 100  &gt;&gt; ap100: isotopic f  ; synonymous in this case with `runs f` == ~make frame! [     series: ~     value: 100     part: ~     dup: ~     line: ~ ]~  ; i..." />
<meta property="og:article:section" content="Development" />
<meta property="og:article:section:color" content="25AAE2" />
<meta property="og:article:section" content="Naming" />
<meta property="og:article:section:color" content="25AAE2" />
<meta property="article:published_time" content="2023-11-13T10:08:12+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler ">
    
    <header>
  <a href="https://forum.rebol.info/">
    AltRebol
  </a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="../596.html">Taking ACTION! on &quot;Function vs. Action&quot;</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/development/8" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/development/naming/32" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Naming</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  

    <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='Taking ACTION! on &quot;Function vs. Action&quot;'>
        <meta itemprop='articleSection' content='Naming'>
      <meta itemprop='keywords' content=''>
      <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
        <meta itemprop='name' content='AltRebol'>
          <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
            <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
          </div>
      </div>

          <div id='post_1'  class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="../596.html">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2018-04-26T07:03:49Z' class='post-time'>
                    April 26, 2018,  7:03am
                  </time>
                  <meta itemprop='dateModified' content='2018-04-26T10:56:39Z'>
              <span itemprop='position'>1</span>
              </span>
            </div>
            <div class='post' itemprop='articleBody'>
              <p>The very noun-sounding FUNCTION is an active generator, whose word sounds like it should be the name for a variable holding a type of its value:</p>
<pre><code>block: [This is a block!]
string: {This is a string!}
function: :append ;-- this is a FUNCTION!, but...
                  ;-- ...now I can't use FUNCTION to declare another!
</code></pre>
<p>Some have said users would have a better mental model of the generation process if it were MAKE FUNCTION! (or MAKE-FUNCTION, or FUNCTIONALIZE, or FUNCTIONIFY, or <code>[x [integer!]] =&gt; [x + 1]</code>), or ....</p>
<p>But plain old FUNCTION being a generator is rather entrenched, and there's problems with pretty much any suggestion for changing it.  While things like <code>=&gt;</code> are good for lambdas, that's not as readable as prefix for top level declarations.  The only one I could see liking would be <code>make function!</code> but that opens huge cans of worms.</p>
<p>What <em>could</em> change, easily, is the datatype name.  Because Ren-C made the important change known-up-to-now as "OneFunction", it freed up all the words for the old subclasses (NATIVE!, ACTION!, ROUTINE!, OP!).  So...</p>
<p><strong>What if the "OneFunction" FUNCTION! were just called ACTION! instead?</strong></p>
<p>I already approximate this with <code>action [function!]</code> on many parameters, just to avoid tripping over the name <code>function</code>, or using an ugly abbreviation like <code>f</code>, and <code>func</code> is taken too (so even <code>fun</code> feels sketchy).</p>
<p>One can argue that since FUNCTION! doesn't guarantee it acts like a "mathematical function" anyway, that the less-loaded term could be better.  It is more comprehensible, I think, to say <em>"FUNCTION is an ACTION!, whose purpose is to generate another ACTION!..."</em>  It's a shorter word.  It still has "tion" in it.  <img src="https://forum.rebol.info/images/emoji/twitter/slight_smile.png?v=7" title=":slight_smile:" class="emoji" alt=":slight_smile:"></p>
<p>Backwards compatibility wouldn't be that hard, as that's just <strong>function!: :action!</strong>.  To the casual user, the difference would be that all the native interfaces would call generic function parameters <code>action [action!]</code> (unless it were something like <code>comparator [action!]</code>)...and <code>type of</code> would visibly tell them they had an ACTION!.</p>
<p>Seeing an apply-able value come back as ACTION! would be no big shock to Rebol2 or Red users.  Their main confusion was probably before things like "hey, why did I say my argument could be a FUNCTION! but I can't pass APPEND to it..."   Now it would just be "well, everything is an action!".</p>
<p>It's not a huge change, and it's been on the table for a while now.  But no new information has come to light since the idea first appeared, around the time of OneFunction.  We know more or less everything we are going to know about this.</p>
<p><strong>What do people think?  Is saying Rebol runs ACTIONS in CONTEXTS good, or bad?</strong></p>
<p>The biggest area this probably affects is the interpreter source itself, where there's tons of references to <code>fun</code> or <code>VAL_FUNC</code> or <code>FUNC_NUM_PARAMS</code>.  I've held off on some updates to those, which fitting patterns of other types these days would look more like:</p>
<pre><code>REBCTX *ctx = VAL_CONTEXT(...); // full word used for main extractor
int n = CTX_NUM_VARS(ctx); // abbreviation used for sub-extractions

REBFUN *fun = VAL_FUNCTION(...); // ...so this should match up
int n = FUN_NUM_PARAMS(fun); // ...and so should this
</code></pre>
<p>FWIW: My main reluctance on this comes from feeling like the interpreter source wouldn't read as well:</p>
<pre><code>REBACT *act = VAL_ACTION(...);
int n = ACT_NUM_PARAMS(act);
</code></pre>
<p>Though historically, such things start seeming normal pretty quickly.  For instance: I thought CTX was too "ugly" an abbreviation compared to REBCON, but I now think it's "obviously better".</p>
<p>It would also help distinguish between C functions (CFUNC) and Rebol actions...which would add value.</p>
<p><strong>Or am I wrong, is there still some un-thought-of suggestion or issue to be discussed here?  Can we commit to a decision now, or not!?</strong></p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="0" />
              </div>

                <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../../text-vs-string/612.html">TEXT! vs. STRING!</a>
                        <meta itemprop='position' content='1'>
                      </div>
                </div>
          </div>
          <div id='post_2' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="../596.html">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2018-04-27T15:51:57Z' class='post-time'>
                    April 27, 2018,  3:51pm
                  </time>
                  <meta itemprop='dateModified' content='2018-04-27T15:51:57Z'>
              <span itemprop='position'>2</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>Note that Red/Rebol2/R3-Alpha say the following:</p>
<pre><code>&gt;&gt; function? :append
== false ;-- wait, what?!

&gt;&gt; type? :append
== action! ;-- er... that's not exactly... clarifying
</code></pre>
<p>Making <code>action?</code> work for all Rebol-invokable-things has the advantages I list.  Quick re-summary:</p>
<ul>
<li>Has existing precedent as a word used to describe invokable things.</li>
<li>Shorter name than FUNCTION!</li>
<li>Helps disambiguate in the interpreter source itself, that if a variable holds a "function" you're talking about C executable code, and if you're holding an "action" you're talking about Rebol executable code.</li>
<li>
<em>"Rebol: Actions in Contexts"</em> sounds differentiating...as opposed to <em>"Rebol: Functions in Objects"</em> which does not really command much attention.</li>
<li>Less loaded term than function, which has a more strict mathematical meaning, regarding consistency of same output for same inputs...no side effects...etc.</li>
</ul>
<p>And of course, the reason that motivated it all: you can call a variable <code>action</code> to hold an <code>action!</code> without destroying the ability to make new ones, the way making a variable <code>function</code> to hold a <code>function!</code> would.</p>
<p><strong>So I'm going to change "OneFunction" to be OneAction.  The list of PROs is long, there aren't many cons (considering that historically was <code>(function? :append) = false</code>, it can't be considered a "step backwards" in any way).  I've long known it's better than FUNCTION!, my only worry has been that some other idea or paradigm is even better, which has made me hold off.  But waiting longer has ceased to make sense.</strong></p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="1" />
              </div>

          </div>
          <div id='post_3' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="../596.html">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2022-09-15T23:30:38Z' class='post-time'>
                    September 15, 2022, 11:30pm
                  </time>
                  <meta itemprop='dateModified' content='2022-09-15T23:30:38Z'>
              <span itemprop='position'>3</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>After four years of relative peace in naming, there's a new issue...</p>
<p>Whatever we call the "thing-that-is-now-ACTION!", it will come in two forms...</p>
<p><strong>The non-quoted form will not execute without an apply.</strong>  Here is an example of a function whose parameter takes just a plain action!, and so you can run it.</p>
<pre><code> foo: func [act [action!]] [
     if action? act [
         print "This will work even though you didn't say :act"
    ]
    apply act ["one" #way 2 &lt;run&gt;]  ; again, no :act needed
    act/ ["another" #way 2 &lt;run&gt;]
 ]
</code></pre>
<p><strong>The isotopic form will run when referenced through a WORD!</strong>  As with history, you'll need to disarm it somehow or another to get at it:</p>
<pre><code>&gt;&gt; :append
== ~#[action! [series value /dup /part]]~  ; isotope

 &gt;&gt; ^append
 == ~#[action! series value /dup /part]]~

&gt;&gt; append [a b c] [d e]
== [a b c [d e]]
</code></pre>
<h2>How Might This Shuffle Naming?</h2>
<p>An isotopic group is called a "splice".</p>
<p>An isotopic block is called a "pack".</p>
<p>In the prototype implementation, I'm calling isotopic actions "activations".  But that's a little weird.</p>
<p>An alternate conception might be that the inert thing is a FUNCTION! and once it's isotopic it would be called an ACTION!.</p>
<p>Or we just call them "action isotopes".  Maybe that's fine, in the sense that there's not as much of a difference in semantics to convey as with packs and splices.</p>
<p>Thoughts?</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="2" />
              <span class='post-likes'>2 Likes</span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="1" />
              </div>

          </div>
          <div id='post_4' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.rebol.info/u/IngoHohmann'><span itemprop='name'>IngoHohmann</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="../596.html">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2022-09-16T14:28:07Z' class='post-time'>
                    September 16, 2022,  2:28pm
                  </time>
                  <meta itemprop='dateModified' content='2022-09-16T14:28:07Z'>
              <span itemprop='position'>4</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>function / action<br>
(inert) action / (active) action<br>
or action and action isotope are all fine with me.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="0" />
              </div>

          </div>
          <div id='post_5' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.rebol.info/u/gchiu'><span itemprop='name'>gchiu</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="../596.html">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2019-04-28T00:05:42Z' class='post-time'>
                    April 28, 2019, 12:05am
                  </time>
                  <meta itemprop='dateModified' content='2019-04-28T00:05:42Z'>
              <span itemprop='position'>5</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>routine! seems to be unused.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="1" />
              <span class='post-likes'>1 Like</span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="0" />
              </div>

                <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../../rethinking-auto-gathered-set-word-locals/1150/3.html">Rethinking Auto-Gathered SET-WORD! Locals</a>
                        <meta itemprop='position' content='1'>
                      </div>
                </div>
          </div>
          <div id='post_6' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="../596.html">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2023-11-12T00:42:08Z' class='post-time'>
                    November 12, 2023, 12:42am
                  </time>
                  <meta itemprop='dateModified' content='2023-11-14T01:35:40Z'>
              <span itemprop='position'>6</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <aside class="quote no-group quote-modified" data-username="hostilefork" data-post="3" data-topic="596">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/hostilefork/40/26_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p>Whatever we call the "thing-that-is-now-ACTION!", it will come in two forms...</p>
<p><em>The plain form will not execute without an apply.</em></p>
<p><em>The isotopic form will run when referenced through a WORD!</em></p>
</blockquote>
</aside>
<p>Something sort of clicked around in my head when I wondered...</p>
<h2>
<a name="what-if-actions-were-just-isotopic-frames-1" class="anchor" href="7.html#what-if-actions-were-just-isotopic-frames-1"></a>What if ACTION!s were just isotopic FRAME!s?</h2>
<p><img src="../../../images/emoji/twitter/exploding_head.png%3Fv=12" title=":exploding_head:" class="emoji only-emoji" alt=":exploding_head:" loading="lazy" width="20" height="20"></p>
<p>It looks... good.</p>
<pre><code>foo: function [frame [frame!]] [if true [run frame arg1 arg2]]

bar: function [action [action?]] [if true [action arg1 arg2]]

baz: function [frame [frame!]] [let action: runs frame, action arg1 arg2]
</code></pre>
<ul>
<li>
<p>It's clear that FRAME won't do anything when you reference it from a word</p>
</li>
<li>
<p>It's clear that ACTION will run when you reference it from a word</p>
</li>
<li>
<p>It leaves the word FUNCTION free (which over the ages has been determined non-negotiable as semantically meaning MAKE-FUNCTION)</p>
</li>
<li>
<p>Mutating between a frame and an action is easy and obvious</p>
</li>
</ul>
<h2>
<a name="can-it-work-2" class="anchor" href="7.html#can-it-work-2"></a>Can It Work?</h2>
<p>ACTION!s and FRAME!s actually line up very closely.  They each have as many slots as a function has parameters and locals.  But they use these slots differently.</p>
<p>ACTION!s hold type checking information in the slots for arguments, and the frames point to the actions they were made from to get this information.  This is because the FRAME! slots need to hold actual argument values.  When you DO a FRAME!, it follows the link it kept to its action to do the type checking.</p>
<p><em>Yet in some sense, this is an implementation detail.</em>  There's not really a reason why every frame couldn't have made its own copy of the parameter descriptions...and no reason why the original frame couldn't have empty argument slots.  You could just say that immutable frames "throw away" their argument slots...and copied frames inherit their parameter lists.</p>
<p>The differences could be glossed over by magic under the hood, retaining the current efficiency.  Basically the FRAME! datatype cell would just be able to hold the guts of what an ACTION! cell currently holds as a potential alternative to what it holds currently, and expose those guts as if it were an immutable frame.</p>
<h2>
<a name="usage-difference-3" class="anchor" href="7.html#usage-difference-3"></a>Usage Difference</h2>
<p>As currently designed, the system would have a bit of a chicken-and-egg problem... you need an ACTION! to make a FRAME!... e.g. <strong><code>make frame! :append</code></strong></p>
<p>But if APPEND was an isotopic frame, and the MAKE FRAME! in this case was just doing basically <strong><code>copy noquote :append</code></strong> ?</p>
<p>In such a world, you'd presumably want to PROTECT or CONST the frame behind APPEND, or you'd wind up with it being too easy to change functions:</p>
<pre><code>&gt;&gt; f: noquote :append
&gt;&gt; f.value: [d e]  ; is actually specializing APPEND!

&gt;&gt; block: [a b c]

&gt;&gt; append block [x y z]
== [x y z]

&gt;&gt; block
== [a b c [d e]]
</code></pre>
<p>But that's fixable with a trustworthy system of immutability (which Ren-C has).</p>
<p>A plain FRAME! that was found inline would have to execute a copy of itself, the way a plain action does today, so this wouldn't do what you likely expected:</p>
<pre><code>make object! compose [f: (frame)]  ; would execute the frame
</code></pre>
<p>This isn't exactly a dealbreaker, because it's par for the course:</p>
<pre><code>make object! compose [w: (word)]  ; would evaluate the word
</code></pre>
<p>So you'd have the usual tools available, same as for other types:</p>
<pre><code>make object! compose [f: '(frame)]
make object! compose [f: (quote frame)]

make object! compose [f: ^(frame)]
make object! compose [f: (meta frame)]
</code></pre>
<h2>
<a name="trying-this-would-raise-many-questions-4" class="anchor" href="7.html#trying-this-would-raise-many-questions-4"></a>Trying This Would Raise Many Questions</h2>
<p>It's a bizarre thing to do if the <em>only</em> reason is to sift out the naming for a word-inactive vs. word-active function invocation.  Though it does seem to solve it nicely: <em><strong>"ACTION!s are isotopic FRAME!s which DO (a COPY of) themselves if referenced via WORD!"</strong></em></p>
<p>But there are other advantages to reducing the total number of exposed types.</p>
<p>I can think of one advantage already...which is the PARSERs passed to combinators in UPARSE.  Today they are ACTION!s formed from specialized frames, to make them easy to call.  But I noticed that passing them as FRAME!s would be cheaper...as well as permit the choice to execute the frame directly without making a copy, if you were going to call it only once.</p>
<p>There's a disadvantage I can think of too... which is loss of flexibility for interpretation of field selection out of ACTION!s.  Under this model, <strong><code>append.value</code></strong> should be an unset value...as APPEND is an immutable "archetype" frame.  I'd hoped that the <strong>action.xxx</strong> space could be taken for special fields that were associated with the functions, things like <strong><code>append.help</code></strong> for example would be picking from an object associated with APPEND, as opposed to picking useless fields out of the unspecialized frame that APPEND represents.</p>
<p>(Of course, Ren-C has other tricks up its sleeve, and might be able to do this with something like <strong>append..help</strong> for instance.  Today this information is accessed through the peculiarly-named <strong>adjunct of</strong>)</p>
<p>Anyway, still just a thought.  But maybe a unifying thought that's good enough to see what came up trying to implement it.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="1" />
              <span class='post-likes'>1 Like</span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="1" />
              </div>

                <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../../2023-another-year-a-few-things-that-happened/2089.html">2023, Another Year :dash: A Few Things That Happened</a>
                        <meta itemprop='position' content='1'>
                      </div>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../../performance-implications-of-isotopic-frame-is-action/2083.html">Performance Implications of Isotopic-FRAME!-is-Action</a>
                        <meta itemprop='position' content='2'>
                      </div>
                </div>
          </div>
          <div id='post_7' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="../596.html">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2023-11-13T10:08:12Z' class='post-time'>
                    November 13, 2023, 10:08am
                  </time>
                  <meta itemprop='dateModified' content='2023-11-13T23:24:48Z'>
              <span itemprop='position'>7</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <aside class="quote no-group" data-username="hostilefork" data-post="6" data-topic="596">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/hostilefork/40/26_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p>Trying This Would Raise Many Questions</p>
</blockquote>
</aside>
<p>This may deserve the understatement of the year award!</p>
<p><img src="../../../images/emoji/twitter/trophy.png%3Fv=12" title=":trophy:" class="emoji only-emoji" alt=":trophy:" loading="lazy" width="20" height="20"></p>
<p>Nevertheless, after many hours of hacking around, I've gotten it to <em>sort of</em> work!!</p>
<h2>
<a name="overall-use-impressions-are-mostly-positive-heavy_plus_sign-1" class="anchor" href="7.html#overall-use-impressions-are-mostly-positive-heavy_plus_sign-1"></a>Overall Use Impressions Are Mostly Positive <img src="../../../images/emoji/twitter/heavy_plus_sign.png%3Fv=12" title=":heavy_plus_sign:" class="emoji" alt=":heavy_plus_sign:" loading="lazy" width="20" height="20">
</h2>
<p>Behold:</p>
<pre><code>&gt;&gt; f: make frame! :append
== make frame! [
    series: ~
    value: ~
    part: ~
    dup: ~
    line: ~
]

&gt;&gt; f.value: 100

&gt;&gt; ap100: isotopic f  ; synonymous in this case with `runs f`
== ~make frame! [
    series: ~
    value: 100
    part: ~
    dup: ~
    line: ~
]~  ; isotope

&gt;&gt; ap100 [a b c]
== [a b c 100]
</code></pre>
<p><em>That's extremely cool.</em>  Something to really like about it is how it demystifies aspects of how actions are manufactured, making it easier for people to write their own SPECIALIZE-like and APPLY-like tools in usermode...without relying on voodoo inside SPECIALIZE or APPLY natives!</p>
<p><em>Or so it would seem..</em> <strong>BUT</strong>... a bunch of broken cases draws attention to some of the "hidden" logic that makes specialization not so simple.</p>
<p>For instance: if you create functions like <strong>adp: :append/dup/part</strong>, then it loses the /DUP and /PART refinements and instead always takes them, having 4 normal parameters.  And if you said instead <strong>apd: :append/part/dup</strong> then APD would also take 4 normal parameters, but with the PART and DUP in a reversed order from ADP.  The mechanics which encode this aren't visible in the FRAME!... they're little chains of hidden state.  And if you MAKE FRAME! on ADP or APD, then set PART: or DUP: then those chains currently need to be fixed up to know that the fields are specialized out and should no longer be mentioned.</p>
<p>All that has historically been magically covered by SPECIALIZE, which was creating an opaque ACTION! where internally all the bookkeeping was handled for you.  If you are just poking values into a FRAME! and then off the cuff running it--expecting it to act partially specialized--then the current data structures can get out of sync and crash.</p>
<p><strong>It is clearly looking like a massive amount of work to rethink this.  But I believe the product of that rethinking would lead to more complete and coherent model of FRAME!, making it a more powerful user-exposed facility for building actions.</strong></p>
<p>So I think I'm sold on this.  That said, here's some more to say.</p>
<h2>
<a name="plain-frames-in-blocks-execute-2" class="anchor" href="7.html#plain-frames-in-blocks-execute-2"></a>Plain FRAME!s In BLOCK!s Execute</h2>
<p>This throws a bit of a curveball into how I'd historically segmented FRAME! and ACTION! in my mind...where if you COMPOSE a FRAME! into a block, that it is active:</p>
<pre><code>&gt;&gt; frame: make frame! :add

&gt;&gt; do compose [(frame) 10 20]
== 30
</code></pre>
<p>But if we didn't choose this semantic, then since you can't put isotopes themselves into blocks... all invocations of functions would have to be triggered by word references to isotopic frames.</p>
<p>e.g. if we left frames inert when encountered directly by the evaluator, you'd always need to go through words-pointing-at-isotopes like RUN or APPLY to get execution:</p>
<pre><code>&gt;&gt; do compose [(frame) 10 20]
== 20  ; let's imagine this falls out, last of three inert things

&gt;&gt; do compose [run (frame) 10 20]
== 30
</code></pre>
<p>But then this costs a WORD! lookup and an extra function call, which strikes me as unacceptable overhead to <em>require</em> in order to execute a function.  It's almost as bad as requiring a declaration.</p>
<pre><code>&gt;&gt; do compose [let act: ~(frame)~ act 10 20]  ; just added: quasicompose!
== 30
</code></pre>
<p>It could perhaps be done through some kind of terminal-slash semantic:</p>
<pre><code>&gt;&gt; do compose [(frame)/ 10 20]
== 30
</code></pre>
<p>But that's contentious with my terminal-slash APPLY semantics.  And since frames can't be put in paths directly, it would have to be put in a group in a terminal-slash path, so more cost and complexity added there.</p>
<p><strong>This is all a rehash of things I dealt with back when isotopic actions were first introduced</strong> <a href="../../should-everything-have-an-isotopic-form/1889/3.html">(...and you can read through the stumbling around of that era...)</a>.  I was a bit uncomfortable that the "inert" form of ACTION! would execute when encountered literally in block evaluation.  Sure, it was inert when fetched via word, but was very alive if you composed it in.</p>
<p>Eventually I decided that as long as the key behavior of being fetched via word being inert was met, the semantics when seen literally during a block evaluation didn't matter.  After all, WORD!s require a similar caution to be quoted.</p>
<p>This idea of FRAME! executing seems more unsettling, considering how frames have been inert like objects for so long.  But when you start thinking that FRAME! has <em>execution potential</em>... like GROUP! and WORD! and GET-BLOCK!, etc... then imagining it executing isn't as much of a stretch.  Especially under a new model where it's only an isotope away from running if fetched via word.</p>
<p>Incidentally, if you read the old isotope stumbling around thread, I did mention the idea of isotopic frames executing, July 2022:</p>
<blockquote>
<p><em>What if it's only isotopic ACTION!s that execute implicitly? And what if you can make an isotopic FRAME! that does the same?</em></p>
</blockquote>
<p><strong>How big of an issue this really is depends on how often people compose FRAME! into blocks and execute them when they <em>-DON'T-</em> intend to run them.</strong>  The main case to worry about is the MAKE OBJECT COMPOSE [...] scenario, but I've pointed out how you've got to fret over GROUP! and WORD! and PATH! and any other evaluator-active types.</p>
<p>I <em>think</em> it's acceptable to have FRAME! be another evaluator-active type.  And people who aren't used to it being anything else won't see it through the same lens I'm seeing it now.  Maybe they'll think "hey, it's one isotope away from being WORD!-active, why wouldn't it run?"</p>
<h2>
<a name="messy-molding-3" class="anchor" href="7.html#messy-molding-3"></a>MESSY MOLDING</h2>
<p>This isn't an entirely new problem, as historical Rebol always had a problem rendering functions.</p>
<p>But Ren-C had been molding ACTION!s compactly as just the cached name of the action (from the last SET-WORD! it was used with), along with a compact list of the parameters.  However, FRAME!s were molded like ordinary objects.</p>
<p>Now it's a bit of a quandary to decide how to do the rendering.  We could say that if the console is showing you an isotopic FRAME!, then it does a light rendering looking like a historical action... but if the frame is normal, then you get the fields.  Which is something I'm probably going to do shortly.  If QUASI-FRAME!s were given this treatment as well, most actions would appear compact.</p>
<p>Anyway, like I say, not particularly a new problem.  The limits of a text console really bite us here...maybe the web REPL can do better.</p>
<h2>
<a name="make-frame-action-of-binding-of-4" class="anchor" href="7.html#make-frame-action-of-binding-of-4"></a>MAKE FRAME! ACTION OF BINDING OF</h2>
<p>Consider this case of leveraging the linked relationship between an action and a frame:</p>
<pre><code>foo: func [x] [
   f: make frame! action of binding of 'return
   probe f
]
</code></pre>
<p>Now let's say you call it with <strong>foo 1020</strong>.  I would expect <strong>f.x</strong> to be unset, because what we effectively asked for was to <strong>make frame! :foo</strong></p>
<p>But if there was no such question as ACTION OF, and you instead wrote:</p>
<pre><code>foo: func [x] [
   f: make frame! binding of 'return
   probe f
]
</code></pre>
<p>This would mean MAKE FRAME! is taking a FRAME! as input, and in that input frame, X is 1020.</p>
<p>Is it clearly implied that all the variables should be zeroed out?</p>
<p>If this were the case, we'd expect the same from MAKE OBJECT! of an existing object...to get the fields and not the values:</p>
<pre><code> &gt;&gt; obj: make object! [x: 10 y: 20]

 &gt;&gt; obj2: make object! obj
 == make object! [
        x: ~
        y: ~
    ]
</code></pre>
<p>That's not how Red works...it seems to be a synonym for COPY OBJECT.  FWIW, neither Rebol2 nor R3-Alpha permit it.</p>
<h2>
<a name="debugger-queries-find-any-calls-to-action-x-on-stack-5" class="anchor" href="7.html#debugger-queries-find-any-calls-to-action-x-on-stack-5"></a>Debugger Queries: "Find Any Calls to Action X On Stack"</h2>
<p>There was an old feature in the now-very-defunct-debugger, which allowed you to look above you for stack levels that were "instances of a specific function".</p>
<p>This would be defeated by specialization.  So let's say you made a specialization of append that fixed the value at 5:</p>
<pre><code>ap5: specialize :append [value: 5]
</code></pre>
<p>Calls to this function would not match as calls to APPEND.  They're calls to ap5--and the fact that there's a relationship between AP5 and APPEND would be wiped out.</p>
<p>But now, it's sort of defeated in all cases... because there's not a concept of ACTION OF.</p>
<p>However, maybe this is something that can be worked through in a better way.  <em>A frame with fields filled in, turned into an isotope, is enough to be executable.</em>  So if you want to make a specialization now, you don't go through the opaque step of forming a new action.  The only time you create opaque levels is if you do something like an ENCLOSE or ADAPT.</p>
<p>So there could be something like an "action" in the sense of identity, that you could ask for the "outermost function generator in charge".  It would give the same answer for <strong>:append</strong> and <strong>:ap5</strong> in the new model.  It's kind of like an answer to BODY-OF.</p>
<h2>
<a name="hijack-semantics-6" class="anchor" href="7.html#hijack-semantics-6"></a>HIJACK Semantics</h2>
<p>HIJACK is one of those things in the system that really throws a wrench into just about everything.  The design is about as clean and clever as I think I can make it, but every time I meddle in the frame and action mechanics something related to HIJACK trips up.</p>
<p>Unfortunately we are now completely dependent on it working, as it's how things like the ReplPad hook into providing its own handling for PRINT and such.</p>
<p>In any case, the granularity for HIJACK was on ACTION!s... not FRAME!s.  So with the two unified into one umbrella idea of a FRAME!, we're only able to hijack "legacy-action-like" FRAME!s and not arbitrary "context-like" FRAME!s.  We can offer an operator to turn a context-like frame into a legacy action frame (you could just ADAPT it with an empty block and get one)...and you could then hijack the result of that.  But you can't specifically hijack the context-like FRAME!s.</p>
<p>It may be that this can be solved with some kind of magic, but I haven't wrapped my head around it, and there are a zillion other things to be solved first.  Suffice to say that the black art of hijacking just got a little darker.</p>
<h2>
<a name="this-is-the-tip-of-the-iceberg-but-7" class="anchor" href="7.html#this-is-the-tip-of-the-iceberg-but-7"></a>This Is The Tip Of The Iceberg, BUT...</h2>
<p>...I still think it's a winner.  Again... when I look at this, I feel satisfied... the annoyance of ACTION! vs. ACTIVATION! is all washed away:</p>
<pre><code>foo: function [frame [frame!]] [if true [run frame arg1 arg2]]

bar: function [action [action?]] [if true [action arg1 arg2]]

baz: function [frame [frame!]] [let action: runs frame, action arg1 arg2]
</code></pre>
<p>Conceptually, getting to a point where "ACTION" and FRAME! are seen as two sides of the same coin seems coherent: a frame needs to encompass everything you need to know about an action in suspended animation.  I may not be able to get that fully sorted right now, but it points a compass toward how to make decisions in the future.</p>
<p>But it's likely going to force some big internal name changes.  I'd been calling the stack levels internal to the system juggled by the stackless trampoline "Frames"...because whenever you extracted an object-like thing from a FRAME! you'd get it as a "Context".  But now, the design is necessitating a fusion of the guts of what was an "Action" with a "Context" to make a new abstraction...and it seems fated that this abstraction needs to be called a "Frame".</p>
<p>Right now, I'm reusing "Action" as the name of the fused entity...and saying that when it's "legacy-action-like" it's a "Phase", but when it's context like it's an "Exemplar".  But naming disconnects like this create a lot of problems.</p>
<p>So I'll likely rename the internal trampoline entities "Level", and give "Frame" to be what is held by FRAME! values.  There's actually some good arguments for why Level is different from what you'd think of as a traditional "stack frame".  I don't mind it, but it's just a lot of churn...(oh, why do we store source code in ASCII still?)</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="1" />
              <span class='post-likes'>1 Like</span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="0" />
              </div>

          </div>
    </div>






    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forum.rebol.info/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forum.rebol.info/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forum.rebol.info/guidelines' itemprop="url">FAQ/Guidelines </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forum.rebol.info/tos' itemprop="url">Terms of Service </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forum.rebol.info/privacy' itemprop="url">Privacy Policy </a>
        </span>
      </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    
  </body>
  
</html>
