<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>A Dream For Debugging: Generalized Accessors - Debugger - AltRebol</title>
    <meta name="description" content="You may be familiar in some languages with the ideas of &amp;quot;Getters&amp;quot; and &amp;quot;Setters&amp;quot; (more generally called &amp;quot;Accessors&amp;quot;).  These features make it so that when you do what looks like normal field access, you&amp;#39;re actually runnin&amp;hellip;">
    <meta name="generator" content="Discourse 3.4.0.beta3-dev - https://github.com/discourse/discourse version 93983286b54a0e96b8073abce23f4566e9f296f7">
<link rel="icon" type="image/png" href="../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" media="all" content="#ffffff">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="2259.html" />

<link rel="search" type="application/opensearchdescription+xml" href="../../opensearch.xml" title="AltRebol Search">

    <link href="https://forum.rebol.info/stylesheets/color_definitions_base__2_b36da8919caf93960d3b4470a90d0e79c6a110e2.css?__ws=forum.rebol.info" media="all" rel="stylesheet" class="light-scheme"/>

  <link href="https://forum.rebol.info/stylesheets/desktop_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="desktop"  />



  <link href="https://forum.rebol.info/stylesheets/chat_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="chat"  />
  <link href="https://forum.rebol.info/stylesheets/checklist_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="checklist"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-details_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-details"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-lazy-videos_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-local-dates_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-narrative-bot_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-presence_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-presence"  />
  <link href="https://forum.rebol.info/stylesheets/docker_manager_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="docker_manager"  />
  <link href="https://forum.rebol.info/stylesheets/footnote_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="footnote"  />
  <link href="https://forum.rebol.info/stylesheets/poll_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="poll"  />
  <link href="https://forum.rebol.info/stylesheets/spoiler-alert_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="spoiler-alert"  />
  <link href="https://forum.rebol.info/stylesheets/chat_desktop_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="chat_desktop"  />
  <link href="https://forum.rebol.info/stylesheets/poll_desktop_eb475c67ca07665cb858ddf2ea6c953c2e3e2b85.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="https://forum.rebol.info/stylesheets/desktop_theme_2_bac9ab3eace9fe3f17026a3c4dbf25e3e9e1e9a0.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2" data-theme-name="default"/>

    
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;A Dream For Debugging: Generalized Accessors&#39;" href="2259.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://forum.rebol.info/t/a-dream-for-debugging-generalized-accessors/2259" />
<meta name="twitter:url" content="https://forum.rebol.info/t/a-dream-for-debugging-generalized-accessors/2259" />
<meta property="og:title" content="A Dream For Debugging: Generalized Accessors" />
<meta name="twitter:title" content="A Dream For Debugging: Generalized Accessors" />
<meta property="og:description" content="You may be familiar in some languages with the ideas of &quot;Getters&quot; and &quot;Setters&quot; (more generally called &quot;Accessors&quot;).  These features make it so that when you do what looks like normal field access, you&#39;re actually running code to do the fetches and assignments.  A Rebol version of this idea might look a bit like:  obj: make object! [     writable-private: 1020     readable-private: [some block]      writable: accessor func [^:value [integer!]] [  ; new :refinement         if not value [  ; it&#39;s ..." />
<meta name="twitter:description" content="You may be familiar in some languages with the ideas of &quot;Getters&quot; and &quot;Setters&quot; (more generally called &quot;Accessors&quot;).  These features make it so that when you do what looks like normal field access, you&#39;re actually running code to do the fetches and assignments.  A Rebol version of this idea might look a bit like:  obj: make object! [     writable-private: 1020     readable-private: [some block]      writable: accessor func [^:value [integer!]] [  ; new :refinement         if not value [  ; it&#39;s ..." />
<meta property="og:article:section" content="Development" />
<meta property="og:article:section:color" content="25AAE2" />
<meta property="og:article:section" content="Debugger" />
<meta property="og:article:section:color" content="25AAE2" />
<meta name="twitter:label1" value="Reading time" />
<meta name="twitter:data1" value="1 mins ðŸ•‘" />
<meta name="twitter:label2" value="Likes" />
<meta name="twitter:data2" value="2 â¤" />
<meta property="article:published_time" content="2024-09-08T00:02:56+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler ">
    
    <header>
  <a href="https://forum.rebol.info/">
    AltRebol
  </a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="2259.html">A Dream For Debugging: Generalized Accessors</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/development/debugger/34" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Development</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/development/debugger/34" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #25AAE2'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Debugger</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  

    <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='A Dream For Debugging: Generalized Accessors'>
      <link itemprop='url' href='2259.html'>
      <meta itemprop='datePublished' content='2024-09-08T00:02:56Z'>
        <meta itemprop='articleSection' content='Debugger'>
      <meta itemprop='keywords' content=''>
      <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
        <meta itemprop='name' content='AltRebol'>
          <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
            <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
          </div>
      </div>


          <div id='post_1'  class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>

                <link itemprop="mainEntityOfPage" href="2259.html">


              <span class="crawler-post-infos">
                  <time  datetime='2024-09-08T00:02:56Z' class='post-time'>
                    September 8, 2024, 12:02am
                  </time>
                  <meta itemprop='dateModified' content='2024-09-08T08:34:36Z'>
              <span itemprop='position'>1</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>You may be familiar in some languages with the ideas of "Getters" and "Setters" (more generally called <a href="https://en.wikipedia.org/wiki/Mutator_method">"Accessors"</a>).  These features make it so that when you do what looks like normal field access, you're actually running code to do the fetches and assignments.</p>
<p>A Rebol version of this idea might look a bit like:</p>
<pre><code>obj: make object! [
    writable-private: 1020
    readable-private: [some block]

    writable: accessor func [^:value [integer!]] [  ; new :refinement
        if not value [  ; it's a get (meta protocol discerns from set to null)
            print "getting writable!"
            return .writable-private
        ]
        else [  ; it's a set
            print "setting writable!"
            return .writable-private: unmeta value
        ]
    ]

    readable: accessor does [  ; not taking ^:value means read only
        print "getting readable"
        .readable-private.  ; (terminal dot means "any value, including actions")
    ]
]

&gt;&gt; obj.writable
getting writable!
== 1020

&gt;&gt; obj.writable: 304
setting writable!
== 304

&gt;&gt; obj.readable
getting readable!
== [some block]

&gt;&gt; obj.readable: [some other block]
** Error: Cannot assign obj.readable (read only)
</code></pre>
<p>The sky is the limit for how useful this can be.  You already see that it can be used to implement typechecking.  But really anything else...</p>
<h2><a name="p-7593-debugging-is-clearly-a-place-this-can-help-a-lot-1" class="anchor" href="2259.html#p-7593-debugging-is-clearly-a-place-this-can-help-a-lot-1"></a>Debugging is clearly a place this can help a lot</h2>
<p>You can intercept reads, and you can intercept writes even of particular values...</p>
<p>While I am still designing to facilitate stepwise debugging correctly, this is actually <em>better</em> than stepwise debugging for solving many kinds of problems.  It gives you a completely generic hook.</p>
<h2><a name="p-7593-leagues-better-than-reds-on-changehttpswwwred-langorg201412050-objects-supporthtml-2" class="anchor" href="2259.html#p-7593-leagues-better-than-reds-on-changehttpswwwred-langorg201412050-objects-supporthtml-2"></a>Leagues Better Than <a href="https://www.red-lang.org/2014/12/050-objects-support.html">Red's ON-CHANGE*</a></h2>
<p>The writable checks are a more granular interface to what Red provides as ON-CHANGE*.  Red's idea is that's something you put in your object which is a function that gets the name of a member that's changing.  You'd have to put in a SWITCH statement on the name, and notice when it's the field you're interested in.  It's clumsy, doesn't help you when variables are being read vs. written, and blesses a name of a method in your object.</p>
<p>But also...</p>
<h2><a name="p-7593-generalized-accessors-means-no-object-is-required-3" class="anchor" href="2259.html#p-7593-generalized-accessors-means-no-object-is-required-3"></a><em>Generalized</em> Accessors means <em>NO OBJECT IS REQUIRED!</em></h2>
<p>The way I'm looking at implementing this, <strong>you can do it to <em>any</em> variable</strong>.</p>
<pre><code>&gt;&gt; foo: accessor func [&lt;static&gt; value (100) [print "Plain old foo!", value]]

&gt;&gt; foo
Plain old foo!
== 100
</code></pre>
<p><img src="../../images/emoji/twitter/heart_eyes.png%3Fv=12" title=":heart_eyes:" class="emoji only-emoji" alt=":heart_eyes:" loading="lazy" width="20" height="20"></p>
<p><em>"You want it.</em><br>
<em>You need it.</em><br>
<em>You've got to got to have it!"</em></p>
<p>(Though for reasons of implementation sanity, this will not be allowed on variables in the LIB context, where the system relies too heavily on the native definitions being literal.)</p>
<h2><a name="p-7593-not-finished-yetbut-proof-of-concept-is-working-4" class="anchor" href="2259.html#p-7593-not-finished-yetbut-proof-of-concept-is-working-4"></a>Not Finished Yet...But Proof-Of-Concept Is Working</h2>
<p>Carl wanted them, <a href="http://www.rebol.net/r3blogs/0019.html">but acknowledged the difficulty</a>:</p>
<blockquote>
<p>I should mention, however, it's not that easy to add set-functions. If it were really easy, we'd have them. The problem is that set-functions add another branch to the tree of REBOL language semantics. For example, how are set functions defined and how reflective are they?</p>
</blockquote>
<p>But if anything, he's underestimating the difficulty of adding them to the codebase as he had it.  If you know anything about the implementation, you should ask <em>"how can you put an action in a cell and not screw up by having some part of the code think the action is the variable itself...not an action to call to get the variable?"</em></p>
<p>The answer is that the flag which is put on the cell systemically inhibits it from being read or written by "normal" functions.  Assertions will be triggered if the wrong level of abstraction tries to handle it.  R3-Alpha would have had to be completely overhauled for such checks. But that part doesn't have to be added to Ren-C because it was built in long ago (to make things like CONST not have holes in it).</p>
<p>Anyway, it will take a while.  But the method looks like it will have means to perform well enough to be the answer to typechecking on reads and writes where needed...which is something I think we do need for the language to be modern enough to be applied seriously.  (All languages seem to evolve into typed versions when they hit problems at scale, e.g. JavaScript =&gt; TypeScript)</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="2" />
              <span class='post-likes'>2 Likes</span>
            </div>

                <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../syntax-for-typechecked-values/2260.html">Syntax for Typechecked Values</a>
                        <meta itemprop='position' content='4'>
                      </div>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../show-the-love-for-shove/1039/8.html">Show the Love for SHOVE</a>
                        <meta itemprop='position' content='5'>
                      </div>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../big-alien-proposal-word-runs-functions/1905/33.html">Big Alien Proposal :flying_saucer: &quot;/WORD&quot; Runs Functions</a>
                        <meta itemprop='position' content='6'>
                      </div>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../the-return-of-alias/2129/2.html">The Return of ALIAS?</a>
                        <meta itemprop='position' content='7'>
                      </div>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../set-word-to-initialize-locals-in-function-specs/2210/2.html">SET-WORD! To Initialize Locals In Function Specs?</a>
                        <meta itemprop='position' content='8'>
                      </div>
                </div>
          </div>
          <div id='post_2' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>



              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2024-09-08T08:32:58Z' class='post-time'>
                    September 8, 2024,  8:32am
                  </time>
                  <meta itemprop='dateModified' content='2024-09-08T08:32:58Z'>
              <span itemprop='position'>2</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <aside class="quote no-group quote-modified" data-username="hostilefork" data-post="1" data-topic="2259">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="24" height="24" src="../../user_avatar/forum.rebol.info/hostilefork/48/421_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<pre><code>writable: accessor func [^:value [integer!]] [...]
</code></pre>
</blockquote>
</aside>
<p>So it occurs to me that this is a case where you don't accept NULL assignments--only integer ones--and hence there's no conflation of NULL for being a GET vs. a null SET...</p>
<p>...if we made a general policy that refinements would not accept NULL unless they were ^META, then we could allow cases like this to be non-meta.</p>
<pre><code>writable: accessor func [:value [integer!]] [...]
</code></pre>
<p>The error on trying to pass a null to the refinement could come from the function machinery itself.  Then, the accessor would simply notice the parameter convention on <strong>:value</strong> and pass it ^META on an as-needed basis.</p>
<p>What I mean to say is--that even if your typeset included NULL (e.g. ANY-VALUE?)--that it would be an error... just as it's an error to be passed an action isotope if you don't have a slash.</p>
<p>I don't know how many accessors would be type constrained to exclude null.  But quite possibly a sizable number of them would.  So this could make peoples' lives easier...</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

          </div>
    </div>


    




    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forum.rebol.info/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forum.rebol.info/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forum.rebol.info/guidelines' itemprop="url">Guidelines </a>
        </span>
      </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/tos' itemprop="url">Terms of Service </a>
          </span>
        </li>
        <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
          <span itemprop='name'>
            <a href='https://forum.rebol.info/privacy' itemprop="url">Privacy Policy </a>
          </span>
        </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    
  </body>
  
</html>
