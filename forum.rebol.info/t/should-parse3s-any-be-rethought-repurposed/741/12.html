<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Reconciling PARSE&#39;s ANY with Ordinary ANY - #12 by hostilefork - Parsing - AltRebol</title>
    <meta name="description" content="Historical Rebol PARSE&amp;#39;s ANY means &amp;quot;match this rule any number of times, including 0 times&amp;quot;.  So it&amp;#39;s effectively an iterative construct. 
In the past I&amp;#39;ve griped about the use of the word.  If PARSE were a fruit stand t&amp;hellip;">
    <meta name="generator" content="Discourse 3.1.0.beta4 - https://github.com/discourse/discourse version 25276f62f959eab4557049a655300a70835c5769">
<link rel="icon" type="image/png" href="../../../uploads/default/optimized/1X/cbd70027b53fa165575e5b665f00eb3b8ae7ea31_2_32x32.ico">
<link rel="apple-touch-icon" type="image/png" href="../../../uploads/default/optimized/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d_2_180x180.png">
<meta name="theme-color" media="all" content="#ffffff">

<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, user-scalable=yes, viewport-fit=cover">
<link rel="canonical" href="../../any-vs-parses-any-can-we-have-consistency/741.html" />

<link rel="search" type="application/opensearchdescription+xml" href="../../../opensearch.xml" title="AltRebol Search">

    <link href="https://forum.rebol.info/stylesheets/color_definitions_base__2_caa66e77e807fc270e5b21d201643962219b6a9a.css?__ws=forum.rebol.info" media="all" rel="stylesheet" class="light-scheme"/>

  <link href="https://forum.rebol.info/stylesheets/desktop_97f5da14b02e14a864d77b6d983a33a1b302f894.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="desktop"  />



  <link href="https://forum.rebol.info/stylesheets/chat_97f5da14b02e14a864d77b6d983a33a1b302f894.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="chat"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-details_97f5da14b02e14a864d77b6d983a33a1b302f894.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-details"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-lazy-videos_97f5da14b02e14a864d77b6d983a33a1b302f894.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-lazy-videos"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-local-dates_97f5da14b02e14a864d77b6d983a33a1b302f894.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-local-dates"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-narrative-bot_97f5da14b02e14a864d77b6d983a33a1b302f894.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-narrative-bot"  />
  <link href="https://forum.rebol.info/stylesheets/discourse-presence_97f5da14b02e14a864d77b6d983a33a1b302f894.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="discourse-presence"  />
  <link href="https://forum.rebol.info/stylesheets/docker_manager_97f5da14b02e14a864d77b6d983a33a1b302f894.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="docker_manager"  />
  <link href="https://forum.rebol.info/stylesheets/poll_97f5da14b02e14a864d77b6d983a33a1b302f894.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="poll"  />
  <link href="https://forum.rebol.info/stylesheets/chat_desktop_97f5da14b02e14a864d77b6d983a33a1b302f894.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="chat_desktop"  />
  <link href="https://forum.rebol.info/stylesheets/poll_desktop_97f5da14b02e14a864d77b6d983a33a1b302f894.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="poll_desktop"  />

  <link href="https://forum.rebol.info/stylesheets/desktop_theme_2_5e18a6fac02b6ab11e33445179f4a2961aadbfd8.css?__ws=forum.rebol.info" media="all" rel="stylesheet" data-target="desktop_theme" data-theme-id="2" data-theme-name="default"/>

    
    
        <link rel="alternate nofollow" type="application/rss+xml" title="RSS feed of &#39;Reconciling PARSE&#39;s ANY with Ordinary ANY&#39;" href="../../reconciling-parses-any-with-ordinary-any/741.rss" />
    <meta property="og:site_name" content="AltRebol" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta name="twitter:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:image" content="https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png" />
<meta property="og:url" content="https://forum.rebol.info/t/reconciling-parses-any-with-ordinary-any/741/12" />
<meta name="twitter:url" content="https://forum.rebol.info/t/reconciling-parses-any-with-ordinary-any/741/12" />
<meta property="og:title" content="Reconciling PARSE&#39;s ANY with Ordinary ANY" />
<meta name="twitter:title" content="Reconciling PARSE&#39;s ANY with Ordinary ANY" />
<meta property="og:description" content="A post was merged into an existing topic: The Cool New Repurposing of WHILE in PARSE" />
<meta name="twitter:description" content="A post was merged into an existing topic: The Cool New Repurposing of WHILE in PARSE" />
<meta property="og:article:section" content="Domains" />
<meta property="og:article:section:color" content="F1592A" />
<meta property="og:article:section" content="Parsing" />
<meta property="og:article:section:color" content="F1592A" />
<meta property="article:published_time" content="2023-07-26T15:40:30+00:00" />
<meta property="og:ignore_canonical" content="true" />


    
  </head>
  <body class="crawler ">
    
    <header>
  <a href="https://forum.rebol.info/">
    AltRebol
  </a>
</header>

    <div id="main-outlet" class="wrap" role="main">
        <div id="topic-title">
    <h1>
      <a href="../../any-vs-parses-any-can-we-have-consistency/741.html">Reconciling PARSE&#39;s ANY with Ordinary ANY</a>
    </h1>

      <div class="topic-category" itemscope itemtype="http://schema.org/BreadcrumbList">
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/domains/15" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #F1592A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Domains</span>
              </span>
            </a>
            <meta itemprop="position" content="1" />
          </span>
          <span itemprop="itemListElement" itemscope itemtype="http://schema.org/ListItem">
            <a href="https://forum.rebol.info/c/domains/parsing/16" class="badge-wrapper bullet" itemprop="item">
              <span class='badge-category-bg' style='background-color: #F1592A'></span>
              <span class='badge-category clear-badge'>
                <span class='category-name' itemprop='name'>Parsing</span>
              </span>
            </a>
            <meta itemprop="position" content="2" />
          </span>
      </div>

  </div>

  

    <div itemscope itemtype='http://schema.org/DiscussionForumPosting'>
      <meta itemprop='headline' content='Reconciling PARSE&#39;s ANY with Ordinary ANY'>
        <meta itemprop='articleSection' content='Parsing'>
      <meta itemprop='keywords' content=''>
      <div itemprop='publisher' itemscope itemtype="http://schema.org/Organization">
        <meta itemprop='name' content='AltRebol'>
          <div itemprop='logo' itemscope itemtype="http://schema.org/ImageObject">
            <meta itemprop='url' content='https://forum.rebol.info/uploads/default/original/1X/ae4ccad1a2789bb1e85cf5a0f52f2f1de10da26d.png'>
          </div>
      </div>

          <div id='post_1'  class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="../../any-vs-parses-any-can-we-have-consistency/741.html">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2018-07-15T18:35:24Z' class='post-time'>
                    July 15, 2018,  6:35pm
                  </time>
                  <meta itemprop='dateModified' content='2023-07-26T15:42:03Z'>
              <span itemprop='position'>1</span>
              </span>
            </div>
            <div class='post' itemprop='articleBody'>
              <p>Historical Rebol PARSE's ANY means "match this rule any number of times, including 0 times".  So it's effectively an iterative construct.</p>
<p>In the past I've griped about the use of the word.  If PARSE were a fruit stand the conversation might go like:</p>
<blockquote>
<p><strong>me:</strong> "Do you have any apples?"<br>
<strong>parse:</strong> "Yes."<br>
<strong>me:</strong> "Can I buy an apple?"<br>
<strong>parse:</strong> "No."<br>
<strong>me:</strong> "I'm <a href="https://www.youtube.com/watch?v=i3HokGUffcU">not @gchiu</a>...so why not?"<br>
<strong>parse:</strong> "Because I have zero apples."<br>
<strong>me:</strong> "Why didn't you didn't tell me you didn't have any?"<br>
<strong>parse:</strong> "Because I do.  I just don't have <em>some</em>."</p>
</blockquote>
<p>What bothered me was how much in direct contradiction with ANY's use in the regular language this was:</p>
<pre><code>if any [
    1 &gt; 2
    3 &gt; 4
][
    print "if 0 matching conditions was 'any', this would run"
]
</code></pre>
<p>Add to that the fact that ANY isn't iterative, it just means "pick the first thing that matches from this set", and the semantics feel quite inconsistent.</p>
<h2>
<a name="freeing-up-any-would-allow-a-more-fitting-use-1" class="anchor" href="12.html#freeing-up-any-would-allow-a-more-fitting-use-1"></a>Freeing Up ANY Would Allow A More Fitting Use</h2>
<p>The true parallel application of ANY in UPARSE would be to pick the first matching parse rule out of a list.  e.g. these would be equivalent:</p>
<pre><code> parse "abcbca" [some [any ["a" "bc"]]]

 parse "abcbca" [some ["a" | "bc"]]
</code></pre>
<p><a class="mention" href="https://forum.rebol.info/u/blackattr">@BlackATTR</a> points out that this might make it easier when generating alternate rules, since you wouldn't have to worry about sticking in the <code>|</code> during generation.  It's a pain to worry about putting (N - 1) vertical bars between (N) items to match from a set... but this way lists of items to match from could just be used as-is.</p>
<p><strong>(UPDATE: <a href="../../the-cool-new-repurposing-of-while-in-parse/1875.html">This has been implemented, and is very slick!</a>)</strong></p>
<h2>
<a name="are-there-better-words-2" class="anchor" href="12.html#are-there-better-words-2"></a>Are There Better Words?</h2>
<p>Looking to other languages for inspiration...in at least one Haskell text combinator set, it also uses <a href="https://hackage.haskell.org/package/parsers-0.12.10/docs/Text-Parser-Combinators.html#v:some"><strong>some</strong></a> to mean one or more match, but picks <a href="https://hackage.haskell.org/package/parsers-0.12.10/docs/Text-Parser-Combinators.html#v:many"><strong>many</strong></a> for zero or more matches.</p>
<p>Doesn't make a whole lot of sense.  But because we're sort of dealing in a gray area of learned behavior here, I wonder if the benefit of going with MANY to avoid the inconsistency with ANY in regular code is enough to prefer it?</p>
<p>Or we could switch around and keep ANY for PARSE, but change the language so that ANY is prefix <strong>OR</strong> with ALL as prefix <strong>AND</strong>.</p>
<pre><code>and [thing1, thing2] then [...]

or [thing1, thing2] then [...]
</code></pre>
<p>But I'm not a fan of that. I like the direction of AND and OR as weird infix operations right now...so I think we should stick with that. I've even been considering that <strong>x and y</strong> should be allowed so long as Y is not a function with arguments; it can short circuit across the word if it quotes it.</p>
<h2>
<a name="so-thoughts-3" class="anchor" href="12.html#so-thoughts-3"></a>So, Thoughts?</h2>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="1" />
              </div>

                <div class='crawler-linkback-list' itemscope itemtype='http://schema.org/ItemList'>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../../all-vs-case-all/1874.html">ALL [...] vs. CASE/ALL</a>
                        <meta itemprop='position' content='5'>
                      </div>
                      <div itemprop='itemListElement' itemscope itemtype='http://schema.org/ListItem'>
                        <a itemprop='url' href="../../could-we-replace-parses-opt-with-try/1888.html">Could we replace PARSE&#39;s OPT with TRY ?</a>
                        <meta itemprop='position' content='6'>
                      </div>
                </div>
          </div>
          <div id='post_5' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.rebol.info/u/iArnold'><span itemprop='name'>iArnold</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="../../any-vs-parses-any-can-we-have-consistency/741.html">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-03-04T07:36:42Z' class='post-time'>
                    March 4, 2021,  7:36am
                  </time>
                  <meta itemprop='dateModified' content='2023-07-26T13:57:39Z'>
              <span itemprop='position'>5</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <aside class="quote no-group" data-username="hostilefork" data-post="1" data-topic="741">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/hostilefork/40/26_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p>in at least one Haskell text combinator set, it also uses <a href="https://hackage.haskell.org/package/parsers-0.12.10/docs/Text-Parser-Combinators.html#v:some"><strong>some</strong></a> to mean one or more match, but picks <a href="https://hackage.haskell.org/package/parsers-0.12.10/docs/Text-Parser-Combinators.html#v:many"><strong>many</strong></a> for zero or more matches.</p>
</blockquote>
</aside>
<p>For me MANY says more than one. Even more than two if you are strict.  (As the saying goes, counting: one, two, many.)</p>
<p>SOME says yes there should be one or more of these present. ANY is just fine for me expressing any positive number and zero within PARSE. But indeed with ANY [condition1 condition2] there is at least one of the conditions true.</p>
<p>Well a small difference indeed, but vs. using something like OPTIONAL within PARSE to overcome this, I say I can live with the difference in meaning.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="1" />
              <span class='post-likes'>1 Like</span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="0" />
              </div>

          </div>
          <div id='post_6' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.rebol.info/u/BlackATTR'><span itemprop='name'>BlackATTR</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="../../any-vs-parses-any-can-we-have-consistency/741.html">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-03-04T13:29:41Z' class='post-time'>
                    March 4, 2021,  1:29pm
                  </time>
                  <meta itemprop='dateModified' content='2023-07-26T14:30:39Z'>
              <span itemprop='position'>6</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>While it's good to have literate keywords for pattern matching, I think most devs (including newbies) coming to Ren-C will be minimally familiar with the symbols which have been around forever: * (match 0 or more), ? (match 1 item), # (match one digit), and ! (not).</p>
<p>The standard <em>symbol</em> in pattern matching is <strong><code>*</code></strong>.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="0" />
              </div>

          </div>
          <div id='post_7' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="../../any-vs-parses-any-can-we-have-consistency/741.html">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-03-04T22:08:44Z' class='post-time'>
                    March 4, 2021, 10:08pm
                  </time>
                  <meta itemprop='dateModified' content='2023-07-26T15:06:39Z'>
              <span itemprop='position'>7</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <blockquote>
<p>ANY isn't iterative, it just means "pick the first thing that matches from this set", and the semantics feel quite inconsistent.</p>
</blockquote>
<p>It occurs to me that there is an arity-1 looping construct... CYCLE.  It was chosen to replace FOREVER, since FOREVER loops usually broke (it was a misnomer).</p>
<p>But CYCLE could be used here:</p>
<pre><code>&gt;&gt; parse "aaaccc" [some "a" opt some "b" opt some "c"]
== "c"

&gt;&gt; parse "aaaccc" [some "a" cycle "b" cycle "c"]
== "c"
</code></pre>
<p>It's a bit different semantically because CYCLE in the main language doesn't end until you STOP or BREAK.  It's not like an UNTIL where the body result itself can make it stop.</p>
<p>Although PARSE is a bit different in semantics anyway.  So stopping the cycle on a failed rule might not be that inconsistent under its rules.</p>
<p>Though...CYCLE could be, the anti-UNTIL</p>
<pre><code>&gt;&gt; n: 1, cycle [print [n], n: n + 1, n &lt; 4]
1
2
3
</code></pre>
<p>Anyway...I don't know that CYCLE implies "do this as long as it is true", however...more like "do it until I say to stop".  It's interesting to remember that we do have another arity-1 looping construct in the mix though.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="1" />
              <span class='post-likes'>1 Like</span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="1" />
              </div>

          </div>
          <div id='post_8' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.rebol.info/u/rgchris'><span itemprop='name'>rgchris</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="../../any-vs-parses-any-can-we-have-consistency/741.html">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-03-05T04:38:20Z' class='post-time'>
                    March 5, 2021,  4:38am
                  </time>
                  <meta itemprop='dateModified' content='2021-03-05T04:38:20Z'>
              <span itemprop='position'>8</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>I'm not suggesting I necessarily agree with the need to change, but if I were, I'd maybe go for ANY-OF and ALL-OF.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="1" />
              <span class='post-likes'>1 Like</span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="1" />
              </div>

          </div>
          <div id='post_9' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="../../any-vs-parses-any-can-we-have-consistency/741.html">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-03-05T06:41:45Z' class='post-time'>
                    March 5, 2021,  6:41am
                  </time>
                  <meta itemprop='dateModified' content='2023-07-26T14:52:41Z'>
              <span itemprop='position'>9</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <h2>
<a name="but-is-a-single-keyword-necessary-or-even-good-1" class="anchor" href="12.html#but-is-a-single-keyword-necessary-or-even-good-1"></a>But Is A Single Keyword Necessary (or Even Good)?</h2>
<p>I've gotten to wondering if there is a reason we don't have a separate word for "zero or more" in English.  You actually have to write out "zero or more" to convey that intent... <em>maybe because the intent is too weird for a single word</em>?</p>
<p>It has in the past occurred to me that PARSE's ANY was equivalent to OPT SOME:</p>
<pre><code>; any number of "a"s (including zero), followed by some "b"s
parse "bbb" [any "a" some "b"]

; optionally some "a"s, followed by some "b"s
parse "bbb" [opt some "a" some "b"]
</code></pre>
<p>Notice how while the code is a few characters "longer", the comment you need to explain what's going on tightens up.  It's like a more "proportional" capture of your intent.</p>
<p>Also, in the UPARSE model of synthesized values it's kind of less confusing, because it's clearer what it returns in the case of nothing: the same thing OPT always returns when a rule doesn't match: NULL.</p>
<h2>
<a name="trying-out-the-change-i-quickly-saw-benefits-2" class="anchor" href="12.html#trying-out-the-change-i-quickly-saw-benefits-2"></a>Trying Out The Change, I Quickly Saw Benefits...</h2>
<p>When you just write ANY it may be that you have a case that's actually supposed to be a SOME but it hasn't really bit you yet.  If you're willing to tolerate between 1 and a million of something, the case of no things being there is distinguished...and calling attention to the fact that the rule you have may not match at all can be an asset.</p>
<p>So OPT SOME offers an advantage, because it encourages you to look at it and decide if the OPT belongs there or not.  It may feel kind of like a wart, but maybe it's a helpful wart.</p>
<p>I actually did find a difference how I read the code.  "This entire next section may not be relevant... <em>none</em> of it could match and it would go on."  That weight of the OPT is felt more heavily when the word is there than the ANY...which if you <em>frequently</em> expect the thing to be there, you may assume it will <em>always</em> be there for at least one instance.</p>
<p>You also can spot redundancy in OPT more clearly.  Things like:</p>
<pre><code>opt [
    any [...]
]
</code></pre>
<p>Stand out more if they look like:</p>
<pre><code>opt [
   opt some [...]
]
</code></pre>
<p>Many cases I looked at tidied up.  I found this code removing 0 or more newlines at the head of a series via  ANY:</p>
<pre><code>parse series [
    remove [any newline]
    ...
]
</code></pre>
<p>But when you rephrase this with OPT SOME it suggests a better factoring:</p>
<pre><code>parse series [
    remove [opt some newline]
    ...
]
</code></pre>
<p>It reads clearest when you bring the OPT outside, to say you're <em>optionally removing some newlines</em>:</p>
<pre><code>parse series [
    opt remove [some newline]
    ...
]
</code></pre>
<p>Plus you can now see the result of NULL more obviously in the case when no newlines are removed, and leverage that.</p>
<h2>
<a name="a-motivated-individual-can-overrule-it-3" class="anchor" href="12.html#a-motivated-individual-can-overrule-it-3"></a>A Motivated Individual Can Overrule It</h2>
<p>Remember, UPARSE is going to let you be the judge.  If you want your own keywords, you can have them.  Maybe you like MANY (some parser combinators seem to think that 0...N is "many" and 1...N is "some").  Maybe you don't want to use the ANY parse abstraction that I think is more interesting.  It's your call!</p>
<h2>
<a name="so-im-going-ahead-with-this-4" class="anchor" href="12.html#so-im-going-ahead-with-this-4"></a>So, I'm Going Ahead With This</h2>
<p>One can argue there's a bit of a 1984-newspeak to it ("you don't need words like better or worse, use plus-good and un-good and double-plus-ungood").  But we're sort of asking a programming language to be more "nuanced" in its wording than English, which has evolved to be pretty much where the brain is at.  I've shown some concrete benefits here to breaking out the OPT so you can see its relationship to the other OPTs you have and move it around.</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="2" />
              <span class='post-likes'>2 Likes</span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="1" />
              </div>

          </div>
          <div id='post_12' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
                  Split this topic 
              </span>

              <link itemprop="mainEntityOfPage" href="../../any-vs-parses-any-can-we-have-consistency/741.html">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2023-07-26T15:40:30Z' class='post-time'>
                    July 26, 2023,  3:40pm
                  </time>
                  <meta itemprop='dateModified' content='2023-07-26T15:40:30Z'>
              <span itemprop='position'>12</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <p>A post was merged into an existing topic: <a href="../../the-cool-new-repurposing-of-while-in-parse/1875/2.html">The Cool New Repurposing of WHILE in PARSE</a></p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="0" />
              <span class='post-likes'></span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="0" />
              </div>

          </div>
          <div id='post_15' itemprop='comment' itemscope itemtype='http://schema.org/Comment' class='topic-body crawler-post'>
            <div class='crawler-post-meta'>
              <span class="creator" itemprop="author" itemscope itemtype="http://schema.org/Person">
                <a itemprop="url" href='https://forum.rebol.info/u/hostilefork'><span itemprop='name'>hostilefork</span></a>
                
              </span>

              <link itemprop="mainEntityOfPage" href="../../any-vs-parses-any-can-we-have-consistency/741.html">


              <span class="crawler-post-infos">
                  <time itemprop='datePublished' datetime='2021-12-12T23:14:14Z' class='post-time'>
                    December 12, 2021, 11:14pm
                  </time>
                  <meta itemprop='dateModified' content='2023-07-26T15:31:55Z'>
              <span itemprop='position'>15</span>
              </span>
            </div>
            <div class='post' itemprop='text'>
              <h2>
<a name="the-change-has-been-a-winner-1" class="anchor" href="12.html#the-change-has-been-a-winner-1"></a>The change has been a winner!</h2>
<p>...and it becomes even more palatable <strong><a href="../../could-we-replace-parses-opt-with-try/1888.html">with TRY replacing OPT</a></strong>:</p>
<pre><code>parse data [opt some rule]
; vs.
parse data [try some rule]
</code></pre>
<aside class="quote no-group" data-username="hostilefork" data-post="9" data-topic="741">
<div class="title">
<div class="quote-controls"></div>
<img loading="lazy" alt="" width="20" height="20" src="https://forum.rebol.info/user_avatar/forum.rebol.info/hostilefork/40/26_2.png" class="avatar"> hostilefork:</div>
<blockquote>
<p>Plus you can now see the result of NULL more obviously in the case when no newlines are removed, and leverage that.</p>
</blockquote>
</aside>
<p>Here's a great example from a little section of code in HELP (that needs revisiting, just in general), where it's breaking down parameters and refinements of a function:</p>
<pre><code>parse3 parameters of :value [
    copy args any [word! | meta-word! | get-word! | quoted-word!]
    copy refinements any path!
] else [
    fail [...]
]
</code></pre>
<p>When we rewrite the ANY as TRY SOME it shows us something interesting:</p>
<pre><code>parse parameters of :value [
    args: across try some [word! | meta-word! | get-word! | quoted-word!]
    refinements: across try some path!
] else [
    fail [...]
]
</code></pre>
<p>Since our ACROSS goes over something effectively OPT, we could wind up with an empty block.  But an empty block isn't as cleanly differentiated as a null.  What if we move the OPT outside the across (and leverage our new ANY, for good measure)?</p>
<pre><code>parse parameters of :value [
    args: try across some any [word! meta-word! get-word! quoted-word!]
    refinements: try across some path!
] else [
    fail [...]
]
</code></pre>
<p>Now we know that <strong>args</strong> and <strong>refinements</strong> are either null, or non-empty.  So testing "are there args" becomes just <strong>if args</strong> and not the more laborious <strong>if not empty? args</strong>.</p>
<p>I think it's interesting to see how these transformations jump off the page when you use TRY SOME instead of an atomic zero-or-more construct!</p>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
              <meta itemprop="interactionType" content="http://schema.org/LikeAction"/>
              <meta itemprop="userInteractionCount" content="3" />
              <span class='post-likes'>3 Likes</span>
            </div>

            <div itemprop="interactionStatistic" itemscope itemtype="http://schema.org/InteractionCounter">
                <meta itemprop="interactionType" content="http://schema.org/CommentAction"/>
                <meta itemprop="userInteractionCount" content="0" />
              </div>

          </div>
    </div>






    </div>
    <footer class="container wrap">
  <nav class='crawler-nav'>
    <ul>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forum.rebol.info/' itemprop="url">Home </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forum.rebol.info/categories' itemprop="url">Categories </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forum.rebol.info/guidelines' itemprop="url">FAQ/Guidelines </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forum.rebol.info/tos' itemprop="url">Terms of Service </a>
        </span>
      </li>
      <li itemscope itemtype='http://schema.org/SiteNavigationElement'>
        <span itemprop='name'>
          <a href='https://forum.rebol.info/privacy' itemprop="url">Privacy Policy </a>
        </span>
      </li>
    </ul>
  </nav>
  <p class='powered-by-link'>Powered by <a href="https://www.discourse.org">Discourse</a>, best viewed with JavaScript enabled</p>
</footer>

    
    
  </body>
  
</html>
